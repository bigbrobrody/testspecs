<?xml version="1.0" encoding="UTF-8"?>
<!--For PDF version (standard)-->
<!-- <?xml-stylesheet href="docbook/xsl/fo/docbook.xsl" type="text/xsl" ?>-->
<!--For PDF version-->
<!-- <?xml-stylesheet href="ONVIF-stylesheets/onvif-specification-fo-us.xsl" type="text/xsl" ?>-->
<!--For online version-->
<?xml-stylesheet href="docbook-css/docbook.xsl" type="text/xsl" ?>
<!--For PDF version - New ONVIF-->
<!--<?xml-stylesheet href="../ONVIFNew-stylesheets/onvif-specification-fo-us.xsl" type="text/xsl" ?>-->
<book xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xhtml="http://www.w3.org/1999/xhtml"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xml="http://www.w3.org/XML/1998/namespace"
      xsi:schemaLocation="http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd"
      version="0.1"
      xml:id="ONVIF_Analytics_Engine_Device_TS">
  <info>
    <orgname>
      <phrase>
        <trademark class="registered">ONVIF</trademark>
      </phrase>
    </orgname>
    <title>Analytics Engine Device Test Specification</title>
    <subtitle>Version 21.06</subtitle>
    <date>June 2021</date>
    <copyright>
      <year>2021</year>
      <holder>ONVIF, Inc. All rights reserved.</holder>
    </copyright>
    <address>
      <uri>www.onvif.org</uri>
    </address>
    <legalnotice role="notices">
      <para>
        Recipients of this document may copy, distribute, publish, or display this
        document so long as this copyright notice, license and disclaimer are retained with
        all copies of the document. No license is granted to modify this document.
      </para>
      <para>
        THIS DOCUMENT IS PROVIDED "AS IS," AND THE CORPORATION AND ITS MEMBERS AND THEIR
        AFFILIATES, MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT
        NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
        NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THIS DOCUMENT ARE SUITABLE FOR ANY
        PURPOSE; OR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ANY PATENTS,
        COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.
      </para>
      <para>
        IN NO EVENT WILL THE CORPORATION OR ITS MEMBERS OR THEIR AFFILIATES BE LIABLE FOR
        ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, PUNITIVE OR CONSEQUENTIAL DAMAGES,
        ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT, WHETHER OR
        NOT (1) THE CORPORATION, MEMBERS OR THEIR AFFILIATES HAVE BEEN ADVISED OF THE
        POSSIBILITY OF SUCH DAMAGES, OR (2) SUCH DAMAGES WERE REASONABLY FORESEEABLE, AND
        ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT. THE
        FOREGOING DISCLAIMER AND LIMITATION ON LIABILITY DO NOT APPLY TO, INVALIDATE, OR
        LIMIT REPRESENTATIONS AND WARRANTIES MADE BY THE MEMBERS AND THEIR RESPECTIVE
        AFFILIATES TO THE CORPORATION AND OTHER MEMBERS IN CERTAIN WRITTEN POLICIES OF THE
        CORPORATION.
      </para>
    </legalnotice>
    <revhistory>
      <revision>
        <revnumber>17.06</revnumber>
        <date>Mar 15, 2017</date>
        <revdescription>
          <para>
            First Issue.
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.06</revnumber>
        <date>Apr 18, 2017</date>
        <revdescription>
          <para>
            ANALYTICS-1-1-1 GET SUPPORTED RULES (MOTION REGION DETECTOR) added
          </para>
          <para>
            ANALYTICS-1-1-2 GET MOTION REGION DETECTOR RULE OPTIONS added
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.06</revnumber>
        <date>May 23, 2017</date>
        <revdescription>
          <para>
            ANALYTICS-1-1-2 GET MOTION REGION DETECTOR RULE OPTIONS updated
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE added
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.06</revnumber>
        <date>May 24, 2017</date>
        <revdescription>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE added
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT added
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Jul 24, 2017</date>
        <revdescription>
          <para>
            The following test cases were changed according to #1444:
          </para>
          <para>
            ANALYTICS-1-1-2 GET MOTION REGION DETECTOR RULE OPTIONS
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Jul 24, 2017</date>
        <revdescription>
          <para>
            The following test cases were changed according to #1445:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Sept 18, 2017</date>
        <revdescription>
          <para>
            The following test cases were added according to #1477:
          </para>
          <para>
            ANALYTICS-3-1-1 Get Services and Get Analytics Service Capabilities Consistency
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Oct 16, 2017</date>
        <revdescription>
          <para>
            Pre-Requisite of the following test cases were updated according to #1185:
          </para>
          <para>
            GET SUPPORTED RULES (MOTION REGION DETECTOR)
          </para>
          <para>
            GET MOTION REGION DETECTOR RULE OPTIONS
          </para>
          <para>
            CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            MOTION REGION DETECTOR EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Nov 22, 2017</date>
        <revdescription>
          <para>
            The following test case was updated according to #1184:
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>17.12</revnumber>
        <date>Nov 28, 2017</date>
        <revdescription>
          <para>
            The following test cases were updated according to #1398:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
          <para>
            The following annexes were added according to #1398:
          </para>
          <para>
            Annex A.8 Calculate Free Space for Rule
          </para>
          <para>
            Annex A.9 Delete Rule with Requested Type
          </para>
          <para>
            The following test cases were updated according to #1185:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.06</revnumber>
        <date>Jan 22, 2018</date>
        <revdescription>
          <para>
            The following test cases were updated according to #1557:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
          <para>
            The following annexes was added:
          </para>
          <para>
            Annex A.10 Create Motion Region Detector Rule
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.06</revnumber>
        <date>Jun 21, 2018</date>
        <revdescription>
          <para>Reformatting document using new template</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.12</revnumber>
        <date>Aug 16, 2018</date>
        <revdescription>
          <para>
            The following test cases were changed according to #1709:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE
          </para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT
          </para>
          <para>
            Annex Create Motion Region Detector Rule
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.12</revnumber>
        <date>Sept 05, 2018</date>
        <revdescription>
          <para>
            The following test cases were changed according to #1733:
          </para>
          <para>
            ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE (Note about comparison of Armed field changed)
          </para>
          <para>
            ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE (Note about comparison of Armed field changed)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.12</revnumber>
        <date>Oct 08, 2018</date>
        <revdescription>
          <para>
            The following test cases were changed according to #1665:
          </para>
          <para>
            ANALYTICS-1-1-1 GET SUPPORTED RULES (MOTION REGION DETECTOR) (step 4.3.1 added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>18.12</revnumber>
        <date>Dec 21, 2018</date>
        <revdescription>
          <para>Switching Hub description in 'Network Configuration for DUT' section was updated according to #1737</para>
        </revdescription>
      </revision>

      <revision>
        <revnumber>18.12</revnumber>
        <date>Dec 27, 2018</date>
        <revdescription>
          <para>Check of @Type in GetRuleOptionsResponse was changed in the following test cases according to #1774:</para>
          <para>GET MOTION REGION DETECTOR RULE OPTIONS</para>
          <para>CREATE MOTION REGION DETECTOR RULE</para>
          <para>MODIFY MOTION REGION DETECTOR RULE</para>
          <para>MOTION REGION DETECTOR EVENT</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>19.12</revnumber>
        <date>Apr 26, 2019</date>
        <revdescription>
          <para>The following was changed according to #1833:</para>
          <para>
            Scope (Analytics Engine section was replaced with the following sections: Motion Region Detector, Events, Capabilities)
          </para>
          <para>
            Scope (Analytics Modules section was added)
          </para>
          <para>
            Test Policy (Analytics Modules section was added)
          </para>
          <para>
            Analytics Engine (Analytics Modules section was added)
          </para>
          <para>ANALYTICS-4-1-1 Get Supported Analytics Modules (added)</para>
          <para>ANALYTICS-4-1-2 Get Analytics Module Options (added)</para>
          <para>ANALYTICS-4-1-3 Get Analytics Modules (added)</para>
          <para>A.11 Topic Format Verification (added)</para>
          <para>A.12 Valid Topic Format (added)</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>19.12</revnumber>
        <date>Oct 18, 2019</date>
        <revdescription>
          <para>The following was changed according to #1831:</para>
          <para>
            Introduction (Analytics Modules section was updated)
          </para>
          <para>
            Test Policy (Analytics Modules section was updated)
          </para>
          <para>
            ANALYTICS-4-1-4  Get Supported Metadata (added)
          </para>
          <para>
            ANALYTICS-3-1-1  Get Services and Get Analytics Service Capabilities Consistency (updated with adding of Note)
          </para>
          <para>
            ANALYTICS-3-1-2  Analytics Service Capabilities (added)
          </para>
          <para>
            Annex A.13 Get Installed Analytics Modules (added)
          </para>
          <para>
            Annex A.14 Get Supported Metadata (added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>19.12</revnumber>
        <date>Oct 23, 2019</date>
        <revdescription>
          <para>The following was changed according to #1837:</para>
          <para>
            ANALYTICS-4-1-5 Object Class Descriptor (added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Jan 16, 2020</date>
        <revdescription>
          <para>The following was changed according to #1841:</para>
          <para>
            ANALYTICS-5-1-2  Vehicle Information Descriptor (added)
          </para>
          <para>The following was changed according to #1845:</para>
          <para>
            ANALYTICS-5-1-3  Geo Location Metadata (added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Jan 17, 2020</date>
        <revdescription>
          <para>The following was changed according to #1953:</para>
          <para>
            ANALYTICS-4-1-5 Create Analytics Modules (added)
          </para>
          <para>
            ANALYTICS-4-1-6 Delete Analytics Modules (added)
          </para>
          <para>
            ANALYTICS-4-1-7 Modify Analytics Modules (added)
          </para>

        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Feb 10, 2020</date>
        <revdescription>
          <para>The following was changed according to #1820:</para>
          <para>
            ANALYTICS-5-1-4 Human Face Descriptor (added)
          </para>
          <para>The following was changed according to #1843:</para>
          <para>
            ANALYTICS-5-1-5 License Plate Information Descriptor (added)
          </para>
          <para>The following was changed according to #1839:</para>
          <para>
            ANALYTICS-5-1-6 Human Body Descriptor (added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Mar 17, 2020</date>
        <revdescription>
          <para>The following was changed according to #1835:</para>
          <para>
            ANALYTICS-5-1-7 Image Data (added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Apr 16, 2020</date>
        <revdescription>
          <para>The following test cases were updated according to #2037:</para>
          <para>
            ANALYTICS-5-1-4 Human Face Descriptor
          </para>
          <para>
            ANALYTICS-5-1-5 License Plate Information Descriptor
          </para>
          <para>
            ANALYTICS-5-1-6 Human Body Descriptor
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>May 13, 2020</date>
        <revdescription>
          <para>The following was changed according to #1999:</para>
          <para>
            ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT (step 21, 26 updated)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.06</revnumber>
        <date>Jun 15, 2020</date>
        <revdescription>
          <para>The following was changed according to #2018:</para>
          <para>
            ANALYTICS-4-1-4 GET SUPPORTED METADATA (step 7.2, 8.8 added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Aug 05, 2020</date>
        <revdescription>
          <para>The following was added according to #2015:</para>
          <para>
            Introduction\Rules
          </para>
          <para>
            Test Policy\Rules
          </para>
          <para>
            ANALYTICS-6-1-1 GET SUPPORTED RULES
          </para>
          <para>
            ANALYTICS-6-1-2 GET RULE OPTIONS
          </para>
          <para>
            ANALYTICS-6-1-3 GET RULES
          </para>
          <para>
            ANALYTICS-6-1-4 CREATE RULES
          </para>
          <para>
            ANALYTICS-6-1-5 DELETE RULES
          </para>
          <para>
            ANALYTICS-6-1-6 MODIFY RULES
          </para>
          <para>
            Annex A.27 Device Configuration For Create Rule
          </para>
          <para>
            Annex A.28 Get List of Non-Fixed Analytics Configurations With Supporting of Rules
          </para>
          <para>
            Annex A.29 Get Supported Rules
          </para>
          <para>
            Annex A.30 Prepare Free Space for Rule
          </para>
          <para>
            Annex A.31 Delete Rule
          </para>
          <para>
            Annex A.32 Create Rule
          </para>
          <para>
            Annex A.33 Select Existing Rule
          </para>
        </revdescription>
      </revision>

      <revision>
        <revnumber>20.12</revnumber>
        <date>Aug 24, 2020</date>
        <revdescription>
          <para>The following test case was updated according to #2065:</para>
          <para>
            ANALYTICS-4-1-2 GET ANALYTICS MODULES OPTIONS (step with check that for each rule description there is corresponding option item was removed)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Aug 28, 2020</date>
        <revdescription>
          <para>The following was added according to #1847:</para>
          <para>
            Introduction\Face Recognition Rule
          </para>
          <para>
            Test Policy\Face Recognition Rule
          </para>
          <para>
            ANALYTICS-7-1-1 GET SUPPORTED RULES (FACE RECOGNITION)
          </para>
          <para>
            ANALYTICS-7-1-2 GET FACE RECOGNITION RULE OPTIONS
          </para>
          <para>
            ANALYTICS-7-1-3 CREATE FACE RECOGNITION RULE
          </para>
          <para>
            ANALYTICS-7-1-4 MODIFY FACE RECOGNITION RULE
          </para>
          <para>
            ANALYTICS-2-1-2 FACE RECOGNITION EVENT
          </para>
          <para>
            A.34 Device Configuration For Create Specific Rule
          </para>
          <para>
            A.35 Select Value For Rule String Parameter Type
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Oct 05, 2020</date>
        <revdescription>
          <para>The following was changed according to #2102:</para>

          <para>
            ANALYTICS-4-1-3 GET ANALYTICS MODULES (4.6.2.4 and 4.6.2.5 steps were removed)
          </para>
          <para>
            ANALYTICS-6-1-3 GET RULES (4.6.2.4 and 4.6.2.5 steps were removed)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Nov 09, 2020</date>
        <revdescription>
          <para>The following was changed according to #2020:</para>

          <para>
            ANALYTICS-6-1-1 GET SUPPORTED RULES (step 4.4.5 added)
          </para>
          <para>
            ANALYTICS-4-1-1 GET SUPPORTED ANALYTICS MODULES (step 4.3.5 added)
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Dec 06, 2020</date>
        <revdescription>
          <para>The following was added according to #2065:</para>
          <para>
            ANALYTICS-4-1-8 MODIFY ANALYTICS MODULES (PARAMETERS WITHOUT OPTIONS)
          </para>
          <para>
            A.37 Supported Parameter Types
          </para>
          <para>
            A.38 Select Analytics Module Description with Parameters without Options
          </para>
          <para>
            A.39 Get Analytics Module Options
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>20.12</revnumber>
        <date>Dec 06, 2020</date>
        <revdescription>
          <para>The following was changed according to #2023:</para>
          <para>
            A.18 Prepare Free Space for Analytics Module (steps 5 - 7 added)
          </para>
          <para>
            A.10 Create Motion Region Detector Rule (steps 1, 2, 3, 6 removed)
          </para>
          <para>
            Steps with device configuration for adding a rule was replased with Annex A.34 Device Configuration For Create Specific Rule
          </para>
          <para>ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT</para>

        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Feb 01, 2021</date>
        <revdescription>
          <para>The following was changed according to #2065:</para>
          <para>
            ANALYTICS-4-1-7 MODIFY ANALYTICS MODULES was updated and renamed to ANALYTICS-4-1-7 MODIFY ANALYTICS MODULES (PARAMETERS WITH OPTIONS)
          </para>
          <para>A.40 Device Configuration For Modify Analytics Module (updated)</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Feb 07, 2021</date>
        <revdescription>
          <para>Profile T was added as Pre-Requisite according to #2128:</para>
          <para>ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Mar 07, 2021</date>
        <revdescription>
          <para>The following was changed according to #2070:</para>
          <para>
            ANALYTICS-6-1-6 MODIFY ANALYTICS MODULES was updated and renamed to ANALYTICS-6-1-6 MODIFY RULES (PARAMETERS WITH OPTIONS)
          </para>
          <para>
            ANALYTICS-6-1-7 MODIFY RULES (PARAMETERS WITHOUT OPTIONS) added
          </para>
          <para>A.41 Select Rule Description To Modify</para>
          <para>A.42 Device Configuration For Modify Rule (added)</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Mar 29, 2021</date>
        <revdescription>
          <para>The following test cases were added according to #1849:</para>
          <para>
            ANALYTICS-8-1-1 GET SUPPORTED RULES (LICENSE PLATE RECOGNITION)
          </para>
          <para>
            ANALYTICS-8-1-2 GET LICENSE PLATE RECOGNITION RULE OPTIONS
          </para>
          <para>
            ANALYTICS-2-1-3 LICENSE PLATE RECOGNITION EVENT
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Mar 29, 2021</date>
        <revdescription>
          <para>The following were updated according to #2023:</para>
          <para>
            A.27 Device Configuration For Create Rule (step 7 added)
          </para>
          <para>
            A.10 Create Motion Region Detector Rule (steps 1, 2, 3, 6 removed)
          </para>
          <para>
            Steps with device configuration for adding a rule was replased with Annex A.34 Device Configuration For Create Specific Rule
          </para>
          <para>ANALYTICS-1-1-3 CREATE MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-1-1-4 MODIFY MOTION REGION DETECTOR RULE</para>
          <para>ANALYTICS-2-1-1 MOTION REGION DETECTOR EVENT</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Apr 22, 2021</date>
        <revdescription>
          <para>The following test cases and annexes were added according to #1853:</para>
          <para>
            ANALYTICS-2-1-4 LINE CROSSING COUNTER EVENT            
          </para>
          <para>
            ANALYTICS-9-1-1 GET SUPPORTED RULES (LINE CROSSING COUNTER)
          </para>
          <para>
            ANALYTICS-9-1-2 GET LINE CROSSING COUNTER RULE OPTIONS
          </para>
          <para>A.43 Profile Configuration With Specific Rule Type</para>
          <para>A.44 Select Profile With Specific Rule Type</para>
          <para>A.45 Select Existing Rule With Specific Type</para>
          <para>A.46 Rule Engine Topic Format Verification</para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>Apr 30, 2021</date>
        <revdescription>
          <para>The following test cases were updated according to #2090:</para>
          <para>
            ANALYTICS-4-1-7 MODIFY ANALYTICS MODULES (PARAMETERS WITH OPTIONS) (step 6, 6.1 updated) 
          </para>
          <para>
            ANALYTICS-4-1-8 MODIFY ANALYTICS MODULES (PARAMETERS WITHOUT OPTIONS) (step 6, 6.1 updated) 
          </para>
          <para>
            ANALYTICS-6-1-6 MODIFY RULES (PARAMETERS WITH OPTIONS) (step 6, 6.1 updated) 
          </para>
          <para>
            ANALYTICS-6-1-7 MODIFY RULES (PARAMETERS WITHOUT OPTIONS) (step 6, 6.1 updated) 
          </para>
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>May 13, 2021</date>
        <revdescription>
          <para>The following test cases were updated according to #2200:</para>
          <para>
            ANALYTICS-4-1-4 GET SUPPORTED METADATA (step 6 added) 
          </para>          
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>May 24, 2021</date>
        <revdescription>
          <para>The following test cases were updated according to #2202:</para>
          <para>
            ANALYTICS-5-1-1 OBJECT CLASSIFICATION METADATA (steps 4.1.1 and 4.1.2 changed) 
          </para>          
        </revdescription>
      </revision>
      <revision>
        <revnumber>21.06</revnumber>
        <date>May 26, 2021</date>
        <revdescription>
          <para>Profile M was added as Pre-Requisite according to #2193:</para>
          <para>ANALYTICS-2-1-4 LINE CROSSING COUNTER EVENT</para>
          <para>ANALYTICS-4-1-5 CREATE ANALYTICS MODULES</para>
          <para>ANALYTICS-4-1-6 DELETE ANALYTICS MODULES</para>
          <para>ANALYTICS-4-1-7 MODIFY ANALYTICS MODULES (PARAMETERS WITH OPTIONS)</para>
          <para>ANALYTICS-4-1-8 MODIFY ANALYTICS MODULES (PARAMETERS WITHOUT OPTIONS)</para>
          <para>ANALYTICS-6-1-4 CREATE RULES</para>
          <para>ANALYTICS-6-1-5 DELETE RULES</para>
          <para>ANALYTICS-6-1-6 MODIFY RULES (PARAMETERS WITH OPTIONS)</para>
          <para>ANALYTICS-6-1-7 MODIFY RULES (PARAMETERS WITHOUT OPTIONS)</para>
        </revdescription>
      </revision>
    </revhistory>
  </info>
  <chapter xml:id="s.intro">
    <title>Introduction</title>
    <para>
      The goal of the ONVIF test specification set is to make it possible to realize fully interoperable
      IP physical security implementation from different vendors. The set of ONVIF test specification describes
      the test cases need to verify the [ONVIF Network Interface Specs] and [ONVIF Conformance] requirements.
      In addition, the test cases are to be basic inputs for some Profile specification requirements.
      It also describes the test framework, test setup, pre-requisites, test policies needed for the execution
      of the described test cases.
    </para>
    <para>
      This ONVIF Analytics Engine Test Specification acts as a supplementary document to the [ONVIF Network Interface Specs],
      illustrating test cases need to be executed and passed. And this specification acts as an input document
      to the development of test tool, which will be used to test the ONVIF device implementation conformance
      towards ONVIF standard. This test tool is referred as ONVIF Client hereafter.
    </para>
    <section xml:id="s.intro.scope">
      <title>Scope</title>
      <para>
        This ONVIF Analytics Engine Test Specification defines and regulates the conformance testing procedure for the ONVIF conformant devices.
        Conformance testing is meant to be functional black-box testing. The objective of this specification to provide test cases to test individual
        requirements of ONVIF devices according to ONVIF Analytics service(s) which is defined in [ONVIF Network Interface Specs].
      </para>
      <para>
        The principal intended purposes are:<itemizedlist>
          <listitem>
            <para>Provide self-assessment tool for implementations.</para>
          </listitem>
          <listitem>
            <para>
              Provide comprehensive test suite coverage for [ONVIF Network Interface Specs].
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        This specification <emphasis role="bold">does not</emphasis> address the following:
        <itemizedlist>
          <listitem>
            <para>
              Product use cases and non-functional (performance and regression) testing.
            </para>
          </listitem>
          <listitem>
            <para>
              SOAP Implementation Interoperability test i.e. Web Service Interoperability Basic Profile version 2.0 (WS-I BP 2.0).
            </para>
          </listitem>
          <listitem>
            <para>
              Network protocol implementation Conformance test for HTTP, HTTPS, RTP and RTSP protocol.
            </para>
          </listitem>
          <listitem>
            <para>
              Poor streaming performance test (audio/video distortions, missing audio/video frames, incorrect
              lib synchronization etc.).
            </para>
            <para>
              Wi-Fi Conformance test
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        The set of ONVIF Test Specification will not cover the complete set of requirements as defined in [ONVIF Network Interface Specs];
        instead, it will cover its subset.
      </para>
      <para>
        This ONVIF Analytics Engine Test Specification covers Analytics Service,
        which is a functional block of [ONVIF Network Interface Specs]. The following section gives a brief overview of each functional block and its scope.
      </para>
    </section>
    <section xml:id="s.intro.scope.motion_region_detector">
      <title>Motion Region Detector</title>
      <para>
        Motion Region Detector test cases cover verification of Rule interface for Motion Region Detector feature as mentioned in [ONVIF Analytics Spec]. It means that the following commands are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              GetSupportedRules (for Motion Region Detector Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              CreateRules (for Motion Region Detector Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              ModifyRules (for Motion Region Detector Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              DeleteRules (for Motion Region Detector Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              GetRules (for Motion Region Detector Rule scope only).
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.events">
      <title>Events</title>
      <para>
        Events test cases cover verification of property events defined in [ONVIF Analytics Spec]. Currently the following events are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              tns1:RuleEngine/MotionRegionDetector/Motion.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.capabilities">
      <title>Capabilities</title>
      <para>
        Capabilities test cases cover verification to get Analytics Service capabilities. It means that the following commands are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              GetServices (Analytics Service);
            </para>
          </listitem>
          <listitem>
            <para>
              GetServiceCapabilities.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.analytics_modules">
      <title>Analytics Modules</title>
      <para>
        Analytics Modules test cases cover verification of analytics modules configuration feature as mentioned in [ONVIF Analytics Spec]. It means that the following commands are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              GetSupportedAnalyticsModules;
            </para>
          </listitem>
          <listitem>
            <para>
              GetAnalyticsModules;
            </para>
          </listitem>
          <listitem>
            <para>
              GetAnalyticsModuleOptions;
            </para>
          </listitem>
          <listitem>
            <para>
              GetSupportedMetadata;
            </para>
          </listitem>
          <listitem>
            <para>
              CreateAnalyticsModules;
            </para>
          </listitem>
          <listitem>
            <para>
              DeleteAnalyticsModules;
            </para>
          </listitem>
          <listitem>
            <para>
              ModifyAnalyticsModules.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.scene_elements">
      <title>Scene Elements</title>
      <para>
        Scene Elements test cases cover verification of scene elements in supported metadata as mentioned in [ONVIF Analytics Spec]. It means that the following features are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              Object Classification descriptor;
            </para>
          </listitem>
          <listitem>
            <para>
              Vehicle information descriptor;
            </para>
          </listitem>
          <listitem>
            <para>
              Human Face descriptor;
            </para>
          </listitem>
          <listitem>
            <para>
              Human Body descriptor;
            </para>
          </listitem>
          <listitem>
            <para>
              License plate information descriptor;
            </para>
          </listitem>
          <listitem>
            <para>
              Geo location metadata;
            </para>
          </listitem>
          <listitem>
            <para>
              GetSupportedMetadata;
            </para>
          </listitem>
          <listitem>
            <para>
              Image Data.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.rules">
      <title>Rules</title>
      <para>
        Rules test cases cover verification of rules configuration feature as mentioned in [ONVIF Analytics Spec]. It means that the following commands are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              GetSupportedRules;
            </para>
          </listitem>
          <listitem>
            <para>
              GetRules;
            </para>
          </listitem>
          <listitem>
            <para>
              GetRuleOptions;
            </para>
          </listitem>
          <listitem>
            <para>
              CreateRules;
            </para>
          </listitem>
          <listitem>
            <para>
              DeleteRules;
            </para>
          </listitem>
          <listitem>
            <para>
              ModifyRules.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="s.intro.scope.face_recognition_rule">
      <title>Face Recognition Rule</title>
      <para>
        Face Recognition Rule test cases cover verification of Rule interface for Face Recognition feature as mentioned in [ONVIF Analytics Spec]. It means that the following commands are covered by these test cases:
        <itemizedlist>
          <listitem>
            <para>
              GetSupportedRules (for Face Recognition Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              CreateRules (for Face Recognition Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              ModifyRules (for Face Recognition Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              DeleteRules (for Face Recognition Rule scope only);
            </para>
          </listitem>
          <listitem>
            <para>
              GetRules (for Face Recognition Rule scope only).
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
  </chapter>
  <chapter xml:id="s.docbook">
    <title>Normative references</title>
    <itemizedlist>
      <listitem>
        <para>[ONVIF Conformance] ONVIF Conformance Process Specification:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/conformance/">https://www.onvif.org/profiles/conformance/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Profile Policy] ONVIF Profile Policy:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/">https://www.onvif.org/profiles/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Network Interface Specs] ONVIF Network Interface Specification documents:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Core Specs] ONVIF Core Specification:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Media2 Spec] ONVIF Media 2 Specification:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Analytics Spec] ONVIF Analytics Specification:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ONVIF Base Test] ONVIF Base Device Test Specification:</para>
        <para>
          <link xlink:href="https://www.onvif.org/profiles/conformance/device-test/">https://www.onvif.org/profiles/conformance/device-test/</link>
        </para>
      </listitem>
      <listitem>
        <para>[ISO/IEC Directives, Part 2] ISO/IEC Directives, Part 2, Annex H:</para>
        <para>
          <link xlink:href="http://www.iso.org/directives">http://www.iso.org/directives</link>
        </para>
      </listitem>
      <listitem>
        <para>[ISO 16484-5] ISO 16484-5:2014-09 Annex P:</para>
        <para>
          <link xlink:href="https://www.iso.org/obp/ui/#!iso:std:63753:en">https://www.iso.org/obp/ui/#!iso:std:63753:en</link>
        </para>
      </listitem>
      <listitem>
        <para>[SOAP 1.2, Part 1] W3C SOAP 1.2, Part 1, Messaging Framework:</para>
        <para>
          <link xlink:href="http://www.w3.org/TR/soap12-part1/">http://www.w3.org/TR/soap12-part1/</link>
        </para>
      </listitem>
      <listitem>
        <para>[XML-Schema, Part 1] W3C XML Schema Part 1: Structures Second Edition:</para>
        <para>
          <link xlink:href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</link>
        </para>
      </listitem>
      <listitem>
        <para>[XML-Schema, Part 2] W3C XML Schema Part 2: Datatypes Second Edition:</para>
        <para>
          <link xlink:href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</link>
        </para>
      </listitem>
      <listitem>
        <para>[WS-Security] "Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)", OASIS Standard, February 2006.:</para>
        <para>
          <link xlink:href="http://www.oasis-open.org/committees/download.php/16790/wss-v1.1-spec-os-SOAPMessageSecurity.pdf">http://www.oasis-open.org/committees/download.php/16790/wss-v1.1-spec-os-SOAPMessageSecurity.pdf</link>
        </para>
      </listitem>
    </itemizedlist>
  </chapter>
  <chapter xml:id="additions">
    <title>Terms and Definitions</title>
    <section xml:id="additions.conventions">
      <title>Conventions</title>
      <para>
        The key words "shall", "shall not", "should", "should not", "may", "need not",
        "can", "cannot" in this specification are to be interpreted as described in [ISO/IEC
        Directives Part 2].
      </para>
    </section>
    <section xml:id="additions.definitions">
      <title>Definitions</title>
      <para>This section describes terms and definitions used in this document.</para>
      <variablelist>
        <varlistentry>
          <term>Profile</term>
          <listitem>
            <para>See ONVIF Profile Policy.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ONVIF Device</term>
          <listitem>
            <para>
              Computer appliance or software program that exposes one or multiple
              ONVIF Web Services.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>ONVIF Client</term>
          <listitem>
            <para>
              Computer appliance or software program that uses ONVIF Web
              Services.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Media Profile</term>
          <listitem>
            <para>
              A media profile maps a video and/or audio source to a video and/or an audio encoder, PTZ and analytics configurations.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>SOAP</term>
          <listitem>
            <para>
              SOAP is a lightweight protocol intended for exchanging structured
              information in a decentralized, distributed environment. It uses XML
              technologies to define an extensible messaging framework providing a
              message construct that can be exchanged over a variety of underlying
              protocols.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Device Test Tool</term>
          <listitem>
            <para>
              ONVIF Device Test Tool that tests ONVIF Device implementation towards
              the ONVIF Test Specification set.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            Video Analytics
          </term>
          <listitem>
            <para>
              Algorithms used to evaluate video data for meaning of content.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            Audio Analytics
          </term>
          <listitem>
            <para>
              Algorithms used to evaluate audio data for meaning of content.
            </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section xml:id="additions.abbreviations">
      <title>Abbreviations</title>
      <para>This section describes abbreviations used in this document.</para>
      <variablelist>
        <varlistentry>
          <term>HTTP</term>
          <listitem>
            <para>Hyper Text Transport Protocol.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>WSDL</term>
          <listitem>
            <para>Web Services Description Language.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>XML</term>
          <listitem>
            <para>eXtensible Markup Language.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>PTZ</term>
          <listitem>
            <para>Pan/Tilt/Zoom.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </chapter>
  <chapter xml:id="overview">
    <title>Test Overview</title>
    <para>
      This section describes about the test setup and prerequisites needed,
      and the test policies that should be followed for test case execution.
    </para>
    <section xml:id="overview.test_setup">
      <title>Test Setup</title>
      <section xml:id="overview.test_setup.network_configuration">
        <title>Network Configuration for DUT</title>
        <para>
          The generic test configuration for the execution of test cases defined in this document is as shown below (Figure 4.1).
        </para>
        <para>
          Based on the individual test case requirements, some of the entities in the below setup may not be needed for the execution of those corresponding test cases.
        </para>
        <figure>
          <title>Test Configuration for DUT</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="test_network.png"
                         format="PNG"
                         scalefit="0"/>
            </imageobject>
            <textobject>
              <phrase>Test Configuration for DUT</phrase>
            </textobject>
          </mediaobject>
        </figure>
        <para>
          <emphasis role="bold">DUT:</emphasis> ONVIF device to be tested. Hereafter, this is referred to as DUT (Device Under Test).
        </para>
        <para>
          <emphasis role="bold">ONVIF Client (Test Tool):</emphasis> Tests are executed by this system and it controls the behavior of the DUT. It handles both expected and unexpected behavior.
        </para>
        <para>
          <emphasis role="bold">HTTP Proxy:</emphasis> provides facilitation in case of RTP and RTSP tunneling over HTTP.
        </para>
        <para>
          <emphasis role="bold">Wireless Access Point:</emphasis> provides wireless connectivity to the devices that support wireless connection.
        </para>
        <para>
          <emphasis role="bold">DNS Server:</emphasis> provides DNS related information to the connected devices.
        </para>
        <para>
          <emphasis role="bold">DHCP Server:</emphasis> provides IPv4 Address to the connected devices.
        </para>
        <para>
          <emphasis role="bold">NTP Server:</emphasis> provides time synchronization between ONVIF Client and DUT.
        </para>
        <para>
          <emphasis role="bold">Switching Hub:</emphasis> provides network connectivity among all the test equipments in the test environment. All devices should be connected to the Switching Hub.
          When running multiple test instances in parallel on the same network, the Switching Hub should be configured to use filtering in order to avoid multicast traffic being flooded to all ports, because this may affect test stability.
        </para>
        <para>
          <emphasis role="bold">Router:</emphasis> provides router advertisements for IPv6 configuration.
        </para>
      </section>
    </section>
    <section xml:id="overview.prerequisites">
      <title>Prerequisites</title>
      <para>
        The pre-requisites for executing the test cases described in this Test Specification are:
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              The DUT shall be configured with an IPv4 address.
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT shall be IP reachable [in the test configuration].
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT shall be able to be discovered by the Test Tool.
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT shall be configured with the time i.e. manual configuration of UTC time and if NTP is supported by the DUT, then NTP time shall be synchronized with NTP Server.
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT time and Test tool time shall be synchronized with each other either manually or by common NTP server
            </para>
          </listitem>
        </orderedlist>
      </para>
    </section>
    <section xml:id="overview.test_policy">
      <title>Test Policy</title>
      <para>
        This section describes the test policies specific to the test case execution of each functional block.
      </para>
      <para>
        The DUT shall adhere to the test policies defined in this section.
      </para>
      <section xml:id="overview.test_policy.motion_region_detector">
        <title>Motion Region Detector</title>
        <para>
          The test policies specific to the test case execution of Motion Region Detector functional block:
        </para>

        <itemizedlist>
          <listitem>
            <para>
              DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall give the Media2 Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall provide Motion Region Detector rule, if DUT supports this rule. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall support the following commands:
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleSupport capability as supported, then DUT shall support commands listed below. Otherwise, these test cases will be skipped.
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetSupportedRules
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetRules
                  </para>
                </listitem>
                <listitem>
                  <para>
                    CreateRules
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ModifyRules
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DeleteRules
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleOptionsSupported capability as supported, then DUT shall support GetRuleOptions command. Otherwise, the following test cases will be skipped:
              <itemizedlist>
                <listitem>
                  <para>
                    GET MOTION REGION DETECTOR RULE OPTIONS
                  </para>
                </listitem>
                <listitem>
                  <para>
                    MODIFY MOTION REGION DETECTOR RULE
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </itemizedlist>
        <para>
          Please, refer to <xref linkend="tc.analytics_engine.motion_region_detector"/> for Motion Region Detector Test Cases.
        </para>

      </section>
      <section xml:id="overview.test_policy.events">
        <title>Events</title>
        <para>
          The test policies specific to the test case execution of Events functional block::
        </para>

        <itemizedlist>
          <listitem>
            <para>
              DUT shall give the Analytics Service entry point and Event Service entry points by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall give the Media2 Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall provide Motion Region Detector rule, if DUT supports this rule. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall provide tns1:RuleEngine/MotionRegionDetector/Motion notification topic and Initialized event, if DUT supports Motion Region Detector rule. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall support the following commands:
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetEventProperties
                  </para>
                </listitem>
                <listitem>
                  <para>
                    CreatePullPointSubscription
                  </para>
                </listitem>
                <listitem>
                  <para>
                    PullMessages
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Unsubscribe
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleSupport capability as supported, then DUT shall support commands listed below. Otherwise, these test cases will be skipped.
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetSupportedRules
                  </para>
                </listitem>

                <listitem>
                  <para>
                    CreateRules
                  </para>
                </listitem>

                <listitem>
                  <para>
                    DeleteRules
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleOptionsSupported capability as supported, then DUT shall support GetRuleOptions command. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
        </itemizedlist>
        <para>
          Please, refer to <xref linkend="tc.analytics_engine.events"/> for Motion Region Detector Test Cases.
        </para>

      </section>
      <section xml:id="overview.test_policy.capabilities">
        <title>Capabilities</title>
        <para>
          The test policies specific to the test case execution of Capabilities functional block:
          <itemizedlist>
            <listitem>
              <para>
                DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support the following commands:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetServices
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetServiceCapabilities
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The following tests are performed
                <itemizedlist>
                  <listitem>
                    <para>
                      Getting capabilities with GetServiceCapabilities command
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Getting capabilities with GetServices command
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          Please refer to <xref linkend="tc.analytics_engine.capabilities"/> for Capabilities Test Cases.
        </para>
      </section>
      <section xml:id="overview.test_policy.analytics_modules">
        <title>Analytics Modules</title>
        <para>
          The test policies specific to the test case execution of Analytics Modules functional block:
          <itemizedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support the following commands:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetSupportedAnalyticsModules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetAnalyticsModules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetAnalyticsModuleOptions
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetSupportedMetadata
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      CreateAnalyticsModules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DeleteAnalyticsModules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ModifyAnalyticsModules
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                Additionally, DUT shall support the following commands which will be used as supplementary during the testing:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetServices
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return all supported analytics modules in GetSupportedAnalyticsModulesResponse response for the video analytics configuration specified in GetSupportedAnalyticsModules request.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT supports Supported Metadata as indicated by the Capabilities.SupportedMetadata, then DUT shall support the following commands
                <itemizedlist>
                  <listitem>
                    <para>
                      GetSupportedMetadata
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall indicate maximum number of analytics modules through the maxInstances attribute in GetSupportedAnalyticsModulesResponse.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return unique names of the parameters for each supported analytics modules in GetSupportedAnalyticsModulesResponse response.
              </para>
            </listitem>

            <listitem>
              <para>
                DUT shall return unique names of the messages for each supported analytics modules in GetSupportedAnalyticsModulesResponse response.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return valid parent topic value for each supported analytics modules in GetSupportedAnalyticsModulesResponse response.
              </para>
            </listitem>

            <listitem>
              <para>
                DUT shall return all configured analytics modules in GetAnalyticsModulesResponse response for the video analytics configuration specified in GetAnalyticsModules request.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return all analytics modules, which marked as fixed in GetSupportedAnalyticsModulesResponse response, in GetAnalyticsModulesResponse response for the video analytics configuration specified in GetAnalyticsModules request.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT shall return configured analytics modules in GetAnalyticsModulesResponse response whith the structure defined in GetSupportedAnalyticsModulesResponse response for the corresponding analytics module type.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT supports receiving of analitics module options as indicated by AnalyticsModuleOptionsSupported capability:
                <itemizedlist>
                  <listitem>
                    <para>
                      DUT shall return options for all parameters of all supported analytics modules in GetAnalyticsModuleOptionsResponse response for the video analytics configuration specified in GetAnalyticsModuleOptions request, if Type is skipped.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT shall return options for all parameters in GetAnalyticsModuleOptionsResponse response for the video analytics configuration and supported analytics module specified in GetAnalyticsModuleOptions request.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT shall not return RuleType for any option in GetAnalyticsModuleOptionsResponse response.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The following tests are performed:
                <itemizedlist>
                  <listitem>
                    <para>
                      Receiving of supported analytics modules for each video analytics configuration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Receiving of all configured analytics modules for each video analytics configuration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Verifying of consistency between configured analytics modules and supported analytics modules description.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If DUT supports receiving of analitics module options as indicated by AnalyticsModuleOptionsSupported capability:
                      <itemizedlist>
                        <listitem>
                          <para>
                            Receiving of all analytics module options for each video analytics configuration.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Receiving of analytics module options for specified analytics module type for each video analytics configuration.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Verifying of consistency between analytics module options and supported analytics modules description.
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If DUT supports receiving of supported metadata as indicated by SupportedMetadata capability:
                      <itemizedlist>
                        <listitem>
                          <para>
                            Receiving of supported metadata for each installed module type.
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
          </itemizedlist>
          Please refer to <xref linkend="tc.analytics_engine.analytics_modules"/> for Analytics Modules Test Cases.
        </para>
      </section>
      <section xml:id="overview.test_policy.scene_elements">
        <title>Scene Elements</title>
        <para>
          The test policies specific to the test case execution of Capabilities functional block:
          <itemizedlist>
            <listitem>
              <para>
                DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT supports Supported Metadata as indicated by the Capabilities.SupportedMetadata, then DUT shall support the following commands
                <itemizedlist>
                  <listitem>
                    <para>
                      GetSupportedMetadata
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The following tests are performed
                <itemizedlist>
                  <listitem>
                    <para>
                      Getting supported metadata with GetSupportedMetadata command;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check that sum of Likelihood of Object is not greater than 1;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check Vehicle Information Descriptor in Supported Metadata;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check Geo Location Metadata in Supported Metadata;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check Human Face Descriptor in Supported Metadata;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check Human Body Descriptor in Supported Metadata;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check License Plate Information Descriptor in Supported Metadata;
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Check Image Data in Supported Metadata;
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          Please refer to <xref linkend="tc.analytics_engine.scene_elements"/> for Scene Elements Test Cases.
        </para>
      </section>
      <section xml:id="overview.test_policy.rules">
        <title>Rules</title>
        <para>
          The test policies specific to the test case execution of Rules functional block:
          <itemizedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall give the Media2 Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support Rule Engine as defined by RuleSupport capability. Otherwise, these test cases will be skipped.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support Rule Options as defined by RuleOptionsSupported capability. Otherwise, th following test cases will be skipped:
                <itemizedlist>
                  <listitem>
                    <para>
                      <xref linkend="tc.ANALYTICS-6-1-2"/>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall supports Profile M. Otherwise, th following test cases will be skipped:
                <itemizedlist>
                  <listitem>
                    <para>
                      <xref linkend="tc.ANALYTICS-6-1-4"/>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      <xref linkend="tc.ANALYTICS-6-1-5"/>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      <xref linkend="tc.ANALYTICS-6-1-6"/>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support the following commands:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetSupportedRules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetRules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetRuleOptions
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      CreateRules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DeleteRules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ModifyRules
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall support the following commands if DUT supports Rule Options:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetSupportedRules
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetRuleOptions
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                Additionally, DUT shall support the following commands which will be used as supplementary during the testing:
                <itemizedlist>
                  <listitem>
                    <para>
                      GetServices
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      GetAnalyticsConfigurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return all supported rules in GetSupportedRulesResponse response for the video analytics configuration specified in GetSupportedRules request.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall indicate maximum number of rules with the same type through the maxInstances attribute in GetSupportedRulesResponse.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall indicate maximum number of rules through the Limit attribute in GetSupportedRulesResponse if there is such limitation.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return unique names of the parameters for each supported rules in GetSupportedRulesResponse response.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return unique names of the messages for each supported rules in GetSupportedRulesResponse response.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return valid parent topic value for each supported rules in GetSupportedRulesResponse response.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return all configured rules in GetRulesResponse response for the video analytics configuration specified in GetRules request.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return all rules, which marked as fixed in GetSupportedRulesResponse response, in GetRulesResponse response for the video analytics configuration specified in GetRules request.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT shall return configured rules in GetRulesResponse response whith the structure defined in GetSupportedRulesResponse response for the corresponding rule type.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT supports receiving of rule options as indicated by RuleOptionsSupported capability:
                <itemizedlist>
                  <listitem>
                    <para>
                      DUT shall return options for all parameters, for which options is defined, of all supported rules in GetRuleOptionsResponse response for the video analytics configuration specified in GetRuleOptions request, if Type is skipped.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT shall return options for all parameters, for which options is defined, in GetRuleOptionsResponse response for the video analytics configuration and supported rule specified in GetRuleOptions request.
                    </para>
                  </listitem>
                  <!-- Add after #2065 ticket implementation with other restrictions
                  <listitem>
                    <para>
                      If DUT do not return an options for an parameter, DUT shall acccept any value which have the specified type without limitation.
                    </para>
                  </listitem>
                  -->
                  <listitem>
                    <para>
                      DUT shall not return AnalyticsModule for any option in GetRuleOptionsResponse response.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT shall support creating of a rule if at least one non-fixed rule is supported.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT shall support deleting of a rule if at least one non-fixed rule is supported.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT shall support modifying of a rule.
              </para>
            </listitem>
            <listitem>
              <para>
                If DUT supports Profile M:
                <itemizedlist>
                  <listitem>
                    <para>
                      DUT shall support creating of a rule with default parameters values, if at least one non-fixed rule is supported, if empty Parameters list was specified in CreateRules request.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT shall support modifying of a rule with default parameters values, if empty Parameters list was specified in ModifyRules request.
                    </para>
                  </listitem>
                  <!-- Add after #2065 ticket implementation other restrictions
                  -->
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The following tests are performed:
                <itemizedlist>
                  <listitem>
                    <para>
                      Receiving of supported rules for each video analytics configuration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Receiving of all configured rules for each video analytics configuration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Verifying of consistency between configured rules and supported rules description.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If DUT supports receiving of rule options as indicated by RuleOptionsSupported capability:
                      <itemizedlist>
                        <listitem>
                          <para>
                            Receiving of all rule options for each video analytics configuration.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Receiving of rule options for specified rule type for each video analytics configuration.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Verifying of consistency between rule options and supported rules description.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If DUT supports Profile M:
                      <itemizedlist>
                        <listitem>
                          <para>
                            Creating a rule with CreateRules command with empty Parameters list.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Modifying a rule with ModifyRules command with empty Parameters list.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Deleting  a rule with DeleteRules command.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
          </itemizedlist>
          Please refer to <xref linkend="tc.analytics_engine.rules"/> for Rules Test Cases.
        </para>
      </section>
      <section xml:id="overview.test_policy.face_recognition_rule">
        <title>Face Recognition Rule</title>
        <para>
          The test policies specific to the test case execution of Face Recognition functional block:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall give the Media2 Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall provide Face Recognition rule, if DUT supports this rule. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall support the following commands:
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleSupport capability as supported, then DUT shall support commands listed below. Otherwise, these test cases will be skipped.
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetSupportedRules
                  </para>
                </listitem> 
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleOptionsSupported capability as supported, then DUT shall support GetRuleOptions.               
            </para>
          </listitem>
          <listitem>
            <para>
              The following tests are performed:
              <itemizedlist>
                <listitem>
                  <para>
                    Receiving of Face Recognition rule description for each video analytics configuration that supports this rule.
                  </para>
                </listitem>              
                
                <listitem>
                  <para>
                    If DUT supports receiving of rule options as indicated by RuleOptionsSupported capability:
                    <itemizedlist>
                      <listitem>
                        <para>
                          Receiving of Face Recognition rule options for each video analytics configuration that supports this rule.
                        </para>
                      </listitem>
                      
                    </itemizedlist>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </itemizedlist>
        <para>
          Please, refer to <xref linkend="tc.analytics_engine.face_recognition_rule"/> for Face Recognition Rule Test Cases.
        </para>

      </section>
      <section xml:id="overview.test_policy.license_plate_recognition_rule">
        <title>License Plate Recognition Rule</title>
        <para>
          The test policies specific to the test case execution of License Plate Recognition functional block:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              DUT shall give the Analytics Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall give the Media2 Service entry point by GetServices command, if DUT supports this service. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall provide License Plate Recognition rule, if DUT supports this rule. Otherwise, these test cases will be skipped.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT shall support the following commands:
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleSupport capability as supported, then DUT shall support commands listed below. Otherwise, these test cases will be skipped.
              <itemizedlist>
                <listitem>
                  <para>
                    GetServiceCapabilities
                  </para>
                </listitem>
                <listitem>
                  <para>
                    GetSupportedRules
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If DUT returns RuleOptionsSupported capability as supported, then DUT shall support GetRuleOptions.
            </para>
          </listitem>
          <listitem>
            <para>
              The following tests are performed:
              <itemizedlist>
                <listitem>
                  <para>
                    Receiving of License Plate Recognition rule description for each video analytics configuration that supports this rule.
                  </para>
                </listitem>

                <listitem>
                  <para>
                    If DUT supports receiving of rule options as indicated by RuleOptionsSupported capability:
                    <itemizedlist>
                      <listitem>
                        <para>
                          Receiving of License Plate Recognition rule options for each video analytics configuration that supports this rule.
                        </para>
                      </listitem>

                    </itemizedlist>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </itemizedlist>
        <para>
          Please, refer to <xref linkend="tc.analytics_engine.license_plate_recognition_rule"/> for License Plate Recognition Rule Test Cases.
        </para>

      </section>
    </section>
  </chapter>
  <!--Analytics Engine Test Cases-->
  <chapter xml:id="tc.analytics_engine">
    <title>Analytics Engine</title>
    <!--Motion Region Detector Test Cases-->
    <section xml:id="tc.analytics_engine.motion_region_detector"
             xreflabel="Section 5.1">
      <title>Motion Region Detector</title>
      <!--ANALYTICS-1-1-1-->
      <section xml:id="tc.ANALYTICS-1-1-1">
        <title>GET SUPPORTED RULES (MOTION REGION DETECTOR)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-1-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Supported rules (ONVIF Analytics Service Spec), Motion Region Detector (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetSupportedRules, RuleDescription for tt:MotionRegionDetector
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify that device includes tt:MotionRegionDetector in GetSupportedRulesResponse. To verify structure of Motion Region Detector.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities. Motion Region Detector Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-1-1-1.4.2"
                          xreflabel="4.2">
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains RuleDescription element (<emphasis role="italic">motionRegionDetectorRuleDescription</emphasis>) with Name value is equal to <emphasis role="bold">tt:MotionRegionDetector</emphasis>:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis> does not have maxInstances attribute, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis> does not have Parameters.ElementItemDescription element with Name attribute value is equal to "MotionRegion", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Type attribute value is not equal to "axt:MotionRegionConfig" for <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis>.Parameters.ElementItemDescription with Name attribute value is equal to "MotionRegion", FAIL the test and skip other steps.
                          </para>
                        </listitem>

                        <listitem>
                          <para>
                            If <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis> does not have Messages.Source.SimpleItemDescription element with Name attribute value is equal to "VideoSource", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Type attribute value is not equal to "tt:ReferenceToken" for <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis>.Messages.Source.SimpleItemDescription with Name attribute value is equal to "VideoSource", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis> does not have Messages.Source.SimpleItemDescription element with Name attribute value is equal to "RuleName", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Type attribute value is not equal to "xs:string" for <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis>.Messages.Source.SimpleItemDescription with Name attribute value is equal to "RuleName", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis> does not have Messages.Data.SimpleItemDescription element with Name attribute value is equal to "State", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Type attribute value is not equal to "xs:boolean" for <emphasis role="italic">motionRegionDetectorRuleDescription</emphasis>.Messages.Data.SimpleItemDescription with Name attribute value is equal to "State", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Messages.ParentTopic value is not equal to "tns1:RuleEngine/MotionRegionDetector/Motion" for Messages with Source.SimpleItemDescription.Name value is equal to VideoSource and with Source.SimpleItemDescription.Name value is equal to RuleName, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If there was no RuleDescription element with Name value is equal to <emphasis role="bold">tt:MotionRegionDetector</emphasis> in at least one <emphasis role="italic">supportedRules</emphasis> at step <xref linkend="tc.ANALYTICS-1-1-1.4.2"/>, FAIL the test.
              </para>
            </listitem>


          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-1-1-2-->
      <section xml:id="tc.ANALYTICS-1-1-2">
        <title>GET MOTION REGION DETECTOR RULE OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-1-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Motion Region Detector (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetRuleOptions, MotionRegionConfigOptions
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify retrieving of MotionRegionConfigOptions by GetRuleOptions operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities, Rule Options is supported by the Device as indicated by the RuleOptionsSupported capabilities. Motion Region Detector Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleType := tt:MotionRegionDetector
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleOptions  list =: <emphasis role="italic">ruleOptionsList</emphasis>
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>

                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present), FAIL the test and skip other steps.


                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If RuleOption element with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present) does not contain <emphasis role="bold">MotionRegionConfigOptions</emphasis> element, FAIL the test and skip other steps.

                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>


          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-1-1-3-->
      <section xml:id="tc.ANALYTICS-1-1-3">
        <title>CREATE MOTION REGION DETECTOR RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-1-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Create Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Create Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify adding of Motion Region Detector Rule to an AnalyticsConfiguration by CreateRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the DUT as indicated by the RuleSupport capabilities. Motion Region Detector Rule is supported by the DUT. Profile T is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-3.5">
                ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - list of Analytics configurations.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis> - media profile.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <listitem xml:id="tc.ANALYTICS-1-1-3.DeviceConfigurationForCreateSpecificRule">
              <para>
                ONVIF Client configures device for adding of new Motion Region Detector rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:MotionRegionDetector" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed FaceRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis>  - media profile with Analytics Configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves Rule Options of tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleOptions</emphasis> - Rule Options
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present), FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If RuleOption element with @Name = <emphasis role="bold">MotionRegion</emphasis> and @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present) does not contain <emphasis role="bold">MotionRegionConfigOptions</emphasis> element, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">motionRegionConfigOptions</emphasis> := RuleOption[0].MotionRegionConfigOptions, where RuleOption[0] is element with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present).
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client calculates free space for adding of new rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperCalculateFreeSpaceForRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">maxInstances</emphasis> - flag if maxInstances is supported.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">amountOfAdditionalRules</emphasis>  - amount of additiona rules.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <!--<listitem>
              <para>
                If <emphasis role="italic">amountOfAdditionalRules</emphasis> &gt; 0 or <emphasis role="italic">maxInstances</emphasis>=false, go to step <xref linkend="tc.ANALYTICS-1-1-3.10"/>.
              </para>
            </listitem>-->
            <!--<listitem>
              <para xml:id="tc.ANALYTICS-1-1-3.9">
                ONVIF Client deletes rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRuleWithRequestedType"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-3.10">
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := TestMotionRegion
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:MotionRegionDetector
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].@Name := "MotionRegion"
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.@Armed := true if <emphasis role="italic">motionRegionConfigOptions</emphasis>.DisarmSupport = true, otherwise skipped.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.@Sensitivity := 1
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                If DUT responded with SOAP fault response:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">maxInstances</emphasis> = true, fail the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-1-1-3.11.2"
                          xreflabel="15.2">
                      ONVIF Client deletes rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRuleWithRequestedType"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-1-1-3.11">
                      ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Name := TestMotionRegion
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Type := tt:MotionRegionDetector
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].@Name := "MotionRegion"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.@Armed := true if <emphasis role="italic">motionRegionConfigOptions</emphasis>.DisarmSupport = true, otherwise skipped.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.ElementItem[0].MotionRegion.@Sensitivity := 1
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
                    </para>
                  </listitem>
                </orderedlist>

              </para>
            </listitem>-->
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = TestMotionRegion and with Type = tt:MotionRegionDetector, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">rule</emphasis> := Rule with @Name = TestMotionRegion and with Type = tt:MotionRegionDetector from <emphasis role="italic">updatedRuleList</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">rule</emphasis>.Parameters does not contain ElementItem with @Name = "MotionRegion", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-3.15">
                If <emphasis role="italic">rule</emphasis>.Parameters.ElementItem with @Name = "MotionRegion" is not equal to Parameters.ElementItem[0] element from step <xref linkend="tc.ANALYTICS-1-1-3.10"/>, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := TestMotionRegion
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.

              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> contains Rule with @Name = TestMotionRegion and with Type = tt:MotionRegionDetector, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores <emphasis role="italic">ruleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-1-1-3.DeviceConfigurationForCreateSpecificRule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>


          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> The following fields are compared at step <xref linkend="tc.ANALYTICS-1-1-3.15"/>:
          <itemizedlist>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[0].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[0].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[1].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[1].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[2].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[2].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[3].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[3].@y
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="bold">CreateRules</emphasis> request contained Armed filed:
                <itemizedlist>
                  <listitem>
                    <para>
                      MotionRegion.@Armed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.@Sensitivity
              </para>
            </listitem>
          </itemizedlist>
        </para>

      </section>
      <!--ANALYTICS-1-1-4-->
      <section xml:id="tc.ANALYTICS-1-1-4">
        <title>MODIFY MOTION REGION DETECTOR RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-1-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Modify Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Modify Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modifying of Motion Region Detector Rule by ModifyRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capability. Rule Options is supported by the Device as indicated by the RuleOptionsSupported capability.
          Motion Region Detector Rule is supported by the DUT. Profile T is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <!--<listitem>
              <para>
                If <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>-->
            <!--<listitem>
              <para xml:id="tc.ANALYTICS-1-1-4.5">
                ONVIF Client configure media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - list of Analytics configurations.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis> - media profile.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <listitem xml:id="tc.ANALYTICS-1-1-4.DeviceConfigurationForCreateSpecificRule">
              <para>
                ONVIF Client configures device for adding of new Motion Region Detector rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:MotionRegionDetector" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed FaceRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis>  - media profile with Analytics Configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client retrieves Rule Options of tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleOptions</emphasis> - Rule Options
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present), FAIL the test and skip other steps.


              </para>
            </listitem>
            <listitem>
              <para>
                If RuleOption element with @Name = <emphasis role="bold">MotionRegion</emphasis> and @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present) does not contain <emphasis role="bold">MotionRegionConfigOptions</emphasis> element, FAIL the test and skip other steps.

              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">motionRegionConfigOptions</emphasis> := RuleOption[0].MotionRegionConfigOptions, where RuleOption[0] is element with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present).

              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-4.10"
                    xreflabel="10">
                ONVIF Client creates  Motion Region Detector Rule by following the procedure mentioned in <xref linkend="Annex_HelperCreateMotionRegionDetectorRule"/> with the following input parameter
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration Token.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">motionRegionConfigOptions</emphasis> - motion region configuration option.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>


            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-4.11"
                    xreflabel="11">
                ONVIF Client invokes <emphasis role="bold">ModifyRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := TestMotionRegion
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:MotionRegionDetector
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].@Name := "MotionRegion"
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@y := [(<emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1)/2]
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@x := [(<emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1)/2]
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@y := [(<emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1)/2]
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@x := [(<emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1)/2]
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.@Armed := false if <emphasis role="italic">motionRegionConfigOptions</emphasis>.DisarmSupport = true, otherwise skipped.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters.ElementItem[0].MotionRegion.@Sensitivity := 0
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">ModifyRulesResponse</emphasis>.

              </para>
            </listitem>


            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = <emphasis role="bold">"TestMotionRegion"</emphasis> and with Type = <emphasis role="bold">tt:MotionRegionDetector</emphasis>, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">rule</emphasis> := Rule with @Name = "TestMotionRegion" and with Type = tt:MotionRegionDetector from <emphasis role="italic">updatedRuleList</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">rule</emphasis>.Parameters does not contain ElementItem with @Name = "MotionRegion", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-1-1-4.17">
                If <emphasis role="italic">rule</emphasis>.Parameters.ElementItem with @Name = <emphasis role="bold">"MotionRegion"</emphasis> is not equal to Parameters.ElementItem[0] element from step <xref linkend="tc.ANALYTICS-1-1-4.11"/>, FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := TestMotionRegion
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.

              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client restores <emphasis role="italic">ruleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-1-1-4.DeviceConfigurationForCreateSpecificRule"/>.
              </para>
            </listitem>


          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">ModifyRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>


          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> Symbol [] at step <xref linkend="tc.ANALYTICS-1-1-4.10"/> means integer part of value (floor function).

        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> The following fields are compared at step <xref linkend="tc.ANALYTICS-1-1-4.17"/>:
          <itemizedlist>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[0].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[0].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[1].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[1].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[2].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[2].@y
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[3].@x
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.Polygon.Point[3].@y
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="bold">ModifyRules</emphasis> request contained Armed filed:
                <itemizedlist>
                  <listitem>
                    <para>
                      MotionRegion.@Armed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                MotionRegion.@Sensitivity
              </para>
            </listitem>
          </itemizedlist>
        </para>

      </section>

    </section>
    <!--Events-->
    <section xml:id="tc.analytics_engine.events"
             xreflabel="Section 5.2">
      <title>Events</title>
      <!--ANALYTICS-2-1-1-->
      <section xml:id="tc.ANALYTICS-2-1-1">
        <title>MOTION REGION DETECTOR EVENT</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-2-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Motion Region Detector (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> tns1:RuleEngine/MotionRegionDetector/Motion
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify tns1:RuleEngine/MotionRegionDetector/Motion event format. To verify event generation for tns1:RuleEngine/MotionRegionDetector/Motion.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capability. Rule Options is supported by the Device as indicated by the RuleOptionsSupported capability.
          Motion Region Detector Rule is supported by the DUT. Profile T is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <!--<listitem>
              <para>
                If <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>-->
            <!--<listitem>
              <para xml:id="tc.ANALYTICS-2-1-1.5">
                ONVIF Client configure media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConfListWithSupportingOfMotionRegionDetector</emphasis> - list of Analytics configurations.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis> - media profile.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <listitem xml:id="tc.ANALYTICS-2-1-1.DeviceConfigurationForCreateSpecificRule">
              <para>
                ONVIF Client configures device for adding of new Motion Region Detector rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:MotionRegionDetector" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed FaceRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves Rule Options of tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleOptions</emphasis> - Rule Options
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present), FAIL the test and skip other steps.


              </para>
            </listitem>
            <listitem>
              <para>
                If RuleOption element with @Name = <emphasis role="bold">MotionRegion</emphasis> and @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present) does not contain <emphasis role="bold">MotionRegionConfigOptions</emphasis> element, FAIL the test and skip other steps.

              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">motionRegionConfigOptions</emphasis> := RuleOption[0].MotionRegionConfigOptions, where RuleOption[0] is element with @Name = <emphasis role="bold">MotionRegion</emphasis> and with @Type = <emphasis role="bold">axt:MotionRegionConfigOptions</emphasis> (if @Type is present).

              </para>
            </listitem>

            <listitem>
              <para xml:id="tc.ANALYTICS-2-1-1.10"
                    xreflabel="10">
                ONVIF Client creates  Motion Region Detector Rule by following the procedure mentioned in <xref linkend="Annex_HelperCreateMotionRegionDetectorRule"/> with the following input parameter
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration Token.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">motionRegionConfigOptions</emphasis> - motion region configuration option.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>


            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetEventProperties</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetEventPropertiesResponse </emphasis> with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      TopicNamespaceLocation list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      FixedTopicSet
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicSet =: <emphasis role="italic">topicSet</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicExpressionDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentFilterDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentSchemaLocation list
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topicSet</emphasis> does not contain <emphasis role="bold">tns1:RuleEngine/MotionRegionDetector/Motion</emphasis> topic, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">topic</emphasis> := tns1:RuleEngine/MotionRegionDetector/Motion topic from <emphasis role="italic">topicSet</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.IsProperty is not equal to true, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Source.SimpleItemDescription item with Name = "VideoSource", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Source.SimpleItemDescription with Name = "VideoSource" does not have Type = "tt:ReferenceToken", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">motionRegionConfigOptions</emphasis>.MotionRegionConfigOptions.RuleNotification = true:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Source.SimpleItemDescription item with Name = "RuleName", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">topic</emphasis>.MessageDescription.Source.SimpleItemDescription with Name = "RuleName" does not have Type = "xs:string", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Data.SimpleItemDescription item with Name = "State", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Data.SimpleItemDescription with Name = "State" does not have Type = "xs:boolean", FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                If DUT supports Pull-Point Notification feature
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>

                  <listitem xml:id="ANALYTICS-2-1-1.CPPS"
                            xreflabel="21.1">
                    <para>
                      ONVIF Client creates PullPoint subscription for the specified topic by following the procedure mentioned in <xref linkend="Annex_HelperCreatePullPointSubscription"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="bold">"tns1:RuleEngine/MotionRegionDetector/Motion"</emphasis> - Notification Topic
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">s</emphasis> - Subscription reference
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">currentTime</emphasis> - current time for the DUT
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">terminationTime</emphasis> - Subscription termination time
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="ANALYTICS-2-1-1.22"
                            xreflabel="21.2">
                    <para>
                      Until <emphasis role="italic">timeout1</emphasis> timeout expires, repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="2.5em"?>
                        <listitem>
                          <para>
                            ONVIF Client waits for time <emphasis role="italic">t</emphasis> := min{(<emphasis role="italic">tt</emphasis>-<emphasis role="italic">ct</emphasis>)/2, 1 second}.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client invokes <emphasis role="bold">PullMessages</emphasis> to the subscription endpoint <emphasis role="italic">s</emphasis> with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  Timeout := PT60S
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  MessageLimit := 1
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            The DUT responds with <emphasis role="bold">PullMessagesResponse</emphasis> message with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  CurrentTime =: <emphasis role="italic">ct</emphasis>
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  TerminationTime =: <emphasis role="italic">tt</emphasis>
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  NotificationMessage list =: <emphasis role="italic">notificationMessageList</emphasis>
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">notificationMessageList</emphasis> contains more than one notification, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">notificationMessageList</emphasis> is not empty and <emphasis role="italic">notificationMessageList</emphasis>[0].Topic is not equal to <emphasis role="bold">"tns1:RuleEngine/MotionRegionDetector/Motion"</emphasis>, FAIL the test and skip other steps.
                          </para>
                        </listitem>

                        <listitem>
                          <para xml:id="ANALYTICS-2-1-1.22.6"
                                xreflabel="21.2.6">
                            If <emphasis role="italic">notificationMessageList</emphasis> is not empty and <emphasis role="italic">notificationMessageList</emphasis>[0].PropertyOperation = "Initialized" and <emphasis role="italic">notificationMessageList</emphasis>[0] has Source.SimpleItem with Name = "VideoSource" and with Value = <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.SourceToken:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="3.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">motionRegionConfigOptions</emphasis>.MotionRegionConfigOptions.RuleNotification is not equal to true, go to step <xref linkend="ANALYTICS-2-1-1.23"/>.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">notificationMessageList</emphasis>[0] has Source.SimpleItem with Name = "RuleName" and with Value = "TestMotionRegion", go to step <xref linkend="ANALYTICS-2-1-1.23"/>.
                                </para>
                              </listitem>
                            </orderedlist>

                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">timeout1</emphasis> timeout expires for step <xref linkend="ANALYTICS-2-1-1.22"/> without
                            Notification corresponds to step <xref linkend="ANALYTICS-2-1-1.22.6"/>, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="ANALYTICS-2-1-1.23"
                          xreflabel="21.3">
                      If <emphasis role="italic">notificationMessageList</emphasis>[0] does not have Data.SimpleItem with Name = "State" and with Value with type = "xs:boolean", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := TestMotionRegion
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores rule if it was deleted at step <xref linkend="tc.ANALYTICS-2-1-1.10"/>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores <emphasis role="italic">ruleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-2-1-1.DeviceConfigurationForCreateSpecificRule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetEventPropertiesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">PullMessagesResponse</emphasis> message.
              </para>
            </listitem>


          </itemizedlist>
        </para>

      </section>
 <!--ANALYTICS-2-1-2-->
      <section xml:id="tc.ANALYTICS-2-1-2">
        <title>FACE RECOGNITION EVENT</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-2-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Recognition rule engines (ONVIF Analytics Service Spec), Face Recognition (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> tns1:RuleEngine/Recognition/Face
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> event.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify tns1:RuleEngine/Recognition/Face topic format.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Event Service is received from the DUT.
          Face Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetEventProperties</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetEventPropertiesResponse </emphasis> with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      TopicNamespaceLocation list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      FixedTopicSet
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicSet =: <emphasis role="italic">topicSet</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicExpressionDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentFilterDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentSchemaLocation list
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topicSet</emphasis> does not contain <emphasis role="bold">tns1:RuleEngine/Recognition/Face</emphasis> topic, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">topic</emphasis> := tns1:RuleEngine/Recognition/Face topic from <emphasis role="italic">topicSet</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription contains @IsProperty = true, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-2-1-2.TopicVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">topic</emphasis>.MessageDescription - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Data.SimpleItemDescription item with Name = "Likelihood", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Data.SimpleItemDescription with Name = "Likelihood" does not have Type = "xs:float", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "Label" and its Type != "xs:string", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "ImageUri" and its Type != "xs:anyURI", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "EnrollmentID" and its Type != "xs:string", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "RefImageUri" and its Type != "xs:anyURI", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "Image" and its Type != "xs:base64Binary", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "BoundingBox" and its Type != "tt:Rectangle", FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>

            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetEventPropertiesResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>

      </section>
      <!--ANALYTICS-2-1-3-->
      <section xml:id="tc.ANALYTICS-2-1-3">
        <title>LICENSE PLATE RECOGNITION EVENT</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-2-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Recognition rule engines (ONVIF Analytics Service Spec), License Plate Recognition (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> tns1:RuleEngine/Recognition/LicensePlate
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> event.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify tns1:RuleEngine/Recognition/LicensePlate topic format.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Event Service is received from the DUT.
          License Plate Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetEventProperties</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetEventPropertiesResponse </emphasis> with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      TopicNamespaceLocation list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      FixedTopicSet
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicSet =: <emphasis role="italic">topicSet</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicExpressionDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentFilterDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentSchemaLocation list
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topicSet</emphasis> does not contain <emphasis role="bold">tns1:RuleEngine/Recognition/LicensePlate</emphasis> topic, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">topic</emphasis> := tns1:RuleEngine/Recognition/LicensePlate topic from <emphasis role="italic">topicSet</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription contains @IsProperty = true, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-2-1-3.TopicVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">topic</emphasis>.MessageDescription - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Data.SimpleItemDescription item with Name = "Likelihood", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Data.SimpleItemDescription with Name = "Likelihood" does not have Type = "xs:float", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "Label" and its Type != "xs:string", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "ImageUri" and its Type != "xs:anyURI", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.SimpleItemDescription item with Name = "VehicleImageURI" and its Type != "xs:anyURI", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "BoundingBox" and its Type != "tt:Rectangle", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "Image" and its Type != "xs:base64Binary", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Data.ElementItemDescription item with Name = "LicensePlateInfo", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Data.ElementItemDescription with Name = "LicensePlateInfo" does not have Type = "tt:LicensePlateInfo", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "VehicleInfo" and its Type != "tt:VehicleInfo", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> contains MessageDescription.Data.ElementItemDescription item with Name = "VehicleImage" and its Type != "xs:base64Binary", FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>

            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetEventPropertiesResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>

      </section>
      <!--ANALYTICS-2-1-4-->
      <section xml:id="tc.ANALYTICS-2-1-4">
        <title>LINE CROSSING COUNTER EVENT</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-2-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Line crossing counting (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> tns1:RuleEngine/CountAggregation/Counter
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> event.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify tns1:RuleEngine/CountAggregation/Counter topic format. To verify tns1:RuleEngine/CountAggregation/Counter initialize event generation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Event Service is supported by the DUT. Line crossing counting Rule is supported by the DUT. Profile M is supported. 
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetEventProperties</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetEventPropertiesResponse </emphasis> with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      TopicNamespaceLocation list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      FixedTopicSet
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicSet =: <emphasis role="italic">topicSet</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      TopicExpressionDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentFilterDialect list
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      MessageContentSchemaLocation list
                    </para>
                  </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topicSet</emphasis> does not contain <emphasis role="bold">tns1:RuleEngine/CountAggregation/Counter</emphasis> topic, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">topic</emphasis> := tns1:RuleEngine/CountAggregation/Counter topic from <emphasis role="italic">topicSet</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.@IsProperty = !true, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-2-1-4.TopicVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">topic</emphasis>.MessageDescription - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>            
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis> does not contain MessageDescription.Data.SimpleItemDescription item with Name = "Count", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">topic</emphasis>.MessageDescription.Data.SimpleItemDescription with Name = "Count" does not have Type = "xs:int", FAIL the test and skip other steps.
              </para>
            </listitem>            
            <listitem>
              <para>
                If DUT supports Pull-Point Notification feature
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem xml:id="tc.ANALYTICS-2-1-4.ProfilePreparation" xreflabel="11.1">
                    <para>
                      ONVIF Client configures profile with Line crossing counting rule by following the procedure mentioned in <xref linkend="Annex_HelperProfileConfigurationWithSpecificRuleType"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in "tt:LineCounting" - Rule type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">videoSourceToken</emphasis> - token of the video source present in the media profile
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">ruleName</emphasis> - name of the rule present in the media profile
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration present in the media profile
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">ruleToDelete</emphasis>  - a rule to delete, if it was created
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="ANALYTICS-2-1-4.CPPS"
                            xreflabel="11.2">
                    <para>
                      ONVIF Client creates PullPoint subscription for the specified topic by following the procedure mentioned in <xref linkend="Annex_HelperCreatePullPointSubscription"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="bold">"tns1:RuleEngine/CountAggregation/Counter"</emphasis> - Notification Topic
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">s</emphasis> - Subscription reference
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">currentTime</emphasis> - current time for the DUT
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">terminationTime</emphasis> - Subscription termination time
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="ANALYTICS-2-1-4.CatchInitializedEvent"
                            xreflabel="11.3">
                    <para>
                      Until <emphasis role="italic">timeout1</emphasis> timeout expires, repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="2.5em"?>
                        <listitem>
                          <para>
                            ONVIF Client waits for time <emphasis role="italic">t</emphasis> := min{(<emphasis role="italic">tt</emphasis>-<emphasis role="italic">ct</emphasis>)/2, 1 second}.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client invokes <emphasis role="bold">PullMessages</emphasis> to the subscription endpoint <emphasis role="italic">s</emphasis> with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  Timeout := PT60S
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  MessageLimit := 1
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            The DUT responds with <emphasis role="bold">PullMessagesResponse</emphasis> message with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  CurrentTime =: <emphasis role="italic">ct</emphasis>
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  TerminationTime =: <emphasis role="italic">tt</emphasis>
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  NotificationMessage list =: <emphasis role="italic">notificationMessageList</emphasis>
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">notificationMessageList</emphasis> contains more than one notification, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para xml:id="ANALYTICS-2-1-4.CheckEvent"
                                xreflabel="11.3.6">
                            If <emphasis role="italic">notificationMessageList</emphasis> is not empty and corresponds the following parameters:
                            <itemizedlist>
                            <listitem>
                              <para>
                                <emphasis role="italic">notificationMessageList</emphasis>[0].Topic = <emphasis role="bold">"tns1:RuleEngine/CountAggregation/Counter"</emphasis>,
                              </para>
                            </listitem>
                              <listitem>
                                <para>
                                  <emphasis role="italic">notificationMessageList</emphasis>[0].PropertyOperation = "Initialized",
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  <emphasis role="italic">notificationMessageList</emphasis>[0] has Source.SimpleItem with Name = "Rule" and with Value = <emphasis role="italic">ruleName</emphasis>,
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  <emphasis role="italic">notificationMessageList</emphasis>[0] has Source.SimpleItem with Name = "VideoSource" and with Value = <emphasis role="italic">videoSourceToken</emphasis>,
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                 if <emphasis role="italic">notificationMessageList</emphasis>[0] has Source.SimpleItem with Name = "AnalyticsConfiguration" then its Value = <emphasis role="italic">analyticsToken</emphasis>, then the ONVIF Client checks notification:
                                </para>
                              </listitem>
                          </itemizedlist>                            
                            
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="3.5em"?>                          
                              
                              <listitem>
                                <para>
                                  If  <emphasis role="italic">notificationMessageList</emphasis>[0] does not contain Data.SimpleItem with Name = "Count", FAIL the test, restore DUT settings and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If Data.SimpleItem with Name = "Count" has Value type differ from integer, FAIL the test, restore DUT settings and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  Go to step <xref linkend="ANALYTICS-2-1-4.RestoreDUT"/>.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">timeout1</emphasis> timeout expires for step <xref linkend="ANALYTICS-2-1-4.CatchInitializedEvent"/> without
                            Notification corresponds to parameters in step <xref linkend="ANALYTICS-2-1-4.CheckEvent"/>, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="ANALYTICS-2-1-4.RestoreDUT"
                            xreflabel="11.4">
                    <para>
                      ONVIF Client deletes <emphasis role="italic">ruleToDelete</emphasis> if any to restore DUT settings.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-2-1-4.ProfilePreparation"/>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client creates <emphasis role="italic">ruleToRestore</emphasis> if any to restore DUT settings.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client deletes PullPoint subscription by following the procedure mentioned in <xref linkend="Annex_HelperDeleteSubscription"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">s</emphasis> - Subscription reference
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>               
            
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>

            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetEventPropertiesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">PullMessagesResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>

      </section>
    </section>
    <!-- Capabilities -->
    <section xml:id="tc.analytics_engine.capabilities"
             xreflabel="Section 5.3">
      <title>Capabilities</title>
      <!-- ANALYTICS-3-1-1 -->
      <section xml:id="tc.ANALYTICS-3-1-1">
        <title>GET SERVICES AND GET ANALYTICS SERVICES CAPABILITIES CONSISTENCY</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-3-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Capability exchange (ONVIF Core Specification), Capabilities (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetServices, GetServiceCapabilities (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> devicemgmt.wsdl, analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting Analytics Service using GetServices request. To verify Get Services and Analytics Service Capabilities consistency.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetServices</emphasis> message with parameters:
                <itemizedlist>
                  <listitem>
                    <para>
                      IncludeCapability := false
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with a <emphasis role="bold">GetServicesResponse</emphasis> message with parameters:
                <itemizedlist>
                  <listitem>
                    <para>
                      Service list =: <emphasis role="italic">listOfServicesWithoutCapabilities</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">listOfServicesWithoutCapabilities</emphasis> does not contain item with Namespace = "http://www.onvif.org/ver20/analytics/wsdl", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">analyticsServ</emphasis> := item from <emphasis role="italic">listOfServicesWithoutCapabilities</emphasis> list with Namespace = "http://www.onvif.org/ver20/analytics/wsdl".
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsServ</emphasis>.Capabilities is specified, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetServices</emphasis> message with parameters:
                <itemizedlist>
                  <listitem>
                    <para>
                      IncludeCapability := true
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with a <emphasis role="bold">GetServicesResponse</emphasis> message with parameters:
                <itemizedlist>
                  <listitem>
                    <para>
                      Service list =: <emphasis role="italic">listOfServicesWithCapabilities</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">listOfServicesWithCapabilities</emphasis> does not contain item with Namespace = "http://www.onvif.org/ver20/analytics/wsdl", FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">analyticsServ</emphasis> := item from <emphasis role="italic">listOfServicesWithCapabilities</emphasis> list with Namespace = "http://www.onvif.org/ver20/analytics/wsdl".
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsServ</emphasis>.Capabilities is not specified, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsServ</emphasis>.Capabilities does not contain valid Capabilities element for Analytics service from "http://www.onvif.org/ver20/analytics/wsdl" namespace, FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetServiceCapabilities</emphasis> (Analytics) request.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      Capabilities =: <emphasis role="italic">cap</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-3-1-1.CompareCapabilities"
                      xreflabel="16">
              <para>
                If <emphasis role="italic">cap</emphasis> differs from <emphasis role="italic">analyticsServ</emphasis>.Capabilities.Capabilities (see Note at the end of the test), FAIL the test.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetServicesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> The following fields are compared at step <xref linkend="tc.ANALYTICS-3-1-1.CompareCapabilities"/>:
          <itemizedlist>
            <listitem>
              <para>
                RuleSupport
              </para>
            </listitem>
            <listitem>
              <para>
                AnalyticsModuleSupport
              </para>
            </listitem>
            <listitem>
              <para>
                RuleOptionsSupported
              </para>
            </listitem>
            <listitem>
              <para>
                AnalyticsModuleOptionsSupported
              </para>
            </listitem>
            <listitem>
              <para>
                SupportedMetadata
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-3-1-2 -->
      <section xml:id="tc.ANALYTICS-3-1-2">
        <title>ANALYTICS SERVICE CAPABILITIES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-3-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Capabilities (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetServiceCapabilities (Analytics Service)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Analytics Service Capabilities.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">GetServiceCapabilities</emphasis> request.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      Capabilities =: <emphasis role="italic">cap</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">cap</emphasis>.SupportedMetadata  = true and <emphasis role="italic">cap</emphasis>.AnalyticsModuleSupport = false or skipped, FAIL the test.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetServicesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
    </section>
    <!-- Analytics Modules -->
    <section xml:id="tc.analytics_engine.analytics_modules"
             xreflabel="Section 5.4">
      <title>Analytics Modules</title>
      <!-- ANALYTICS-4-1-1 -->
      <section xml:id="tc.ANALYTICS-4-1-1">
        <title>GET SUPPORTED ANALYTICS MODULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetSupportedAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting supported analytics modules using GetSupportedAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <!--<listitem xml:id="ANALYTICS-4-1-1.ProfileConfiguration" xreflabel="4.1">
                    <para>
                      TODO: see ticket #1859 for clarification request
                    </para>
                  </listitem>-->
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedAnalyticsModules =: <emphasis role="italic">supportedModules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Analytics Module Description <emphasis role="italic">analyticsModuleDescription</emphasis> in <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <!--<listitem>
                          <para>
                            TODO: see ticket #1862 for clarification request
                          </para>
                        </listitem>-->
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleDescription</emphasis> does not have maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters list (SimpleItemDescription or ElementItemDescription item) has the same Name value with other item from the same list, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <!--<listitem>
                          <para>
                            (see ticket #1858 for clarification request) If at least one item in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters list (SimpleItemDescription or ElementItemDescription item) has Type value from "http://www.onvif.org/ver10/schema" namespace:
                            <orderedlist numeration="arabic" inheritnum="inherit">
                              <?dbfo label-width="3.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleContentSchemaLocation does not contain "https://www.onvif.org/ver10/schema/onvif.xsd", FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>-->
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">analyticsModuleDescription</emphasis>.Messages list (Source, or Key, or Data; SimpleItemDescription or ElementItemDescription item) has the same Name value with other item from the same list, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleDescription</emphasis>.ParentTopic is not valid topic (see <xref linkend="Annex_HelperTopicCheck"/>), FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleDescription</emphasis>.fixed = true:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsConf</emphasis> does not contain at least one AnalyticsEngineConfiguration.AnalyticsModule with Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <!--<listitem>
              <para>
                If something was changed at step <xref linkend="ANALYTICS-4-1-1.ProfileConfiguration"/>, restore the DUT state.
              </para>
            </listitem>-->

          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-4-1-2 -->
      <section xml:id="tc.ANALYTICS-4-1-2">
        <title>GET ANALYTICS MODULES OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetAnalyticsModuleOptions (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetAnalyticsModuleOptions (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting supported analytics module options using GetAnalyticsModuleOptions request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Analytics Module Options is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <!--<listitem xml:id="ANALYTICS-4-1-2.ProfileConfiguration" xreflabel="4.1">
                    <para>
                      TODO: see ticket #1859 for clarification request
                    </para>
                  </listitem>-->
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedAnalyticsModules =: <emphasis role="italic">supportedModules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetAnalyticsModuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            Type is skipped
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            Options list =: <emphasis role="italic">analyticsModuleOptionsFullList</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If at least one item in <emphasis role="italic">analyticsModuleOptionsFullList</emphasis> list contains RuleType, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Analytics Module Description <emphasis role="italic">analyticsModuleDescription</emphasis> in <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            ONVIF Client invokes <emphasis role="bold">GetAnalyticsModuleOptions</emphasis> request with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  Type := <emphasis role="italic">analyticsModuleDescription</emphasis>.Name
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            DUT responds with <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> message with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  Options list =: <emphasis role="italic">analyticsModuleOptionsList</emphasis>
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">analyticsModuleOptionsList</emphasis> list contains RuleType, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">analyticsModuleOptionsList</emphasis> list contains AnalyticsModule which is not equal to <emphasis role="italic">analyticsModuleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleOptionsFullList</emphasis> list does not contain all items from <emphasis role="italic">analyticsModuleOptionsList</emphasis> list (AnalyticsModule and Name to be used as unique identifier), FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <!--<listitem>
                          <para>
                            For each Parameters Description item <emphasis role="italic">parametersDescriptionItem</emphasis> in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters list (SimpleItemDescription or ElementItemDescription items) list repeat the following steps:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModuleOptionsList</emphasis> list does not contains item with Name = <emphasis role="italic">parametersDescriptionItem</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>-->
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <!--<listitem>
              <para>
                If something was changed at step <xref linkend="ANALYTICS-4-1-2.ProfileConfiguration"/>, restore the DUT state.
              </para>
            </listitem>-->
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-4-1-3 -->
      <section xml:id="tc.ANALYTICS-4-1-3">
        <title>GET ANALYTICS MODULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting supported analytics modules using GetAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <!--<listitem xml:id="ANALYTICS-4-1-3.ProfileConfiguration" xreflabel="4.1">
                    <para>
                      TODO: see ticket #1859 for clarification request
                    </para>
                  </listitem>-->
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedAnalyticsModules =: <emphasis role="italic">supportedModules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            AnalyticsModule list =: <emphasis role="italic">analyticsModuleList</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If at least one item in <emphasis role="italic">analyticsModuleList</emphasis> list contains Type which in not equal to Name fileld of at least one item at <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleDescription list, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Analytics Module Description <emphasis role="italic">analyticsModuleDescription</emphasis> in <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleDescription</emphasis>.fixed = true:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModuleList</emphasis> does not contain item with Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">analyticsModuleList</emphasis> contains item with Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.Name:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="5.5em"?>
                              <listitem>
                                <para>
                                  Set <emphasis role="italic">analyticsModule</emphasis> := <emphasis role="italic">analyticsModuleList</emphasis>[Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.Name].
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModule</emphasis>.Parameters.SimpleItem contains at least one SimpleItem which does not have item with the same Name in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters.SimpleItemDescription list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModule</emphasis>.Parameters.ElementItem contains at least one ElementItem which does not have item with the same Name in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters.ElementItemDescription list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <!--<listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters.SimpleItemDescription contains at least one SimpleItemDescription which does not have item with the same Name in <emphasis role="italic">analyticsModule</emphasis>.Parameters.SimpleItem list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters.ElementItemDescription contains at least one ElementItemDescription which does not have item with the same Name in <emphasis role="italic">analyticsModule</emphasis>.Parameters.ElementItem list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>-->
                            </orderedlist>
                          </para>
                        </listitem>

                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <!--<listitem>
              <para>
                If something was changed at step <xref linkend="ANALYTICS-4-1-3.ProfileConfiguration"/>, restore the DUT state.
              </para>
            </listitem>-->
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!--ANALYTICS-4-1-4-->
      <section xml:id="tc.ANALYTICS-4-1-4">
        <title>GET SUPPORTED METADATA</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetSupportedMetadata (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting supported metadata using GetSupportedMetadata request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Supported Metadata feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves full list of supported Analytics Modules by following the procedure mentioned in <xref linkend="Annex_GetAllSupportedAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">fullAnalyticsModuleDescriptionList</emphasis> - a list of supported Analytics Module Description
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">analyticsModuleTypeList</emphasis> := list of @Name values from <emphasis role="italic">fullAnalyticsModuleDescriptionList</emphasis>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList1</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
             <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList1</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList1</emphasis> contains at least two elements with the same @Type, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Module <emphasis role="italic">analyticsModule</emphasis> from <emphasis role="italic">analyticsModuleList1</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModule</emphasis>.@Type is not equal to at least one Type from  <emphasis role="italic">analyticsModuleTypeList</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client checks that object bounding boxes and shapes are located in the top left quarter of the image by following the procedure mentioned in <xref linkend="Annex_HelperCheckShapeDescriptorCoordinates"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsModule</emphasis>.SampleFrame - sample frame of analytics module
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Module Type <emphasis role="italic">analyticsModuleType</emphasis> from <emphasis role="italic">analyticsModuleTypeList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedMetadata</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            Type := <emphasis role="italic">analyticsModuleType</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedMetadataResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            AnalyticsModule list =: <emphasis role="italic">analyticsModuleList2</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList2</emphasis> contains more than one element, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList2</emphasis>[0].@Type is not equal to <emphasis role="italic">analyticsModuleType</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem xml:id="tc.ANALYTICS-4-1-4.CompareSetOfFieldsInMetadataInfo"
                            xreflabel="8.5">
                    <para>
                      If set of fields in <emphasis role="italic">analyticsModuleList2</emphasis>[0] is not equal to set of filels in corresponding AnalyticsModule from <emphasis role="italic">analyticsModuleList1</emphasis> (see Note at the end of the test), FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client checks that object bounding boxes and shapes are located in the top left quarter of the image by following the procedure mentioned in <xref linkend="Annex_HelperCheckShapeDescriptorCoordinates"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsModuleList2</emphasis>[0].SampleFrame - sample frame of analytics module
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>

          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedMetadataResponse</emphasis> messages.
              </para>
            </listitem>

          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> Presence of all fields without their values are compared at step <xref linkend="tc.ANALYTICS-4-1-4.CompareSetOfFieldsInMetadataInfo"/>,  @Type value is used as key.
        </para>
      </section>
      <!-- ANALYTICS-4-1-5 -->
      <section xml:id="tc.ANALYTICS-4-1-5">
        <title>CREATE ANALYTICS MODULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-5
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> CreateAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> CreateAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify creating of analytics module using CreateAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports non fixed AnalyticsModules by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> is empty, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-4-1-5.ConfigureProfile" xreflabel="5">
                ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - list of Analytics configurations.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis> - media profile.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported analytics modules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">supportedAnalyticsModules</emphasis> - supported analytics modules.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription list is empty,
                FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">analyticsModuleDescription</emphasis> := first <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription item with @fixed != true.
              </para>
            </listitem>            
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleDescription</emphasis> does not contain maxInstances attribute, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client prepares free space for adding of new analytics module with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis>.@maxInstances - maximum number of instances per configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->
            <listitem xml:id="tc.ANALYTICS-4-1-5.Annex23">
              <para>
                ONVIF Client configures device for adding of new analytics module by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedModuleSupported</emphasis> - if non fixed Analytics Module is supported
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">nonFixedModuleSupported</emphasis> = false, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">moduleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">CreateAnalyticsModules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      AnalyticsModule[0].@Name := <emphasis role="italic">moduleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      AnalyticsModule[0].@Type := <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      AnalyticsModule[0].Parameters := empty Parameters element
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT responds with <emphasis role="bold">CreateAnalyticsModulesResponse</emphasis> message
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">createdAnalyticsModule1</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis> from <emphasis role="italic">analyticsModuleList</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                For each SimpleItem element <emphasis role="italic">simpleItem</emphasis> in <emphasis role="italic">createdAnalyticsModule1</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription[0].Parameters does not contain at least one SimpleItemDescription with @Name = <emphasis role="italic">simpleItem</emphasis>.@Name, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each ElementItem element <emphasis role="italic">elementItem</emphasis> in <emphasis role="italic">createdAnalyticsModule1</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription[0].Parameters does not contain at least one ElementItemDescription with @Name = <emphasis role="italic">elementItem</emphasis>.@Name, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration does not contain AnalyticsModule element with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">createdAnalyticsModule2</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis> from <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-4-1-5.CompareSimpleItem"
                      xreflabel="22">
              <para>
                If list of SimpleItem.@Name in <emphasis role="italic">createdAnalyticsModule2</emphasis> does not equal to list of SimpleItem.@Name in <emphasis role="italic">createdAnalyticsModule1</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                For each SimpleItem element <emphasis role="italic">simpleItem</emphasis> in <emphasis role="italic">createdAnalyticsModule2</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem xml:id="tc.ANALYTICS-4-1-5.CompareSimpleItemValues"
                            xreflabel="23.1">
                    <para>
                      If <emphasis role="italic">simpleItem</emphasis>.@Value != @Value of corresponding SimpleItem in <emphasis role="italic">createdAnalyticsModule1</emphasis> (@Name will be used as key), FAIL the test.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If list of ElementItem.@Name in <emphasis role="italic">createdAnalyticsModule2</emphasis> does not equal to list of ElementItem.@Name in <emphasis role="italic">createdAnalyticsModule1</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client deletes created analytics module to restore the DUT by following the procedure mentioned in <xref linkend="Annex_HelperDeleteAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - token of Analytics configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">moduleName</emphasis>.@Name - Name of the analytics module to be deleted
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">moduleToRestore</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-4-1-5.Annex23"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">CreateAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-4-1-6 -->
      <section xml:id="tc.ANALYTICS-4-1-6">
        <title>DELETE ANALYTICS MODULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-6
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> DeleteAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> DeleteAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify delete of analytics module using DeleteAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <!--<listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports non fixed AnalyticsModules by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> is empty, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-4-1-6.ConfigureProfile" xreflabel="6">
                ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - list of Analytics configurations.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">profile</emphasis> - media profile.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported analytics modules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">supportedAnalyticsModules</emphasis> - supported analytics modules.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription list is empty,
                FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                Set <emphasis role="italic">analyticsModuleDescription</emphasis> := first <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription item with @fixed != true.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleDescription</emphasis> does not contain maxInstances attribute, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client prepares free space for adding of new analytics module with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis>.@maxInstances - maximum number of instances per configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>-->


            <listitem xml:id="tc.ANALYTICS-4-1-6.Annex23">
              <para>
                ONVIF Client configures device for adding of new analytics module by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedModuleSupported</emphasis> - if non fixed Analytics Module is supported
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">nonFixedModuleSupported</emphasis> = false, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">moduleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-4-1-6.CreateModule">
              <para>
                ONVIF Client creates new analytics module by following the procedure mentioned in <xref linkend="Annex_HelperCreateAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">moduleName</emphasis> - analytics module name
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteAnalyticsModules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      AnalyticsModule[0].@Name := <emphasis role="italic">moduleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT responds with <emphasis role="bold">DeleteAnalyticsModulesResponse</emphasis> message
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> contains AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration contains AnalyticsModule element with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">moduleToRestore</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores media profile if it was changed at step <xref linkend="tc.ANALYTICS-4-1-6.Annex23"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">DeleteAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-4-1-7 -->
      <section xml:id="tc.ANALYTICS-4-1-7">
        <title>MODIFY ANALYTICS MODULES (PARAMETERS WITH OPTIONS)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-7
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> ModifyAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> ModifyAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modification of analytics module's parameters that have corresponding options using ModifyAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Analytics Module Options is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-4-1-7.SelectModuleDescription"
                             xreflabel="3.1">
              <para>
                ONVIF Client selects analytics module description that has parameters with options by following the procedure mentioned in <xref linkend="Annex_HelperSelectAnalyticsModuleDescriptionToModify"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in true - flag shows if parameters of selected Analytics Module have corresponding options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">itemListDescription</emphasis> - list of SimpleItemDescription/ElementItemDescription elements that have options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">limit</emphasis> - maximum number of concurrent modules per configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <xref linkend="Annex_HelperSelectAnalyticsModuleDescriptionToModify"/> procedure did not return <emphasis role="italic">analyticsModuleDescription</emphasis>, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-4-1-7.SelectModule"
                             xreflabel="5">
              <para>
                ONVIF Client selects or create analytics module with required type by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForModifyModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModule1</emphasis> - Analytics Module with required type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For for the first SimpleItemDescription/ElementItemDescription (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">itemListDescription</emphasis>
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="4.5em"?>
                  <listitem xml:id="tc.ANALYTICS-4-1-7.ModifyModule"
                            xreflabel="6.1">
                    <para>
                      ONVIF Client invokes <emphasis role="bold">ModifyAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].@Name := <emphasis role="italic">analyticsModule1</emphasis>.@Name
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].@Type := <emphasis role="italic">analyticsModule1</emphasis>.@Type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].Parameters.SimpleItem/ElementItem[@Name = <emphasis role="italic">itemDescription</emphasis>.@Name].@Value := value of corresponding parameter type with option provided in the tabe in <xref linkend="Annex_HelperSupportedParameterTypes"/>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">ModifyAnalyticsModulesResponse</emphasis> message
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList</emphasis> does not contain AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedAnalyticsModule1</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name from <emphasis role="italic">analyticsModuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedAnalyticsModule1</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-4-1-7.ModifyModule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

                  <listitem>
                    <para>
                      ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration does not contain AnalyticsModule element with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedAnalyticsModule2</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name from <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedAnalyticsModule2</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-4-1-7.ModifyModule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>


                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client deletes analytics module created at step <xref linkend="tc.ANALYTICS-4-1-7.SelectModule"/> if any to restore the DUT by following the procedure mentioned in <xref linkend="Annex_HelperDeleteAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - token of Analytics configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">moduleName</emphasis>.@Name - Name of the analytics module to be deleted
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">moduleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores analytics module if it was canged at step <xref linkend="tc.ANALYTICS-4-1-7.SelectModule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">ModifyAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-4-1-8 -->
      <section xml:id="tc.ANALYTICS-4-1-8" xreflabel="ANALYTICS-4-1-8 (see Section 5.4.8)">
        <title>MODIFY ANALYTICS MODULES (PARAMETERS WITHOUT OPTIONS)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-4-1-8
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> ModifyAnalyticsModules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> ModifyAnalyticsModules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modification of analytics module's parameters that do not have corresponding options using ModifyAnalyticsModules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Analytics Modules is supported by the DUT. Analytics Module Options is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-4-1-8.SelectModuleDescription"
                             xreflabel="3.1">
              <para>
                ONVIF Client selects analytics module description that has parameters without options by following the procedure mentioned in <xref linkend="Annex_HelperSelectAnalyticsModuleDescriptionToModify"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in false - flag shows if parameters of selected Analytics Module have corresponding options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">itemListDescription</emphasis> - list of SimpleItemDescription/ElementItemDescription elements that do not have options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">limit</emphasis> - maximum number of concurrent modules per configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <xref linkend="Annex_HelperSelectAnalyticsModuleDescriptionToModify"/> procedure did not return <emphasis role="italic">analyticsModuleDescription</emphasis>, skip other steps with PASS result.
              </para>
            </listitem>

            <listitem  xml:id="tc.ANALYTICS-4-1-8.SelectModule"
                             xreflabel="5">
              <para>
                ONVIF Client selects or create analytics module with required type by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForModifyModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsModuleDescription</emphasis> - analytics module description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModule1</emphasis> - Analytics Module with required type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                For the first SimpleItemDescription/ElementItemDescription (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">itemListDescription</emphasis>
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="4.5em"?>
                  <listitem xml:id="tc.ANALYTICS-4-1-8.ModifyModule"
                            xreflabel="6.1">
                    <para>
                      ONVIF Client invokes <emphasis role="bold">ModifyAnalyticsModules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].@Name := <emphasis role="italic">analyticsModule1</emphasis>.@Name
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].@Type := <emphasis role="italic">analyticsModule1</emphasis>.@Type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            AnalyticsModule[0].Parameters.SimpleItem/ElementItem[@Name = <emphasis role="italic">itemDescription</emphasis>.@Name].@Value := value of corresponding parameter type with skipped option provided in the tabe in <xref linkend="Annex_HelperSupportedParameterTypes"/>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">ModifyAnalyticsModulesResponse</emphasis> message
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList</emphasis> does not contain AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedAnalyticsModule1</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name from <emphasis role="italic">analyticsModuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedAnalyticsModule1</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-4-1-8.ModifyModule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

                  <listitem>
                    <para>
                      ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration does not contain AnalyticsModule element with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedAnalyticsModule2</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModule1</emphasis>.@Type and with @Name = <emphasis role="italic">analyticsModule1</emphasis>.@Name from <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedAnalyticsModule2</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-4-1-8.ModifyModule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>


                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client deletes analytics module created at step <xref linkend="tc.ANALYTICS-4-1-8.SelectModule"/> if any to restore the DUT by following the procedure mentioned in <xref linkend="Annex_HelperDeleteAnalyticsModule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - token of Analytics configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">moduleName</emphasis>.@Name - Name of the analytics module to be deleted
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">moduleToRestore</emphasis> if any.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client restores analytics module if it was selected at step <xref linkend="tc.ANALYTICS-4-1-8.SelectModule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">ModifyAnalyticsModulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
    </section>
    <!-- Scene Elements -->
    <section xml:id="tc.analytics_engine.scene_elements"
             xreflabel="Section 5.5">
      <title>Scene Elements</title>
      <!-- ANALYTICS-5-1-1 -->
      <section xml:id="tc.ANALYTICS-5-1-1">
        <title>OBJECT CLASSIFICATION METADATA</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Object Class descriptor (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Object Class descriptor.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Object Classification feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Object <emphasis role="italic">object</emphasis> from <emphasis role="italic">analyticsModule</emphasis>.SampleFrame.Object list  repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="4.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">object</emphasis> contains Appearance.Class:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="4.5em"?>
                        <listitem>
                          <para>
                            For each Type in Appearance.Class:
                            <orderedlist numeration="arabic"
                             inheritnum="inherit">
                              <?dbfo label-width="3.5em"?>
                              <listitem xml:id="tc.ANALYTICS-5-1-1.LikelihoodNum"
                                  xreflabel="4.1.1.1">
                                <para>
                                    If Type.@Likelihood &gt; 1, log WARNING message
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            PASS the test.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">Note:</emphasis> At step <xref linkend="tc.ANALYTICS-5-1-1.LikelihoodNum"/> if Appearance.Class.Type element does not contain @Likelihood, the ONVIF Client assumes it as 1.

        </para>

      </section>
      <!-- ANALYTICS-5-1-2 -->
      <section xml:id="tc.ANALYTICS-5-1-2">
        <title>VEHICLE INFORMATION DESCRIPTOR</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Vehicle information descriptor (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Vehicle information descriptor.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Vehicle Info feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule that contains SampleFrame.Object.Appearance with VehicleInfo element, FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!-- ANALYTICS-5-1-3 -->
      <section xml:id="tc.ANALYTICS-5-1-3">
        <title>GEO LOCATION METADATA</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GeoLocation metadata (ONVIF Profile M Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify GeoLocation metadata.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Geo Location feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object. Appearance.GeoLocation element, FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>

      </section>
      <!-- ANALYTICS-5-1-4 -->
      <section xml:id="tc.ANALYTICS-5-1-4">
        <title>HUMAN FACE DESCRIPTOR</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Face descriptor (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Human Face descriptor.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Human Face feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object.Appearance  with HumanFace element, FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!-- ANALYTICS-5-1-5 -->
      <section xml:id="tc.ANALYTICS-5-1-5">
        <title>LICENSE PLATE INFORMATION DESCRIPTOR</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-5
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> License plate information descriptor (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify License Plate Information descriptor.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. License Plate Info feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object.Appearance  with LicensePlateInfo element, FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-5-1-6 -->
      <section xml:id="tc.ANALYTICS-5-1-6">
        <title>HUMAN BODY DESCRIPTOR</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-6
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Human body descriptor (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Human Body descriptor.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Human Body feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object.Appearance  with HumanBody element, FAIL the test and skip other steps.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!-- ANALYTICS-5-1-7 -->
      <section xml:id="tc.ANALYTICS-5-1-7">
        <title>IMAGE DATA</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-5-1-7
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Image Data (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedMetadata (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify Image Data metadata.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Image Sending feature is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of supported metadata by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedMetadata"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsModuleList</emphasis> - Analytics Module List with Metadata Info
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If the DUT supports Local Storage Image Sending Type feature or Remote Storage Image Sending Type feature:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object. Appearance.ImageRef element, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If the DUT supports Embedded Image Sending Type feature:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsModuleList</emphasis> does not contain at least one AnalyticsModule with SampleFrame.Object. Appearance.Image element, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                None.
              </para>
            </listitem>

          </itemizedlist>
        </para>

      </section>
    </section>
    <!-- Rules -->
    <section xml:id="tc.analytics_engine.rules"
             xreflabel="Section 5.6">
      <title>Rules</title>
      <!-- ANALYTICS-6-1-1 -->
      <section xml:id="tc.ANALYTICS-6-1-1"
               xreflabel="ANALYTICS-6-1-1 (see Section 5.6.1)">
        <title>GET SUPPORTED RULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetSupportedRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetSupportedRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting supported rules using GetSupportedRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rule Engine is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains at least two RuleDescription items with the same @Name value, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Rule Description <emphasis role="italic">ruleDescription</emphasis> in <emphasis role="italic">supportedRules</emphasis>.RuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleDescription</emphasis> does not have maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">ruleDescription</emphasis>.Parameters list (SimpleItemDescription or ElementItemDescription item) has the same Name value with other item from the same list, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">ruleDescription</emphasis>.Messages list (Source, or Key, or Data; SimpleItemDescription or ElementItemDescription item) has the same Name value with other item from the same list, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleDescription</emphasis>.ParentTopic is not valid topic (see <xref linkend="Annex_HelperTopicCheck"/>), FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleDescription</emphasis>.fixed = true:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">analyticsConf</emphasis> does not contain at least one RuleEngineConfiguration.Rule with Type = <emphasis role="italic">ruleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-6-1-2 -->
      <section xml:id="tc.ANALYTICS-6-1-2"
               xreflabel="ANALYTICS-6-1-2 (see Section 5.6.2)">
        <title>GET RULE OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetRuleOptions (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetRuleOptions (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting rule options using GetRuleOptions request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rule Engine is supported by the DUT. Rule Options is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleType is skipped
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleOptions list =: <emphasis role="italic">ruleOptionsFullList</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If at least one item in <emphasis role="italic">ruleOptionsFullList</emphasis> list contains AnalyticsModule, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Rule Description <emphasis role="italic">ruleDescription</emphasis> in <emphasis role="italic">supportedRules</emphasis>.RuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  RuleType := <emphasis role="italic">ruleDescription</emphasis>.Name
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                            <itemizedlist>
                              <listitem>
                                <para>
                                  RuleOptions list =: <emphasis role="italic">ruleOptionsList</emphasis>
                                </para>
                              </listitem>
                            </itemizedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">ruleOptionsList</emphasis> list contains AnalyticsModule, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If at least one item in <emphasis role="italic">ruleOptionsList</emphasis> list contains RuleType which is not equal to <emphasis role="italic">ruleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                        <listitem xml:id="tc.ANALYTICS-6-1-3.CompareFullListWithSpecificList" xreflabel="4.6.5">
                          <para>
                            If <emphasis role="italic">ruleOptionsFullList</emphasis> list does not contain all items from <emphasis role="italic">ruleOptionsList</emphasis> list (see NOTE at the end of the test case), FAIL the test, restore the DUT state, and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">NOTE:</emphasis> At step <xref linkend="tc.ANALYTICS-6-1-3.CompareFullListWithSpecificList"/> RuleType and Name to be used as unique identifier.
          If RuleType is skipped in full list, the ONVIF Client assumes that this option is compatible with each supported RuleType that supports parameter with such Name.
        </para>
      </section>
      <!-- ANALYTICS-6-1-3 -->
      <section xml:id="tc.ANALYTICS-6-1-3"
               xreflabel="ANALYTICS-6-1-3 (see Section 5.6.3)">
        <title>GET RULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> GetRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> GetRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify getting rules using GetRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rule Engine is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            Rule list =: <emphasis role="italic">ruleList</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If at least one item in <emphasis role="italic">ruleList</emphasis> list contains Type which in not equal to Name fileld of at least one item at <emphasis role="italic">supportedRules</emphasis>.RuleDescription list, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      For each Rule Description <emphasis role="italic">ruleDescription</emphasis> in <emphasis role="italic">supportedRules</emphasis>.RuleDescription list repeat the following steps:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleDescription</emphasis>.fixed = true:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">ruleList</emphasis> does not contain item with Type = <emphasis role="italic">ruleDescription</emphasis>.Name, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleList</emphasis> contains item with Type = <emphasis role="italic">ruleDescription</emphasis>.Name:
                            <orderedlist numeration="arabic"
                                         inheritnum="inherit">
                              <?dbfo label-width="5.5em"?>
                              <listitem>
                                <para>
                                  Set <emphasis role="italic">rule</emphasis> := <emphasis role="italic">ruleList</emphasis>[Type = <emphasis role="italic">ruleDescription</emphasis>.Name].
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem contains at least one SimpleItem which does not have item with the same Name in <emphasis role="italic">ruleDescription</emphasis>.Parameters.SimpleItemDescription list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">rule</emphasis>.Parameters.ElementItem contains at least one ElementItem which does not have item with the same Name in <emphasis role="italic">ruleDescription</emphasis>.Parameters.ElementItemDescription list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <!--<listitem>
                                <para>
                                  If <emphasis role="italic">ruleDescription</emphasis>.Parameters.SimpleItemDescription contains at least one SimpleItemDescription which does not have item with the same Name in <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">ruleDescription</emphasis>.Parameters.ElementItemDescription contains at least one ElementItemDescription which does not have item with the same Name in <emphasis role="italic">rule</emphasis>.Parameters.ElementItem list, FAIL the test, restore the DUT state, and skip other steps.
                                </para>
                              </listitem>-->
                            </orderedlist>
                          </para>
                        </listitem>

                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> messages.
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">GetRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-6-1-4 -->
      <section xml:id="tc.ANALYTICS-6-1-4"
               xreflabel="ANALYTICS-6-1-4 (see Section 5.6.4)">
        <title>CREATE RULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> CreateRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> CreateRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify rule creation with empty parameters list using CreateRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rule Engine is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-6-1-4.ProfilePreparation">
              <para>
                ONVIF Client configures device for adding of new rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - indication of non-fixed Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skip other steps with PASS result, restore the DUT state.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := <emphasis role="italic">ruleDescription</emphasis>.@Name
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].Parameters := empty Parameters element
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis> message
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a set of rules assigned to Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleList</emphasis> - rule list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleList</emphasis> does not contain Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">createdRule1</emphasis> := Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">ruleList</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                For each SimpleItem element <emphasis role="italic">simpleItem</emphasis> in <emphasis role="italic">createdRule1</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedRule</emphasis>.RuleDescription[0].Parameters does not contain at least one SimpleItemDescription with @Name = <emphasis role="italic">simpleItem</emphasis>.@Name, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each ElementItem element <emphasis role="italic">elementItem</emphasis> in <emphasis role="italic">createdRule1</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedRule</emphasis>.RuleDescription[0].Parameters does not contain at least one ElementItemDescription with @Name = <emphasis role="italic">elementItem</emphasis>.@Name, FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].RuleEngineConfiguration does not contain Rule element with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">createdRule2</emphasis> := Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">analyticsConf</emphasis>[0].RuleEngineConfiguration.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-6-1-4.CompareSimpleItem"
                      xreflabel="22">
              <para>
                If list of SimpleItem.@Name in <emphasis role="italic">createdRule2</emphasis> does not equal to list of SimpleItem.@Name in <emphasis role="italic">createdRule1</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each SimpleItem element <emphasis role="italic">simpleItem</emphasis> in <emphasis role="italic">createdRule2</emphasis>.Parameters repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem xml:id="tc.ANALYTICS-6-1-4.CompareSimpleItemValues"
                            xreflabel="23.1">
                    <para>
                      If <emphasis role="italic">simpleItem</emphasis>.@Value != @Value of corresponding SimpleItem in <emphasis role="italic">createdRule1</emphasis> (@Name will be used as key), FAIL the test, restore the DUT state, and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If list of ElementItem.@Name in <emphasis role="italic">createdRule2</emphasis> does not equal to list of ElementItem.@Name in <emphasis role="italic">createdRule1</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-6-1-5 -->
      <section xml:id="tc.ANALYTICS-6-1-5"
               xreflabel="ANALYTICS-6-1-5 (see Section 5.6.5)">
        <title>DELETE RULES</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-5
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> DeleteRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> DeleteRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify rule deletion using DeleteRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rule Engine is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client configures device for adding of new rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - indication of non-fixed Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skip other steps with PASS result, restore the DUT state.
              </para>
            </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem xml:id="tc.ANALYTICS-6-1-5.CreateRule">
              <para>
                ONVIF Client creates new rule by following the procedure mentioned in <xref linkend="Annex_HelperCreateRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleName</emphasis> - rule name
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleDescription</emphasis>.@Name - rule type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis> message
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a set of rules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleList</emphasis>  - rule list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleList</emphasis> contains Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConf</emphasis>[0].RuleEngineConfiguration contains Rule element with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">DeleteRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-6-1-6 -->
      <section xml:id="tc.ANALYTICS-6-1-6">
        <title>MODIFY RULES (PARAMETERS WITH OPTIONS)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-6
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> ModifyRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> ModifyRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modification of rule's parameters that have corresponding options using ModifyRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rules is supported by the DUT. Rule Options is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-6-1-6.SelectRuleDescription"
                             xreflabel="3.1">
              <para>
                ONVIF Client selects rule description that has parameters with options by following the procedure mentioned in <xref linkend="Annex_HelperSelectRuleDescriptionToModify"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in true - flag shows if parameters of selected Rule have corresponding options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">ruleDescription</emphasis> - rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">itemListDescription</emphasis> - list of SimpleItemDescription/ElementItemDescription elements that have options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">limit</emphasis> - maximum number of concurrent rules per configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <xref linkend="Annex_HelperSelectRuleDescriptionToModify"/> procedure did not return <emphasis role="italic">ruleDescription</emphasis>, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-6-1-6.SelectRule"
                             xreflabel="5">
              <para>
                ONVIF Client selects or create rule with required type by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForModifyRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleDescription</emphasis> - rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">rule1</emphasis> - Rule with required type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For the first SimpleItemDescription/ElementItemDescription (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">itemListDescription</emphasis>
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="4.5em"?>
                  <listitem xml:id="tc.ANALYTICS-6-1-6.ModifyRule"
                            xreflabel="6.1">
                    <para>
                      ONVIF Client invokes <emphasis role="bold">ModifyRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Name := <emphasis role="italic">rule1</emphasis>.@Name
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Type := <emphasis role="italic">rule1</emphasis>.@Type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem/ElementItem[@Name = <emphasis role="italic">itemDescription</emphasis>.@Name].@Value := value of corresponding parameter type with option provided in the tabe in <xref linkend="Annex_HelperSupportedParameterTypes"/>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">ModifyRulesResponse</emphasis> message
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a set of rules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">ruleList</emphasis>  - rule list
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleList</emphasis> does not contain Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedRule1</emphasis> := Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name from <emphasis role="italic">ruleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedRule1</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-6-1-6.ModifyRule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

                  <listitem>
                    <para>
                      ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration does not contain Rule element with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedRule2</emphasis> := Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name from <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedRule2</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-6-1-6.ModifyRule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>


                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client deletes rule created at step <xref linkend="tc.ANALYTICS-6-1-6.SelectRule"/> if any to restore the DUT by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - token of Analytics configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleName</emphasis>.@Name - Name of the rule to be deleted
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">ruleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores rule if it was canged at step <xref linkend="tc.ANALYTICS-6-1-6.SelectRule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">ModifyRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>
      <!-- ANALYTICS-6-1-7 -->
      <section xml:id="tc.ANALYTICS-6-1-7">
        <title>MODIFY RULES (PARAMETERS WITHOUT OPTIONS)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-6-1-7
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> ModifyRules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature under test:</emphasis> ModifyRules (Analytics)
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modification of rule's parameters that do not have corresponding options using ModifyRules request.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service was received from the DUT. Media2 Service was received from the DUT. Rules is supported by the DUT. Rule Options is supported by the DUT. Profile M is supported.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-6-1-7.SelectRuleDescription"
                             xreflabel="3.1">
              <para>
                ONVIF Client selects rule description that has parameters without options by following the procedure mentioned in <xref linkend="Annex_HelperSelectRuleDescriptionToModify"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in false - flag shows if parameters of selected Rule have corresponding options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">ruleDescription</emphasis> - rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">itemListDescription</emphasis> - list of SimpleItemDescription/ElementItemDescription elements that do not have options
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out (optional) <emphasis role="italic">limit</emphasis> - maximum number of concurrent rules per configuration
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <xref linkend="Annex_HelperSelectRuleDescriptionToModify"/> procedure did not return <emphasis role="italic">ruleDescription</emphasis>, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem  xml:id="tc.ANALYTICS-6-1-7.SelectRule"
                             xreflabel="5">
              <para>
                ONVIF Client selects or create rule with required type by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForModifyRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleDescription</emphasis> - rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">rule1</emphasis> - Rule with required type
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For the first SimpleItemDescription/ElementItemDescription (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">itemListDescription</emphasis>
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="4.5em"?>
                  <listitem xml:id="tc.ANALYTICS-6-1-7.ModifyRule"
                            xreflabel="6.1">
                    <para>
                      ONVIF Client invokes <emphasis role="bold">ModifyRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Name := <emphasis role="italic">rule1</emphasis>.@Name
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].@Type := <emphasis role="italic">rule1</emphasis>.@Type
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem/ElementItem[@Name = <emphasis role="italic">itemDescription</emphasis>.@Name].@Value := value of corresponding parameter type with skipped option provided in the tabe in <xref linkend="Annex_HelperSupportedParameterTypes"/>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">ModifyRulesResponse</emphasis> message
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a set of rules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">ruleList</emphasis>  - rule list
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleList</emphasis> does not contain Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedRule1</emphasis> := Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name from <emphasis role="italic">ruleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedRule1</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-6-1-7.ModifyRule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

                  <listitem>
                    <para>
                      ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">analyticsConf</emphasis> - analytics configuration
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration does not contain Rule element with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name, FAIL the test.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">modifiedRule2</emphasis> := Rule with @Type = <emphasis role="italic">rule1</emphasis>.@Type and with @Name = <emphasis role="italic">rule1</emphasis>.@Name from <emphasis role="italic">analyticsConf</emphasis>[0].AnalyticsEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">modifiedRule2</emphasis>.Parameters does not contain SimpleItem/ElementItem with Name = <emphasis role="italic">itemDescription</emphasis>.@Name and with value set at step <xref linkend="tc.ANALYTICS-6-1-7.ModifyRule"/>, FAIL the test and skip other steps.
                    </para>
                  </listitem>


                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client deletes rule created at step <xref linkend="tc.ANALYTICS-6-1-7.SelectRule"/> if any to restore the DUT by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - token of Analytics configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">ruleName</emphasis>.@Name - Name of the rule to be deleted
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retores <emphasis role="italic">ruleToRestore</emphasis> if any.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores rule if it was canged at step <xref linkend="tc.ANALYTICS-6-1-7.SelectRule"/>.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                The DUT did not send <emphasis role="bold">ModifyRulesResponse</emphasis> messages.
              </para>
            </listitem>
          </itemizedlist>
        </para>
      </section>

    </section>
    <!--Face Recognition Rule-->
    <section xml:id="tc.analytics_engine.face_recognition_rule"
             xreflabel="Section 5.7">
      <title>Face Recognition Rule</title>
      <!--ANALYTICS-7-1-1-->
      <section xml:id="tc.ANALYTICS-7-1-1">
        <title>GET SUPPORTED RULES (FACE RECOGNITION)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-7-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Supported rules (ONVIF Analytics Service Spec), Recognition rule engines (ONVIF Analytics Service Spec), Face Recognition (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetSupportedRules, RuleDescription for tt:FaceRecognition
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify that device includes tt:FaceRecognition in GetSupportedRulesResponse. To verify structure of Face Recognition.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities. Face Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-7-1-1.4.2"
                          xreflabel="4.2">
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains RuleDescription element (<emphasis role="italic">faceRecognitionRuleDescription</emphasis>) with Name value is equal to <emphasis role="bold">tt:FaceRecognition</emphasis>:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis> does not have maxInstances attribute, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "IncludeImage" and its @Type value != xs:string, FAIL the test and skip other steps.
                          </para>
                        </listitem>

                        <listitem xml:id="tc.ANALYTICS-7-1-1.MessageVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
                        
                          
                            
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis> does not have Messages.Data.SimpleItemDescription element with @Name = "Likelihood", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If @Type != "xs:float" for <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data.SimpleItemDescription with @Name = "Likelihood", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "Label" and its @Type value != xs:string, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "ImageUri" and its @Type value != xs:anyURI, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "EnrollmentID" and its @Type value != xs:string, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "RefImageUri" and its @Type value != xs:anyURI, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "Image" and its @Type value != xs:base64Binary, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">faceRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "BoundingBox" and its @Type value != tt:Rectangle, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Messages.ParentTopic value is not equal to "tns1:RuleEngine/Recognition/Face" for Messages with Source.SimpleItemDescription.@Name = VideoSource, and with Source.SimpleItemDescription.@Name = Rule, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If there was no RuleDescription element with Name value is equal to <emphasis role="bold">tt:FaceRecognition</emphasis> in at least one <emphasis role="italic">supportedRules</emphasis> at step <xref linkend="tc.ANALYTICS-7-1-1.4.2"/>, FAIL the test.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-7-1-2-->
      <section xml:id="tc.ANALYTICS-7-1-2">
        <title>GET FACE RECOGNITION RULE OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-7-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Recognition rule engines (ONVIF Analytics Service Spec),
          Face Recognition (ONVIF Analytics Service Spec), Configuration options (ONVIF Analytics Service Spec).
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetRuleOptions, Face Recognition Rule Options
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify retrieving of Face Recognition Options by GetRuleOptions operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities, Rule Options is supported by the Device as indicated by the RuleOptionsSupported capabilities. Face Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:FaceRecognition type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:FaceRecognition</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations with supporting of Face Recognition
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration (<emphasis role="italic">analyticsConf</emphasis>) in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleType := tt:FaceRecognition
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleOptions  list =: <emphasis role="italic">ruleOptionsList</emphasis>
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>
                  <!--<listitem>
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains at least one RuleDescription element with Name = tt:FaceRecognition and it has Parameters.SimpleItemDescription with Name="IncludeImage"
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = <emphasis role="bold">IncludeImage</emphasis>, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>-->
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">IncludeImage</emphasis> (<emphasis role="italic">includeImageOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">includeImageOption</emphasis> contains @RuleType and @RuleType != "tt:FaceRecognition", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If <emphasis role="italic">includeImageOption</emphasis> does not contain <emphasis role="bold">StringItems</emphasis> element or <emphasis role="bold">StringList</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>

                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-7-1-3-->
      <!--<section xml:id="tc.ANALYTICS-7-1-3">
        <title>CREATE FACE RECOGNITION RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-7-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Create Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Create Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify adding of Face Recognition Rule to an AnalyticsConfiguration by CreateRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the DUT as indicated by the RuleSupport capabilities. Face Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem xml:id="tc.ANALYTICS-7-1-3.ProfilePreparation">
              <para>
                ONVIF Client configures device for adding of new Face Recognition rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:FaceRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed FaceRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skipp other steps with PASS result.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client sets <emphasis role="italic">includeImageValue</emphasis> := "".
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>           
            
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-7-1-3.10">
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:FaceRecognition
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                      <itemizedlist>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleDescription</emphasis> does not contain Parameters.SimpleItemDescription with Name="IncludeImage"
                      <itemizedlist>
                        <listitem>
                          <para>
                            Rule[0].Parameters := empty Parameters element
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:FaceRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:FaceRecognition from <emphasis role="italic">updatedRuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - analytics configuration list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration does not contain Rule element with @Type = tt:FaceRecognition and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Type = tt:FaceRecognition and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConf</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> contains Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:FaceRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>


      </section>-->
      <!--ANALYTICS-7-1-4-->
      <!--<section xml:id="tc.ANALYTICS-7-1-4">
        <title>MODIFY FACE RECOGNITION RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-7-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Modify Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Modify Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modifying of Face Recognition Rule by ModifyRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capability. Rule Options is supported by the Device as indicated by the RuleOptionsSupported capability.
          Face Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem xml:id="tc.ANALYTICS-7-1-4.ProfilePreparation">
              <para>
                ONVIF Client configures device for adding of new Face Recognition rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:FaceRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed FaceRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> does not contain Parameters.SimpleItemDescription with Name="IncludeImage", skip other steps with PASS result.                
              </para>
            </listitem>           
            <listitem>
                    <para>
                      ONVIF Client sets <emphasis role="italic">includeImageValue</emphasis> := "".
                    </para>
                  </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-7-1-4.10">
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:FaceRecognition
                    </para>
                  </listitem>
                  <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>                  
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves Rule Options of tt:FaceRecognition type by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:FaceRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleOptionsList</emphasis> - Rule Options
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = "IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client selects value from rule options for IncludeImage string parameter type by following the procedure mentioned in <xref linkend="Annex_HelperSelectValueForRuleStringParameterType"/> with the following input and output parameters
                      <itemizedlist>

                        <listitem>
                          <para>
                            in <emphasis role="italic">ruleOption</emphasis> - the first RuleOption item with @Name = "IncludeImage" from <emphasis role="italic">ruleOptionsList</emphasis>.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">includeImageValue</emphasis> - value for string parameter type
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = "IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                          <para>
                            Set <emphasis role="italic">includeImageValue</emphasis> := "Embedded".
                          </para>
                        </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-7-1-4.11"
                    xreflabel="11">
                ONVIF Client invokes <emphasis role="bold">ModifyRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:FaceRecognition
                    </para>
                  </listitem>
                  
                  <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">ModifyRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:FaceRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:FaceRecognition from <emphasis role="italic">updatedRuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - analytics configuration list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration does not contain Rule element with @Type = tt:FaceRecognition and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test.
              </para>
            </listitem>

            <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Type = tt:FaceRecognition and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">ModifyRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>


          </itemizedlist>
        </para>

      </section>-->

    </section>
    <!--License Plate Recognition Rule-->
    <section xml:id="tc.analytics_engine.license_plate_recognition_rule"
             xreflabel="Section 5.8">
      <title>License Plate Recognition Rule</title>
      <!--ANALYTICS-8-1-1-->
      <section xml:id="tc.ANALYTICS-8-1-1">
        <title>GET SUPPORTED RULES (LICENSE PLATE RECOGNITION)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-8-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Supported rules (ONVIF Analytics Service Spec), Recognition rule engines (ONVIF Analytics Service Spec), License Plate Recognition (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetSupportedRules, RuleDescription for tt:LicensePlateRecognition
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify that device includes tt:LicensePlateRecognition in GetSupportedRulesResponse. To verify structure of License Plate Recognition.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities. License Plate Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-8-1-1.4.2"
                          xreflabel="4.2">
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="tc.ANALYTICS-8-1-1.4.3"
                          xreflabel="4.3">
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains RuleDescription element (<emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>) with Name value is equal to <emphasis role="bold">tt:LicensePlateRecognition</emphasis>:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis> does not have maxInstances attribute, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Parameters of <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                       inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "IncludeImage" and its @Type value != xs:string, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "PlateLocation" and its @Type value != xs:string, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Parameters has ElementItemDescription element with @Name = "Region" and its @Type value != tt:Polygon, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Parameters has ElementItemDescription element with @Name = "SnapLine" and its @Type value != tt:Polyline, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Messages.Source of <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                     inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                                                 <listitem xml:id="tc.ANALYTICS-8-1-1.MessageVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Messages.Data of <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                     inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis> does not have Messages.Data.SimpleItemDescription element with @Name = "Likelihood", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If @Type != "xs:float" for <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data.SimpleItemDescription with @Name = "Likelihood", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "Label" and its @Type value != xs:string, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "ImageUri" and its @Type value != xs:anyURI, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has SimpleItemDescription element with @Name = "VehicleImageURI" and its @Type value != xs:anyURI, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "BoundingBox" and its @Type value != tt:Rectangle, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "Image" and its @Type value != xs:base64Binary, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis> does not have Messages.Data.ElementItemDescription element with @Name = "LicensePlateInfo", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If @Type != "tt:LicensePlateInfo" for <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data.ElementItemDescription with @Name = "LicensePlateInfo", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "VehicleInfo" and its @Type value != tt:VehicleInfo, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">licensePlateRecognitionRuleDescription</emphasis>.Messages.Data has ElementItemDescription element with @Name = "VehicleImage" and its @Type value != xs:base64Binary, FAIL the test and skip other steps.
                                </para>
                              </listitem>                            
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Messages.ParentTopic value is not equal to "tns1:RuleEngine/Recognition/LicensePlate" for Messages with Source.SimpleItemDescription.@Name = VideoSource, and with Source.SimpleItemDescription.@Name = Rule, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If there was no RuleDescription element with Name value is equal to <emphasis role="bold">tt:LicensePlateRecognition</emphasis> for at least one <emphasis role="italic">supportedRules</emphasis> at step <xref linkend="tc.ANALYTICS-8-1-1.4.3"/>, FAIL the test.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-8-1-2-->
      <section xml:id="tc.ANALYTICS-8-1-2">
        <title>GET LICENSE PLATE RECOGNITION RULE OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-8-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Recognition rule engines (ONVIF Analytics Service Spec),
          License Plate Recognition (ONVIF Analytics Service Spec), Configuration options (ONVIF Analytics Service Spec).
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetRuleOptions, MotionRegionConfigOptions
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify retrieving of License Plate Recognition Options by GetRuleOptions operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities, Rule Options is supported by the Device as indicated by the RuleOptionsSupported capabilities. License Plate Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:LicensePlateRecognition type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:LicensePlateRecognition</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations with supporting of License Plate Recognition
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration (<emphasis role="italic">analyticsConf</emphasis>) in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleType := tt:LicensePlateRecognition
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleOptions  list =: <emphasis role="italic">ruleOptionsList</emphasis>
                          </para>
                        </listitem>

                      </itemizedlist>
                    </para>
                  </listitem>                  
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">IncludeImage</emphasis> (<emphasis role="italic">includeImageOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>                        
                        <listitem>
                          <para>
                            If <emphasis role="italic">includeImageOption</emphasis> does not contain <emphasis role="bold">StringItems</emphasis> element or <emphasis role="bold">StringList</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">PlateLocation</emphasis> (<emphasis role="italic">plateLocationOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">plateLocationOption</emphasis> does not contain <emphasis role="bold">StringItems</emphasis> element or <emphasis role="bold">StringList</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">Region</emphasis> (<emphasis role="italic">regionOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">regionOption</emphasis> does not contain <emphasis role="bold">tt:PolygonOptions</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">SnapLine</emphasis> (<emphasis role="italic">snapLineOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">snapLineOption</emphasis> does not contain <emphasis role="bold">tt:IntRange</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>

                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-8-1-3-->
      <!--<section xml:id="tc.ANALYTICS-8-1-3">
        <title>CREATE LICENSE PLATE RECOGNITION RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-8-1-3
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Create Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Create Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify adding of License Plate Recognition Rule to an AnalyticsConfiguration by CreateRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the DUT as indicated by the RuleSupport capabilities. License Plate Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem xml:id="tc.ANALYTICS-8-1-3.ProfilePreparation">
              <para>
                ONVIF Client configures device for adding of new License Plate Recognition rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:LicensePlateRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed LicensePlateRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skipp other steps with PASS result.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client sets <emphasis role="italic">includeImageValue</emphasis> := "".
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>           
            
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-8-1-3.10">
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:LicensePlateRecognition
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                      <itemizedlist>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleDescription</emphasis> does not contain Parameters.SimpleItemDescription with Name="IncludeImage"
                      <itemizedlist>
                        <listitem>
                          <para>
                            Rule[0].Parameters := empty Parameters element
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:LicensePlateRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:LicensePlateRecognition from <emphasis role="italic">updatedRuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - analytics configuration list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration does not contain Rule element with @Type = tt:LicensePlateRecognition and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test.
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> contains Parameters.SimpleItemDescription with Name="IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="3.5em"?>
                  <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Type = tt:LicensePlateRecognition and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsConf</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> contains Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:LicensePlateRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>


      </section>-->
      <!--ANALYTICS-8-1-4-->
      <!--<section xml:id="tc.ANALYTICS-8-1-4">
        <title>MODIFY LICENSE PLATE RECOGNITION RULE</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-8-1-4
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec), Modify Rules (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> Modify Rules
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify modifying of License Plate Recognition Rule by ModifyRules operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capability. Rule Options is supported by the Device as indicated by the RuleOptionsSupported capability.
          License Plate Recognition Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>

            <listitem xml:id="tc.ANALYTICS-8-1-4.ProfilePreparation">
              <para>
                ONVIF Client configures device for adding of new License Plate Recognition rule by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:LicensePlateRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed LicensePlateRecognition Rule support
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleDescription</emphasis> - a rule description
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>

            <listitem>
              <para>
                If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, skip other steps with PASS result.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleDescription</emphasis> does not contain Parameters.SimpleItemDescription with Name="IncludeImage", skip other steps with PASS result.                
              </para>
            </listitem>           
            <listitem>
                    <para>
                      ONVIF Client sets <emphasis role="italic">includeImageValue</emphasis> := "".
                    </para>
                  </listitem>
            <listitem>
              <para>
                Set <emphasis role="italic">ruleName</emphasis> := generated random string.
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-8-1-4.10">
                ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:LicensePlateRecognition
                    </para>
                  </listitem>
                  <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>                  
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves Rule Options of tt:LicensePlateRecognition type by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in "tt:LicensePlateRecognition" - Rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">ruleOptionsList</emphasis> - Rule Options
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = "IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client selects value from rule options for IncludeImage string parameter type by following the procedure mentioned in <xref linkend="Annex_HelperSelectValueForRuleStringParameterType"/> with the following input and output parameters
                      <itemizedlist>

                        <listitem>
                          <para>
                            in <emphasis role="italic">ruleOption</emphasis> - the first RuleOption item with @Name = "IncludeImage" from <emphasis role="italic">ruleOptionsList</emphasis>.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">includeImageValue</emphasis> - value for string parameter type
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">ruleOptionsList</emphasis> does not contain RuleOption with @Name = "IncludeImage"
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                          <para>
                            Set <emphasis role="italic">includeImageValue</emphasis> := "Embedded".
                          </para>
                        </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para xml:id="tc.ANALYTICS-8-1-4.11"
                    xreflabel="11">
                ONVIF Client invokes <emphasis role="bold">ModifyRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      Rule[0].@Type := tt:LicensePlateRecognition
                    </para>
                  </listitem>
                  
                  <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Name := "IncludeImage"
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            Rule[0].Parameters.SimpleItem[0].@Value :=  <emphasis role="italic">includeImageValue</emphasis>
                          </para>
                        </listitem>

                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">ModifyRulesResponse</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves updated Rule list by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">updatedRuleList</emphasis> - Rule list.
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">updatedRuleList</emphasis> does not contain Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:LicensePlateRecognition, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Name = <emphasis role="italic">ruleName</emphasis> and with Type = tt:LicensePlateRecognition from <emphasis role="italic">updatedRuleList</emphasis>.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

            <listitem>
              <para>
                ONVIF Client retrieves an Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfiguration"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - analytics configuration list
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].@token != <emphasis role="italic">analyticsToken</emphasis>, FAIL the test.
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration does not contain Rule element with @Type = tt:LicensePlateRecognition and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test.
              </para>
            </listitem>

            <listitem>
                    <para>
                      Set <emphasis role="italic">rule</emphasis> := Rule with @Type = tt:LicensePlateRecognition and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">analyticsConfList</emphasis>[0].RuleEngineConfiguration.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">rule</emphasis>.Parameters does not contain SimpleItem with @Name = "IncludeImage", FAIL the test and skip other steps.
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If @Value of <emphasis role="italic">rule</emphasis>.Parameters.SimpleItem with @Name = "IncludeImage" != <emphasis role="italic">includeImageValue</emphasis>, FAIL the test and skip other steps.
                    </para>
                  </listitem>

            <listitem>
              <para>
                ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      RuleName := <emphasis role="italic">ruleName</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
              </para>
            </listitem>

            <listitem>
              <para>
                ONVIF Client restores the DUT state.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">ModifyRulesResponse</emphasis> message.
              </para>
            </listitem>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">DeleteRules</emphasis> message.
              </para>
            </listitem>


          </itemizedlist>
        </para>

      </section>-->

    </section>
    <!--Line crossing counter-->
    <section xml:id="tc.analytics_engine.line_counting_rule"
             xreflabel="Section 5.8">
      <title>Line Crossing Counting Rule</title>
      <!--ANALYTICS-9-1-1-->
      <section xml:id="tc.ANALYTICS-9-1-1">
        <title>GET SUPPORTED RULES (LINE CROSSING COUNTER)</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-9-1-1
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Supported rules (ONVIF Analytics Service Spec), Line crossing counting rule (ONVIF Analytics Service Spec)
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetSupportedRules, RuleDescription for tt:LineCounting
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify that device includes tt:LineCounting in GetSupportedRulesResponse. To verify structure of Line crossing counting.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities. Line crossing counting Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para xml:id="tc.ANALYTICS-9-1-1.4.2"
                          xreflabel="4.2">
                      DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem xml:id="tc.ANALYTICS-9-1-1.4.3"
                          xreflabel="4.3">
                    <para>
                      If <emphasis role="italic">supportedRules</emphasis> contains RuleDescription element (<emphasis role="italic">lineCountingRuleDescription</emphasis>) with Name value is equal to <emphasis role="bold">tt:LineCounting</emphasis>:
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">lineCountingRuleDescription</emphasis> does not have maxInstances attribute, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Parameters of <emphasis role="italic">lineCountingRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                       inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "ReportTimeInterval" and its @Type value != xs:duration, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "ResetTime" and its @Type value != xs:time, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "Direction" and its @Type value != tt:Direction, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis>.Parameters has SimpleItemDescription element with @Name = "PassAllPolylines" and its @Type value != xs:boolean, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis>.Parameters does not have ElementItemDescription element with @Name = "Segments", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If Type value of ElementItemDescription element with @Name = "Segments" is not equal to tt:Polyline, FAIL the test and skip other steps.
                                </para>
                              </listitem>                              
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Messages.IsProperty != "true", FAIL the test and skip other steps.
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Messages.Source of <emphasis role="italic">lineCountingRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                     inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem xml:id="tc.ANALYTICS-9-1-1.MessageVerification">
              <para>
                ONVIF Client verifies rule engine message format by following the procedure mentioned in <xref linkend="Annex_HelperRuleEngineMessageFormatVerification"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="italic">lineCountingRuleDescription</emphasis>.Messages - message description to be verified
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ONVIF Client checks set of items inside Messages.Data of <emphasis role="italic">lineCountingRuleDescription</emphasis>:
                            <orderedlist numeration="arabic"
                                     inheritnum="inherit">
                              <?dbfo label-width="4.5em"?>
                              <listitem>
                                <para>
                                  If <emphasis role="italic">lineCountingRuleDescription</emphasis> does not have Messages.Data.SimpleItemDescription element with @Name = "Count", FAIL the test and skip other steps.
                                </para>
                              </listitem>
                              <listitem>
                                <para>
                                  If Type value of Messages.Data.SimpleItemDescription element with @Name = "Count" is not equal to xs:int, FAIL the test and skip other steps.
                                </para>
                              </listitem>
                            </orderedlist>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            If Messages.ParentTopic value is not equal to "tns1:RuleEngine/CountAggregation/Counter" for Messages with Source.SimpleItemDescription.@Name = VideoSource, and with Source.SimpleItemDescription.@Name = Rule, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                       
                      </orderedlist>
                    </para>
                  </listitem>
                </orderedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If there was no RuleDescription element with Name value is equal to <emphasis role="bold">tt:LineCounting</emphasis> for at least one <emphasis role="italic">supportedRules</emphasis> at step <xref linkend="tc.ANALYTICS-9-1-1.4.3"/>, FAIL the test.
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
              </para>
            </listitem>
          </itemizedlist>
        </para>


      </section>
      <!--ANALYTICS-9-1-2-->
      <section xml:id="tc.ANALYTICS-9-1-2">
        <title>GET LINE CROSSING COUNTER RULE OPTIONS</title>
        <para>
          <emphasis role="bold">Test Case ID:</emphasis> ANALYTICS-9-1-2
        </para>
        <para>
          <emphasis role="bold">Specification Coverage:</emphasis> Get Rule Options (ONVIF Analytics Service Spec),
          Line crossing counting rule (ONVIF Analytics Service Spec), Configuration options (ONVIF Analytics Service Spec).
        </para>
        <para>
          <emphasis role="bold">Feature Under Test:</emphasis> GetRuleOptions, Line crossing counting rule
        </para>
        <para>
          <emphasis role="bold">WSDL Reference:</emphasis> analytics.wsdl, media2.wsdl
        </para>
        <para>
          <emphasis role="bold">Test Purpose:</emphasis> To verify retrieving of Line crossing counting Options by GetRuleOptions operation.
        </para>
        <para>
          <emphasis role="bold">Pre-Requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT.
          Rule Engine is supported by the Device as indicated by the RuleSupport capabilities, Rule Options is supported by the Device as indicated by the RuleOptionsSupported capabilities. Line crossing counting Rule is supported by the DUT.
        </para>
        <para>
          <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
        </para>
        <para>
          <emphasis role="bold">Test Procedure:</emphasis>
        </para>
        <para>
          <orderedlist>
            <?dbfo label-width="1.5em"?>
            <listitem>
              <para>
                Start an ONVIF Client.
              </para>
            </listitem>
            <listitem>
              <para>
                Start the DUT.
              </para>
            </listitem>
            <listitem>
              <para>
                ONVIF Client retrieves a list of Analytics Configurations that supports tt:LineCounting type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"/> with the following input and output parameters
                <itemizedlist>
                  <listitem>
                    <para>
                      in <emphasis role="bold">tt:LineCounting</emphasis> - rule type
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations with supporting of Line crossing counting
                    </para>
                  </listitem>
                </itemizedlist>
              </para>
            </listitem>
            <listitem>
              <para>
                If <emphasis role="italic">analyticsConfList</emphasis> is empty, FAIL the test and skip other steps.
              </para>
            </listitem>
            <listitem>
              <para>
                For each Analytics Configuration (<emphasis role="italic">analyticsConf</emphasis>) in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
                <orderedlist numeration="arabic"
                             inheritnum="inherit">
                  <?dbfo label-width="2.5em"?>
                  <listitem>
                    <para>
                      ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleType := tt:LineCounting
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
                      <itemizedlist>
                        <listitem>
                          <para>
                            RuleOptions  list =: <emphasis role="italic">ruleOptionsList</emphasis>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">ReportTimeInterval</emphasis> (<emphasis role="italic">reportTimeIntervalOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">reportTimeIntervalOption</emphasis> does not contain <emphasis role="bold">tt:DurationRange</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>                        
                      </orderedlist>
                    </para>
                  </listitem>                  
                  <listitem>
                    <para>
                      If <emphasis role="italic">ruleOptionsList</emphasis> contains RuleOption with @Name = <emphasis role="bold">Segments</emphasis> (<emphasis role="italic">segmentsOption</emphasis>)
                      <orderedlist numeration="arabic"
                                   inheritnum="inherit">
                        <?dbfo label-width="3.5em"?>
                        <listitem>
                          <para>
                            If <emphasis role="italic">segmentsOption</emphasis> does not contain <emphasis role="bold">tt:IntRange</emphasis> element, FAIL the test and skip other steps.
                          </para>
                        </listitem>
                      </orderedlist>
                    </para>
                  </listitem>

                </orderedlist>
              </para>
            </listitem>
          </orderedlist>
        </para>
        <para>
          <emphasis role="bold">Test Result:</emphasis>
        </para>
        <para>
          <emphasis role="bold">PASS –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT passes all assertions.
              </para>
            </listitem>
          </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">FAIL –</emphasis>
          <itemizedlist>
            <listitem>
              <para>
                DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
              </para>
            </listitem>

          </itemizedlist>
        </para>


      </section>    

    </section>
  </chapter>
  <appendix>
    <title>Helper Procedures and Additional Notes</title>
    <!--A.1 Get Analytics Configurations List-->
    <section xml:id="Annex_HelperGetAnalyticsConfigurationsList"
             xreflabel="Annex A.1">
      <title>Get Analytics Configurations List</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfigurationsList
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve Analytics Configurations List.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Configurations list (<emphasis role="italic">analyticsConfList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetAnalyticsConfigurations</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken skipped
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ProfileToken skipped
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Configurations list =: <emphasis role="italic">analyticsConfList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsConfList</emphasis> is empty, FAIL the test.
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.2 Get List of Analytics Configurations With Supporting of Required Rule Type-->
    <section xml:id="Annex_HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList"
             xreflabel="Annex A.2">
      <title>Get List of Analytics Configurations With Supporting of Required Rule Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfigurationSupportsRequiredRuleTypeList
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve full list of Analytics Configuration that supports required rule type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> List of Analytics Configuration that supports rule with type equals to <emphasis role="italic">ruleType</emphasis> (<emphasis role="italic">analyticsConfSupportsRuleTypeList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                        </para>
                      </listitem>

                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">supportedRules</emphasis> contains RuleDescription element with Name value is equal to <emphasis role="italic">ruleType</emphasis>,
                    set <emphasis role="italic">analyticsConfSupportsRuleTypeList</emphasis> := <emphasis role="italic">analyticsConfSupportsRuleTypeList</emphasis> + <emphasis role="italic">analyticsConf</emphasis>.@token
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.3 Get Specific Rule Options-->
    <section xml:id="Annex_HelperGetSpecificRuleOptions"
             xreflabel="Annex A.3">
      <title>Get Specific Rule Options</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetSpecificRuleOptions
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve options of required rule type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics Configuration Token (<emphasis role="italic">analyticsConfToken</emphasis>), Rule Type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Rule Options <emphasis role="italic">ruleOptions</emphasis> of <emphasis role="italic">ruleType</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetRuleOptions</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    RuleType := <emphasis role="italic">ruleType</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetRuleOptionsResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    RuleOptions  list =: <emphasis role="italic">ruleOptionsList</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="bold">ruleOptionsList</emphasis> contains more than one RuleOptions element, FAIL the test abd skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="bold">ruleOptionsList</emphasis> is empty, FAIL the test abd skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleOptions</emphasis> := <emphasis role="bold">ruleOptionsList</emphasis>[0].
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.4 ConfigureMediaProfileWitAnalytics-->
    <section xml:id="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"
             xreflabel="Annex A.4">
      <title>Configure Media Profile with required Analytics Configuration</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperConfigureMediaProfileWithRequiredAnalytics
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to configure Media Profile to contain required Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Analytics is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis>  List of Analytics configurations <emphasis role="italic">analyticsConfList</emphasis>
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Media Profile (<emphasis role="italic">profile</emphasis>) that contains Analytics Configuration from <emphasis role="italic">analyticsConfList</emphasis> and Video Source Configuration.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetProfiles</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Token skipped
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Type[0] := VideoSource
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Type[1] := Analytics
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">GetProfilesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Profiles list =: <emphasis role="italic">profileList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Media Profile <emphasis role="italic">profile1</emphasis> in <emphasis role="italic">profileList</emphasis> with both Configuration.VideoSource and Configuration.Analytics repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    For each Analytics (<emphasis role="italic">analytics</emphasis>) in <emphasis role="italic">analyticsConfList</emphasis>:
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          If <emphasis role="italic">profile1</emphasis>.Configuration.Analytics.@token value is equal to <emphasis role="italic">analytics</emphasis>.@token, set <emphasis role="italic">profile</emphasis> := <emphasis role="italic">profile1</emphasis> and skip other steps in procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>

              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Media Profile <emphasis role="italic">profile1</emphasis> in <emphasis role="italic">profileList</emphasis> that contains VideoSource configuration repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetAnalyticsConfigurations</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken skipped
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ProfileToken := <emphasis role="italic">profile</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    The DUT responds with <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          Configurations list =: <emphasis role="italic">acList</emphasis>
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">acList</emphasis> contains analytics (<emphasis role="italic">analytics</emphasis>) from <emphasis role="italic">analyticsConfList</emphasis> (comparing by analytics token):
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="3.5em"?>
                      <listitem>
                        <para>
                          ONVIF Client invokes <emphasis role="bold">AddConfiguration</emphasis> request with parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                ProfileToken := <emphasis role="italic">profile1</emphasis>.@token
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Name skipped
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Configuration[0].Type := Analytics
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Configuration[0].Token := <emphasis role="italic">analytics</emphasis>.Configurations.@token
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          The DUT responds with <emphasis role="bold">AddConfigurationResponse</emphasis> message.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">profile</emphasis> := <emphasis role="italic">profile1</emphasis> and skip other steps in procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              FAIL the test and skip other steps.
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetProfilesResponse</emphasis> message.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> message.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">AddConfigurationResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.5 Get Rules-->
    <section xml:id="Annex_HelperGetRules"
             xreflabel="Annex A.5">
      <title>Get Rules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetRules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve Rules list for Analytics configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Rule list (<emphasis role="italic">ruleList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := (<emphasis role="italic">analyticsToken</emphasis>)
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">GetRulesResponse</emphasis> with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Rule list =: <emphasis role="italic">ruleList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.6 Create Pull Point Subscription-->
    <section xml:id="Annex_HelperCreatePullPointSubscription"
             xreflabel="Annex A.6">
      <title>Create Pull Point Subscription</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperCreatePullPointSubscription
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to create PullPoint Subscription with specified Topic.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Event Service is received from the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Notification Topic (<emphasis role="italic">topic</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Subscription reference (<emphasis role="italic">s</emphasis>), current time for the DUT (<emphasis role="italic">ct</emphasis>), subscription termination time (<emphasis role="italic">tt</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">CreatePullPointSubscription</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Filter.TopicExpression := <emphasis role="italic">topic</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Filter.TopicExpression.@Dialect := "http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet"
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">CreatePullPointSubscriptionResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    SubscriptionReference =: <emphasis role="italic">s</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    CurrentTime =: <emphasis role="italic">ct</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    TerminationTime =: <emphasis role="italic">tt</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">CreatePullPointSubscriptionResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.7 Delete Subscription-->
    <section xml:id="Annex_HelperDeleteSubscription"
             xreflabel="Annex A.7">
      <title>Delete Subscription</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeleteSubscription
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to delete supscribtion.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Event Service is received from the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Subscription reference (<emphasis role="italic">s</emphasis>)
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client sends an <emphasis role="bold">Unsubscribe</emphasis> to the subscription endpoint s.
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">UnsubscribeResponse</emphasis> message.
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">UnsubscribeResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.8 Calculate Free Space for Rule -->
    <!--maxInstances attribute was changed to mandatory according to service spec. To remove steps with Flag if maxInstances is supported when this part is changed.-->
    <section xml:id="Annex_HelperCalculateFreeSpaceForRule"
             xreflabel="Annex A.8">
      <title>Calculate Free Space for Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> Annex_HelperCalculateFreeSpaceForRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to calculate free space for additional rules with required Rule Type for requested Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics Configuration token <emphasis role="italic">analyticsConfigToken</emphasis>. Required Rule Type <emphasis role="italic">ruleType</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Flag if maxInstances is supported (<emphasis role="italic">maxInstances</emphasis>). Amount of additional rules with requested type that may be added for requested Analytics Configuration (<emphasis role="italic">amountOfAdditionalRules</emphasis>) (optional, returned in case <emphasis role="italic">maxInstances</emphasis> = true).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>


          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">supportedRules</emphasis> does not contain  RuleDescription element with Name value is equal to <emphasis role="italic">ruleType</emphasis>,
              FAIL the test and skip other steps.
            </para>
          </listitem>

          <listitem>
            <para>
              Set <emphasis role="italic">rule</emphasis> := <emphasis role="italic">supportedRules</emphasis>.RuleDescription[0], where RuleDescription[0] is RuleDescription element with Name value is equal to <emphasis role="italic">ruleType</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">rule</emphasis> does not contain maxInstances attribute, set <emphasis role="italic">maxInstances</emphasis> := false, return it in test procedure and skip other annex steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">maxInstances</emphasis> := true.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetRulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Rule list =: <emphasis role="italic">ruleList</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfExistingRules</emphasis> := amount of Rules in <emphasis role="italic">ruleList</emphasis> with Type = <emphasis role="italic">ruleType</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfAdditionalRules</emphasis> := <emphasis role="italic">rule</emphasis>.maxInstances - <emphasis role="italic">amountOfExistingRules</emphasis>.
            </para>
          </listitem>
        </orderedlist>
      </para>

      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.9 Delete Rule with Requested Type -->
    <section xml:id="Annex_HelperDeleteRuleWithRequestedType"
             xreflabel="Annex A.9">
      <title>Delete Rule with Requested Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeleteRuleWithRequestedType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to delete existing Rule with requested type for specified Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>). Rule type to delete (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetRulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Rule list =: <emphasis role="italic">ruleList</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleToDelete</emphasis>  := <emphasis role="italic">ruleList</emphasis>[0], where <emphasis role="italic">ruleList</emphasis>[0] is the first Rule with Type = <emphasis role="italic">ruleType</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := (<emphasis role="italic">analyticsToken</emphasis>)
                  </para>
                </listitem>
                <listitem>
                  <para>
                    RuleName[0] := <emphasis role="italic">ruleToDelete</emphasis>.Name
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">DeleteRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.10 Create Motion Region Detector Rule -->
    <section xml:id="Annex_HelperCreateMotionRegionDetectorRule"
             xreflabel="Annex A.10">
      <title>Create Motion Region Detector Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperCreateMotionRegionDetectorRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to create  Motion Region Detector Rule.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Rule Engine is supported by the Device as indicated by the RuleSupport capabilities.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Options <emphasis role="italic">ruleOptions</emphasis>.
        Analytics Configuration Token (<emphasis role="italic">analyticsToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <!--<listitem>
            <para>
              ONVIF Client calculates free space for adding of new rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperCalculateFreeSpaceForRule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">maxInstances</emphasis> - flag if maxInstances is supported.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">amountOfAdditionalRules</emphasis>  - amount of additional rules.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>-->

          <!--<listitem>
            <para>
              If <emphasis role="italic">amountOfAdditionalRules</emphasis> &gt; 0 or <emphasis role="italic">maxInstances</emphasis>=false, go to step <xref linkend="A.10.4"/>.
            </para>
          </listitem>-->
          <!--<listitem>
            <para>
              ONVIF Client deletes rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRuleWithRequestedType"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>-->

          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].@Name := TestMotionRegion
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].@Type := tt:MotionRegionDetector
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].@Name := "MotionRegion"
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                  </para>
                </listitem>

                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.@Armed := true if <emphasis role="italic">motionRegionConfigOptions</emphasis>.DisarmSupport = true, otherwise skipped.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters.ElementItem[0].MotionRegion.@Sensitivity := 1
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.

            </para>
          </listitem>

          <!--<listitem>
            <para>
              If DUT responded with SOAP fault response:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    If <emphasis role="italic">maxInstances</emphasis> = true, fail the test and skip other steps.
                  </para>
                </listitem>
                <listitem>
                  <para xml:id="tc.ANALYTICS-1-1-4.15.2"
                        xreflabel="15.2">
                    ONVIF Client deletes rule with tt:MotionRegionDetector type by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRuleWithRequestedType"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="bold">tt:MotionRegionDetector</emphasis> - rule type
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token - a token of Analytics Configuration
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].@Name := TestMotionRegion
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].@Type := tt:MotionRegionDetector
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].@Name := "MotionRegion"
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[0].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[1].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[2].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@x := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@x + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@width - 1
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.Polygon.Point[3].@y := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@y + <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.Bounds.@height - 1
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.@Armed := true if <emphasis role="italic">motionRegionConfigOptions</emphasis>.DisarmSupport = true, otherwise skipped.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Rule[0].Parameters.ElementItem[0].MotionRegion.@Sensitivity := 1
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    The DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis>.
                  </para>
                </listitem>
              </orderedlist>

            </para>
          </listitem>-->

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.11 Topic Format Verification -->
    <section xml:id="Annex_HelperTopicCheck"
             xreflabel="Annex A.11">
      <title>Topic Format Verification</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperTopicCheck
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to verifye topic format.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Topic to be verified (<emphasis role="italic">topic</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              If <emphasis role="italic">topic</emphasis> contains at least one whitespace, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">topic</emphasis> does not corrspond to the format defined in <xref linkend="Annex_HelperValidTopicFormat"/>, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">topic</emphasis> contains at least one namespace prefix which namespace is not declared according to [XML Schema Part 2], section 3.2.18 QName, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT does not pass all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.12 Valid Topic Format -->
    <section xml:id="Annex_HelperValidTopicFormat"
             xreflabel="Annex A.12">
      <title>Valid Topic Format</title>
      <para>
        Topic shall correspond to the following format in Extended Backus Naur Form:
        <itemizedlist>
          <listitem>
            <para>
              TopicExpression ::= TopicPath
            </para>
          </listitem>
          <listitem>
            <para>
              TopicPath ::= RootTopic ChildTopicExpression*
            </para>
          </listitem>
          <listitem>
            <para>
              RootTopic ::= QName
            </para>
          </listitem>
          <listitem>
            <para>
              ChildTopicExpression ::= ‘/’ ChildTopicName
            </para>
          </listitem>
          <listitem>
            <para>
              ChildTopicName ::= QName | NCName
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.13 Get All Supported Analytics Modules-->
    <section xml:id="Annex_GetAllSupportedAnalyticsModules"
             xreflabel="Annex A.13">
      <title>Get All Supported Analytics Modules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> GetAllSupportedAnalyticsModules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve full list of Analytics Modules supported by a DUT.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Full Analytics Module Description List (<emphasis role="italic">fullAnalyticsModuleDescriptionList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          SupportedAnalyticsModules =: <emphasis role="italic">supportedAnalyticsModules</emphasis>
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription  list =: <emphasis role="italic">analyticsModuleDescriptionList1</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">fullAnalyticsModuleDescriptionList</emphasis> := <emphasis role="italic">fullAnalyticsModuleDescriptionList</emphasis> + <emphasis role="italic">analyticsModuleDescriptionList1</emphasis>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.14 Get Supported Metadata-->
    <section xml:id="Annex_HelperGetSupportedMetadata"
             xreflabel="Annex A.14">
      <title>Get Supported Metadata</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetSupportedMetadata
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve full list of metadata supported by a DUT.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Supported Metadata feature is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Module List with Metadata Info (<emphasis role="italic">analyticsModuleList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetSupportedMetadata</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Type skipped
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetSupportedMetadataResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    AnalyticsModule list =: <emphasis role="italic">analyticsModuleList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedMetadataResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.15 Get Supported Metadata for Analytics Module Type-->
    <section xml:id="Annex_HelperGetSupportedMetadataForAnalyticsModuleType"
             xreflabel="Annex A.15">
      <title>Get Supported Metadata for Analytics Module Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetSupportedMetadataForAnalyticsModuleType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve metadata supported by a requested Analytics Module Type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Supported Metadata feature is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics Module Type (<emphasis role="italic">analyticsModuleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Module List with Metadata Info (<emphasis role="italic">analyticsModuleList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetSupportedMetadata</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Type := <emphasis role="italic">analyticsModuleType</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetSupportedMetadataResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    AnalyticsModule list =: <emphasis role="italic">analyticsModuleList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedMetadataResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.16 Get List of non Fixed Analytics Configurations With Supporting of Analytics Modules-->
    <section xml:id="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedAnalyticsModules"
             xreflabel="Annex A.16">
      <title>Get List of Analytics Configurations With Supporting of Non Fixed Analytics Modules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfigurationSupportsNonFixedAnalyticsModules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve full list of Analytics Configuration that supports at least one non fixed Analytics Module.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT. Analytics Modules is supported by the DUT. Media2 Service .
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> List of Analytics Configuration that supports Analytics Modules (<emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          SupportedAnalyticsModules =: <emphasis role="italic">supportedModules</emphasis>
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">supportedModules</emphasis>.AnalyticsModuleDescription list is not empty and has at least one AnalyticsModuleDescription with @fixed ! = true,
                    set <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> := <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> + <emphasis role="italic">analyticsConf</emphasis>.@token
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.17 Get Supported Analytics Modules -->
    <section xml:id="Annex_HelperGetSupportedAnalyticsModules"
             xreflabel="Annex A.17">
      <title>Get Supported Analytics Modules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetSupportedAnalyticsModules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve a list of analytics modules that are supported by the given analytics configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsConfigToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Supported Analytics Modules (<emphasis role="italic">supportedAnalyticsModules</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    SupportedAnalyticsModules =: <emphasis role="italic">supportedAnalyticsModules</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedAnalyticsModules</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.18 Prepare Free Space for Analytics Module-->
    <section xml:id="Annex_HelperFreeSpaceForModule"
             xreflabel="Annex A.18">
      <title>Prepare Free Space for Analytics Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperFreeSpaceForModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to configure Analytics Configuration with free space for adding of Analytics Module with requested type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis>
        Analytics Configuration token <emphasis role="italic">analyticsConfigToken</emphasis>.
        Analytics module type (<emphasis role="italic">analyticsModuleType</emphasis>) for which free space is required.
        Maximum number of instances per configuration <emphasis role="italic">maxInstances</emphasis>.
        (optional) Maximum number of concurrent modules per configuration (<emphasis role="italic">limit</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics module (optional) (<emphasis role="italic">deletedModule</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetAnalyticsModules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    AnalyticsModule list =: <emphasis role="italic">analyticsModuleList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfExistingRequieredModules</emphasis> := amount of AnalyticsModule in <emphasis role="italic">analyticsModuleList</emphasis> with Type = <emphasis role="italic">analyticsModuleType</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">amountOfExistingRequieredModules</emphasis> = <emphasis role="italic">maxInstances</emphasis>
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">moduleToDelete</emphasis> := the first analytics module from <emphasis role="italic">analyticsModuleList</emphasis> that has @Type = <emphasis role="italic">analyticsModuleType</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client deletes one analytics module by following the procedure mentioned in <xref linkend="Annex_HelperDeleteAnalyticsModule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfigToken</emphasis> - token of Analytics configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">moduleToDelete</emphasis>.@Name - Name of the analytics module to be deleted
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Update <emphasis role="italic">analyticsModuleList</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Returns <emphasis role="italic">moduleToDelete</emphasis>.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>

          <listitem>
            <para>
              If <emphasis role="italic">limit</emphasis> is not specified, skip other steps of the procedure and return to the test.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfExistingModules</emphasis> := amount of AnalyticsModule items in <emphasis role="italic">analyticsModuleList</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">amountOfExistingModules</emphasis> = <emphasis role="italic">limit</emphasis>
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client retrieves a list of supported analytics modules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedAnalyticsModules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfigToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">supportedAnalyticsModules</emphasis> - supported analytics modules.
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">nonFixedAnalyticsModulesTypeList</emphasis> := list of AnalyticsModuleDescription.@Name items from <emphasis role="italic">supportedAnalyticsModules</emphasis> with AnalyticsModuleDescription.@fixed != true.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">analyticsModuleList</emphasis> does not contain item with @Type listed in <emphasis role="italic">nonFixedAnalyticsModulesTypeList</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">moduleToDelete</emphasis> := the first analytics module from <emphasis role="italic">analyticsModuleList</emphasis> that has @Type listed in <emphasis role="italic">nonFixedAnalyticsModulesTypeList</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client deletes one analytics module by following the procedure mentioned in <xref linkend="Annex_HelperDeleteAnalyticsModule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfigToken</emphasis> - token of Analytics configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">moduleToDelete</emphasis>.@Name - Name of the analytics module to be deleted
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Returns <emphasis role="italic">moduleToDelete</emphasis>.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>

        </orderedlist>
      </para>

      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.19 Delete Analytics Module-->
    <section xml:id="Annex_HelperDeleteAnalyticsModule"
             xreflabel="Annex A.19">
      <title>Delete Analytics Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeleteAnalyticsModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to delete analytics module from specified Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>). Name of the analytics module (<emphasis role="italic">analyticsModuleName</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">DeleteAnalyticsModules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    AnalyticsModuleName[0] := <emphasis role="italic">analyticsModuleName</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">DeleteAnalyticsModulesResponse</emphasis>.
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">DeleteAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.20 Get Analytics Modules -->
    <section xml:id="Annex_HelperGetAnalyticsModules"
             xreflabel="Annex A.20">
      <title>Get Analytics Modules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsModules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve currently assigned set of analytics modules of a Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Token of Analytics Configuration (<emphasis role="italic">analyticsConfToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Module List (<emphasis role="italic">analyticsModuleList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetAnalyticsModules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    AnalyticsModule list =: <emphasis role="italic">analyticsModuleList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.21 Get Analytics Configuration-->
    <section xml:id="Annex_HelperGetAnalyticsConfiguration"
             xreflabel="Annex A.21">
      <title>Get Analytics Configuration</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfiguration
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Token of Analytics Configuration (<emphasis role="italic">analyticsConfToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Configuration (<emphasis role="italic">analyticsConf</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetAnalyticsConfigurations</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ProfileToken skipped
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Configurations list =: <emphasis role="italic">analyticsConfList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsConfigurationsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.22 Create Analytics Module-->
    <section xml:id="Annex_HelperCreateAnalyticsModule"
             xreflabel="Annex A.22">
      <title>Create Analytics Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperCreateAnalyticsModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to create analytics module from specified Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>). Name of the analytics module (<emphasis role="italic">analyticsModuleName</emphasis>).
        Type of the analytics module (<emphasis role="italic">analyticsModuleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">CreateAnalyticsModules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    AnalyticsModule[0].@Name := <emphasis role="italic">analyticsModuleName</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    AnalyticsModule[0].@Type := <emphasis role="italic">analyticsModuleType</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    AnalyticsModule[0].Parameters := empty Parameters element
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">CreateAnalyticsModulesResponse</emphasis> message
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">CreateAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.23 Device Configuration For Create Analytics Module-->
    <section xml:id="Annex_HelperDeviceConfigurationForCreateAnalyticsModule"
             xreflabel="Annex A.23">
      <title>Device Configuration For Create Analytics Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeviceConfigurationForCreateAnalyticsModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for device configuration for adding of analytics module.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> If non fixed Analytics Module is supported (<emphasis role="italic">nonFixedModuleSupported</emphasis>). Analytics configuration token (optional) (<emphasis role="italic">analyticsToken</emphasis>).
        Analytics module description (optional) (<emphasis role="italic">analyticsModuleDescription</emphasis>).
        Analytics module to restore (optional) (<emphasis role="italic">moduleToRestore</emphasis>)

      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations that supports non fixed AnalyticsModules by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedAnalyticsModules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> is empty, set <emphasis role="italic">nonFixedModuleSupported</emphasis> = false and return to test procedure.
            </para>
          </listitem>
          <listitem>
            <para xml:id="Annex_HelperDeviceConfigurationForCreateAnalyticsModule.ConfigureProfile"
                  xreflabel="6">
              ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsConfListSupportsAnalyticsModules</emphasis> - list of Analytics configurations.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">profile</emphasis> - media profile.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client retrieves a list of supported analytics modules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedAnalyticsModules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">supportedAnalyticsModules</emphasis> - supported analytics modules.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription list is empty,
              FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">analyticsModuleDescription</emphasis> := first <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription item with @fixed != true.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">limit</emphasis> := <emphasis role="italic">supportedAnalyticsModules</emphasis>.@Limit (if specified).
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsModuleDescription</emphasis> does not contain maxInstances attribute, FAIL the test.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsModuleDescription</emphasis>.@maxInstances = 0, FAIL the test.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client prepares free space for adding of new analytics module with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForModule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsModuleDescription</emphasis>.@maxInstances - maximum number of instances per configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    (optional) in <emphasis role="italic">limit</emphasis> - limit
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.24 Select Existing Analytics Module-->
    <section xml:id="Annex_HelperSelectExistingAnalyticsModule"
             xreflabel="Annex A.24">
      <title>Select Existing Analytics Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectExistingAnalyticsModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select Analytics Module existing on the device.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics module (optional) (<emphasis role="italic">analyticsModule</emphasis>), Analytics Configuration token (<emphasis role="italic">analyticsToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">analyticsModuleList</emphasis> list is not empty
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">analyticsModule</emphasis> := <emphasis role="italic">analyticsModuleList</emphasis>[0].
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">analyticsConf</emphasis>.@token.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Return to test procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.25 Check Shape Descriptor Coordinates-->
    <section xml:id="Annex_HelperCheckShapeDescriptorCoordinates"
                 xreflabel="Annex A.25">
      <title>Check Shape Descriptor Coordinates</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectExistingAnalyticsModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to check that object bounding boxes or shapes included into sample frame of GetSupportedMetadataResponse are located in the top left quarter of the image.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> SampleFrame <emphasis role="italic">sampleFrame</emphasis>
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              Set <emphasis role="italic">translateX</emphasis> = 0.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">translateY</emphasis> = 0.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">scaleX</emphasis> = 1.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">scaleY</emphasis> = 1.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">sampleFrame</emphasis> contains Transformation element, rewrite variables:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    If <emphasis role="italic">sampleFrame</emphasis>.Transformation.Translate.@x is specified, set <emphasis role="italic">translateX</emphasis> = <emphasis role="italic">sampleFrame</emphasis>.Transformation.Translate.@x.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">sampleFrame</emphasis>.Transformation.Translate.@y is specified, set <emphasis role="italic">translateY</emphasis> = <emphasis role="italic">sampleFrame</emphasis>.Transformation.Translate.@y.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">sampleFrame</emphasis>.Transformation.Scale.@x is specified, set <emphasis role="italic">scaleX</emphasis> = <emphasis role="italic">sampleFrame</emphasis>.Transformation.Scale.@x.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">sampleFrame</emphasis>.Transformation.Scale.@y is specified, set <emphasis role="italic">scaleY</emphasis> = <emphasis role="italic">sampleFrame</emphasis>.Transformation.Scale.@y.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Object.Appearance with Shape element (<emphasis role="italic">appearance</emphasis>) in <emphasis role="italic">sampleFrame</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    If <emphasis role="italic">appearance</emphasis> contains Transformation element, rewrite variables:
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          If <emphasis role="italic">appearance</emphasis>.Transformation.Translate.@x is specified, set <emphasis role="italic">translateX</emphasis> = <emphasis role="italic">appearance</emphasis>.Transformation.Translate.@x. Otherwise set <emphasis role="italic">translateX</emphasis> = 0.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">appearance</emphasis>.Transformation.Translate.@y is specified, set <emphasis role="italic">translateY</emphasis> = <emphasis role="italic">appearance</emphasis>.Transformation.Translate.@y. Otherwise set <emphasis role="italic">translateY</emphasis> = 0.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">appearance</emphasis>.Transformation.Scale.@x is specified, set <emphasis role="italic">scaleX</emphasis> = <emphasis role="italic">appearance</emphasis>.Transformation.Scale.@x. Otherwise set <emphasis role="italic">scaleX</emphasis> = 1.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">appearance</emphasis>.Transformation.Scale.@y is specified, set <emphasis role="italic">scaleY</emphasis> = <emphasis role="italic">appearance</emphasis>.Transformation.Scale.@y. Otherwise set <emphasis role="italic">scaleY</emphasis> = 1.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">appearance</emphasis>.Shape contains BoundingBox element:
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          ONVIF Client transforms bottom coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">appearance</emphasis>.Shape.BoundingBox.@bottom - coordinate of point to transform
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">translateY</emphasis> - Translational value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">scaleY</emphasis> - Scaling value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">bottom</emphasis> - bottom in default coordinate system
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ONVIF Client transforms top coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">appearance</emphasis>.Shape.BoundingBox.@top - coordinate of point to transform
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">translateY</emphasis> - Translational value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">scaleY</emphasis> - Scaling value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">top</emphasis> - top in default coordinate system
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ONVIF Client transforms right coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">appearance</emphasis>.Shape.BoundingBox.@right - coordinate of point to transform
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">translateX</emphasis> - Translational value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">scaleX</emphasis> - Scaling value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">right</emphasis> - right in default coordinate system
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ONVIF Client transforms left coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">appearance</emphasis>.Shape.BoundingBox.@left - coordinate of point to transform
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">translateX</emphasis> - Translational value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">scaleX</emphasis> - Scaling value
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">left</emphasis> - left in default coordinate system
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">bottom</emphasis> &gt; 1 or <emphasis role="italic">bottom</emphasis> &lt; 0, FAIL the test.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">top</emphasis> &gt; 1 or <emphasis role="italic">top</emphasis> &lt; 0, FAIL the test.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">right</emphasis> &gt; 0 or <emphasis role="italic">top</emphasis> &lt; -1, FAIL the test.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">left</emphasis> &gt; 0 or <emphasis role="italic">top</emphasis> &lt; -1, FAIL the test.
                        </para>
                      </listitem>

                      <listitem>
                        <para>
                          For each <emphasis role="italic">appearance</emphasis>.Polygon.Point:
                          <orderedlist numeration="arabic"
                                       inheritnum="inherit">
                            <?dbfo label-width="2.5em"?>
                            <listitem>
                              <para>
                                ONVIF Client transforms X coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                                <itemizedlist>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">appearance</emphasis>.Polygon.Point.@x - coordinate of point to transform
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">translateX</emphasis> - Translational value
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">scaleX</emphasis> - Scaling value
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      out <emphasis role="italic">pointX</emphasis> - X of point in default coordinate system
                                    </para>
                                  </listitem>
                                </itemizedlist>
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                ONVIF Client transforms Y coordinate to default coordinate system by following the procedure mentioned in <xref linkend="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"/> with the following input and output parameters
                                <itemizedlist>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">appearance</emphasis>.Polygon.Point.@y - coordinate of point to transform
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">translateY</emphasis> - Translational value
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      in <emphasis role="italic">scaleY</emphasis> - Scaling value
                                    </para>
                                  </listitem>
                                  <listitem>
                                    <para>
                                      out <emphasis role="italic">pointY</emphasis> - Y of point in default coordinate system
                                    </para>
                                  </listitem>
                                </itemizedlist>
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                If <emphasis role="italic">pointY</emphasis> &gt; 1 or <emphasis role="italic">bottom</emphasis> &lt; 0, FAIL the test.
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                If <emphasis role="italic">pointX</emphasis> &gt; 0 or <emphasis role="italic">top</emphasis> &lt; -1, FAIL the test.
                              </para>
                            </listitem>
                          </orderedlist>
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>


              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.26 Transform Coordinate To Default Coordinate System-->
    <section xml:id="Annex_HelperTransformCoordinateToDefaultCoordinateSystem"
                 xreflabel="Annex A.26">
      <title>Transform Coordinate To Default Coordinate System</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperTransformCoordinateToDefaultCoordinateSystem
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to transform coordinate into default coordinate system.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Coordinate of point to transform <emphasis role="italic">coordinate</emphasis>, Scaling value <emphasis role="italic">scale</emphasis>, Translational value (<emphasis role="italic">translate</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Coordinate of point transformed into default coordinate system <emphasis role="italic">coordinate</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              Set <emphasis role="italic">coordinate</emphasis> = <emphasis role="italic">coordinate</emphasis> * <emphasis role="italic">scale</emphasis> + <emphasis role="italic">translate</emphasis>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.27 Device Configuration For Create Rule-->
    <section xml:id="Annex_HelperDeviceConfigurationForCreateRule"
             xreflabel="Annex A.27">
      <title>Device Configuration For Create Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeviceConfigurationForCreateRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for configuring DUT in order to add a rule.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Indication of non-fixed Rule support (<emphasis role="italic">nonFixedRuleSupported</emphasis>).
        Analytics configuration token (optional) (<emphasis role="italic">analyticsToken</emphasis>).
        Rule description (optional) (<emphasis role="italic">ruleDescription</emphasis>).
        Rule to restore (optional) (<emphasis role="italic">ruleToRestore</emphasis>)
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations that supports non-fixed Rules by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedRules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfListSupportsRules</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsConfListSupportsRules</emphasis> is empty, set <emphasis role="italic">nonFixedRuleSupported</emphasis> = false and return to test procedure.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListSupportsRules</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsConfListSupportsRules</emphasis> - list of Analytics configurations.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">profile</emphasis> - media profile.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">supportedRules</emphasis>.RuleDescription list is empty,
              FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">limit</emphasis> := <emphasis role="italic">supportedRules</emphasis>.@Limit (if specified).
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">supportedRules</emphasis>.RuleDescription list does not contain item with @fixed != true,
              FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleDescription</emphasis> := first <emphasis role="italic">supportedRules</emphasis>.RuleDescription item with @fixed != true.
            </para>
          </listitem>         
          <listitem>
            <para>
              If <emphasis role="italic">ruleDescription</emphasis> does not contain maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleDescription</emphasis>.@maxInstances = 0, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">nonFixedRuleTypeList</emphasis> := list of RuleDescription.@Name items from <emphasis role="italic">supportedRules</emphasis> with RuleDescription.@fixed != true.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client prepares free space for adding of new rule with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForRule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">supportedRules</emphasis>.@Limit - maximum number of concurrent rules per configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">nonFixedRuleTypeList</emphasis> - list of non-fixed rule types that could be removed
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleDescription</emphasis>.@Name - rule type for which free space is required
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleDescription</emphasis>.@maxInstances - maximum number of rules with <emphasis role="italic">ruleDescription</emphasis>.@Name type per configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    (optional) in <emphasis role="italic">limit</emphasis> - limit
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">ruleToRestore</emphasis> - rule to restore (if a rule was removed)
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.28 Get List of Non-Fixed Analytics Configurations With Supporting of Rules-->
    <section xml:id="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedRules"
             xreflabel="Annex A.28">
      <title>Get List of Analytics Configurations With Supporting of Non-Fixed Rules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfigurationSupportsNonFixedRules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for retrieving full list of Analytics Configurations that supports at least one non-fixed Rule.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> List of Analytics Configuration that supports non-fixed Rules (<emphasis role="italic">analyticsConfListSupportsRules</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics Configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">supportedRules</emphasis>.RuleDescription list is not empty and has at least one RuleDescription with @fixed != true,
                    set <emphasis role="italic">analyticsConfListSupportsRules</emphasis> := <emphasis role="italic">analyticsConfListSupportsRules</emphasis> + <emphasis role="italic">analyticsConf</emphasis>.@token
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.29 Get Supported Rules -->
    <section xml:id="Annex_HelperGetSupportedRules"
             xreflabel="Annex A.29">
      <title>Get Supported Rules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetSupportedRules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for retrieving a list of rule types which are supported by the given analytics configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsConfigToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Supported Rules (<emphasis role="italic">supportedRules</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.30 Prepare Free Space for Rule-->
    <section xml:id="Annex_HelperFreeSpaceForRule"
             xreflabel="Annex A.30">
      <title>Prepare Free Space for Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperFreeSpaceForRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for configuring Analytics Configuration with free space in order to add Rule with requested type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics Configuration token (<emphasis role="italic">analyticsConfigToken</emphasis>).
        Maximum number of concurrent rules per configuration (<emphasis role="italic">limit</emphasis>).
        List of non-fixed rule types (<emphasis role="italic">nonFixedRuleTypeList</emphasis>).
        Rule type for which free space is required (<emphasis role="italic">ruleType</emphasis>).
        Maximum number of rules with <emphasis role="italic">ruleType</emphasis> type per configuration (<emphasis role="italic">maxInstances</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Rule (optional) (<emphasis role="italic">deletedRule</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsConfigToken</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetRulesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Rule list =: <emphasis role="italic">ruleList</emphasis>
                  </para>
                </listitem>

              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfExistingRequieredRules</emphasis> := amount of Rule items in <emphasis role="italic">ruleList</emphasis> with Type = <emphasis role="italic">ruleType</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">amountOfExistingRequieredRules</emphasis> = <emphasis role="italic">maxInstances</emphasis>
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">ruleToDelete</emphasis> := the first rule from <emphasis role="italic">ruleList</emphasis> that has @Type = <emphasis role="italic">ruleType</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client deletes one rule by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfigToken</emphasis> - token of Analytics configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleToDelete</emphasis>.@Name - Name of the rule to be deleted
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Skip other steps of the procedure and return to the test.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">limit</emphasis> is not specified, skip other steps of the procedure and return to the test.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">amountOfExistingRules</emphasis> := amount of Rule items in <emphasis role="italic">ruleList</emphasis>.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">amountOfExistingRules</emphasis> = <emphasis role="italic">limit</emphasis>
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    If <emphasis role="italic">ruleList</emphasis> does not contain item with @Type listed in <emphasis role="italic">nonFixedRuleTypeList</emphasis>, FAIL the test, restore the DUT state, and skip other steps.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">ruleToDelete</emphasis> := the first rule from <emphasis role="italic">ruleList</emphasis> that has @Type listed in <emphasis role="italic">nonFixedRuleTypeList</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client deletes one rule by following the procedure mentioned in <xref linkend="Annex_HelperDeleteRule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfigToken</emphasis> - token of Analytics configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleToDelete</emphasis>.@Name - Name of the rule to be deleted
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>

      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.31 Delete Rule-->
    <section xml:id="Annex_HelperDeleteRule"
             xreflabel="Annex A.31">
      <title>Delete Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeleteRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to delete rule from specified Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>).
        Rule name (<emphasis role="italic">ruleName</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">DeleteRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    RuleName[0] := <emphasis role="italic">ruleName</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">DeleteRulesResponse</emphasis>.
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">DeleteRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.32 Create Rule-->
    <section xml:id="Annex_HelperCreateRule"
             xreflabel="Annex A.32">
      <title>Create Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperCreateRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for rule creation for specified Analytics Configuration.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Analytics configuration token (<emphasis role="italic">analyticsToken</emphasis>).
        Name of the rule (<emphasis role="italic">ruleName</emphasis>).
        Type of the rule (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">CreateRules</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    ConfigurationToken := <emphasis role="italic">analyticsToken</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].@Name := <emphasis role="italic">ruleName</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].@Type := <emphasis role="italic">ruleType</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Rule[0].Parameters := empty Parameters element
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">CreateRulesResponse</emphasis> message.
            </para>
          </listitem>


        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">CreateRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.33 Select Existing Rule-->
    <section xml:id="Annex_HelperSelectExistingRule"
             xreflabel="Annex A.33">
      <title>Select Existing Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for existing rule selection.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Rule (optional) (<emphasis role="italic">rule</emphasis>).
        Analytics Configuration token (<emphasis role="italic">analyticsToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client retrieves a set of rules related to Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">ruleList</emphasis>  - rule list
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">ruleList</emphasis> list is not empty
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">rule</emphasis> := <emphasis role="italic">ruleList</emphasis>[0].
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">analyticsConf</emphasis>.@token.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Skip other steps and return to the test procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>

        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.34 Device Configuration For Create Specific Rule-->
    <section xml:id="Annex_HelperDeviceConfigurationForCreateSpecificRule"
             xreflabel="Annex A.34">
      <title>Device Configuration For Create Specific Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeviceConfigurationForCreateSpecificRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for configuring DUT in order to add a rule with specified rule type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis>  Indication of non-fixed Rule support (<emphasis role="italic">nonFixedRuleSupported</emphasis>).
        Analytics configuration token (optional) (<emphasis role="italic">analyticsToken</emphasis>).
        Rule description (optional) (<emphasis role="italic">ruleDescription</emphasis>).
        Rule to restore (optional) (<emphasis role="italic">ruleToRestore</emphasis>).
        Media profile (optional) (<emphasis role="italic">profile</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations that supports non-fixed rule with <emphasis role="italic">ruleType</emphasis> type by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedSpecificRules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - rule type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfListSupportsRules</emphasis> - a list of Analytics configurations that support non-fixed reqiured rule type
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsConfListSupportsRules</emphasis> is empty, set <emphasis role="italic">nonFixedRuleSupported</emphasis> = false and return to test procedure.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client configures media profile with Analytics Configuration from <emphasis role="italic">analyticsConfListSupportsRules</emphasis> list by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsConfListSupportsRules</emphasis> - list of Analytics configurations.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">profile</emphasis> - media profile.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.token
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">supportedRules</emphasis>.RuleDescription list does not contain item with @Name  = <emphasis role="italic">ruleType</emphasis> and with @fixed != true,
              FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleDescription</emphasis> := first <emphasis role="italic">supportedRules</emphasis>.RuleDescription item with @Name  = <emphasis role="italic">ruleType</emphasis> and with @fixed != true.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleDescription</emphasis> does not contain maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleDescription</emphasis>.@maxInstances = 0, FAIL the test, restore the DUT state, and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">nonFixedRuleTypeList</emphasis> := list of RuleDescription.@Name items from <emphasis role="italic">supportedRules</emphasis> with RuleDescription.@fixed != true.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client prepares free space for adding of new rule with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForRule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">supportedRules</emphasis>.@Limit - maximum number of concurrent rules per configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">nonFixedRuleTypeList</emphasis> - list of non-fixed rule types that could be removed
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - rule type for which free space is required
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleDescription</emphasis>.@maxInstances - maximum number of rules with <emphasis role="italic">ruleDescription</emphasis>.@Name type per configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">ruleToRestore</emphasis> - rule to restore (if a rule was removed)
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.35 Select Value For Rule String Parameter Type-->
    <section xml:id="Annex_HelperSelectValueForRuleStringParameterType"
             xreflabel="Annex A.35">
      <title>Select Value For Rule String Parameter Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectValueForRuleStringParameterType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for select value for string parameter type of a rule.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Option of String Parameter Type (<emphasis role="italic">ruleOption</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Value for string parameter type <emphasis role="italic">stringValue</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>

          <listitem>
            <para>
              If <emphasis role="italic">ruleOption</emphasis> does not contain <emphasis role="bold">StringItems</emphasis> element or <emphasis role="bold">StringList</emphasis> element, FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleOption</emphasis> contains <emphasis role="bold">StringItems</emphasis> element
              <orderedlist numeration="arabic"
                  inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">stringValue</emphasis> := value of the 1st Item element.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Skip other steps and return to the test procedure.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleOption</emphasis> contains <emphasis role="bold">StringList</emphasis> element
              <orderedlist numeration="arabic"
                  inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">stringValue</emphasis> := value of the 1st element in the string list.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.36 Get List of Non-Fixed Analytics Configurations With Supporting of Specific Rules-->
    <section xml:id="Annex_HelperGetAnalyticsConfigurationSupportsNonFixedSpecificRules"
             xreflabel="Annex A.36">
      <title>Get List of Non-Fixed Analytics Configurations With Supporting of Specific Rules</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsConfigurationSupportsNonFixedSpecificRules
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure for retrieving full list of Analytics Configurations that supports at least one non-fixed Rule with specified rule type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Media2 Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> List of Analytics Configuration that supports non-fixed Rules (<emphasis role="italic">analyticsConfListSupportsRules</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics Configuration that supports non-fixed Rules
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client invokes <emphasis role="bold">GetSupportedRules</emphasis> request with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          ConfigurationToken := <emphasis role="italic">analyticsConf</emphasis>.@token
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    DUT responds with <emphasis role="bold">GetSupportedRulesResponse</emphasis> message with parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          SupportedRules =: <emphasis role="italic">supportedRules</emphasis>
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">supportedRules</emphasis>.RuleDescription list contains at least one RuleDescription with @Name = <emphasis role="italic">ruleType</emphasis> and with @fixed != true,
                    set <emphasis role="italic">analyticsConfListSupportsRules</emphasis> := <emphasis role="italic">analyticsConfListSupportsRules</emphasis> + <emphasis role="italic">analyticsConf</emphasis>.@token
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.37 Supported Parameter Types-->
    <section xml:id="Annex_HelperSupportedParameterTypes"
             xreflabel="Annex A.37">
      <title>Supported Parameter Types</title>
      <para>
        ONVIF Client needs to generate values for parameter types Modify Module/Rule request.
        This table provides a list of rule/module parameter types supported by the ONVIF Client and logic of its values generation.
      </para>
      <para>
        <table>
          <title>Supported Parameter Types</title>
          <tgroup cols="3">
            <colspec colwidth="500*" />
            <colspec colwidth="500*" />
            <thead>
              <row>
                <entry>Module/Rule Parameter Types</entry>
                <entry>Module/Rule parameter Options Type</entry>
                <entry>Module/Rule Parameter Value to be Generated</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>xs:boolean (SimpleItemDescription)</entry>
                <entry>skipped</entry>
                <entry>true</entry>
              </row>
              <row>
                <entry>xs:string (SimpleItemDescription)</entry>
                <entry>skipped</entry>
                <entry>"test value"</entry>
              </row>
              <row>
                <entry>xs:int (SimpleItemDescription)</entry>
                <entry>skipped</entry>
                <entry>1</entry>
              </row>
              <row>
                <entry>xs:float (SimpleItemDescription) </entry>
                <entry>skipped</entry>
                <entry>5.4</entry>
              </row>
              <row>
                <entry>xs:duration (SimpleItemDescription)</entry>
                <entry>skipped</entry>
                <entry>PT60S</entry>
              </row>
              <row>
                <entry>tt:IntRectangle (ElementItemDescription)</entry>
                <entry>skipped</entry>
                <entry>x = 0, y = 0, width = 250, height = 250</entry>
              </row>
              <row>
                <entry>tt:StringList (SimpleItemDescription)</entry>
                <entry>skipped</entry>
                <entry>"test"</entry>
              </row>
              <row>
                <entry>tt:StringItems (ElementItemDescription)</entry>
                <entry>skipped</entry>
                <entry>"test"</entry>
              </row>
              <row>
                <entry>tt:Polyline (ElementItemDescription)</entry>
                <entry>skipped</entry>
                <entry>Point[0].@x="-0.9", Point[0].@y="0.1", Point[1].@x="0.9", Point[1].@y="0.1"</entry>
              </row>
              <row>
                <entry>tt:Polygon (ElementItemDescription)</entry>
                <entry>skipped</entry>
                <entry>
                  Point[0].@x="-0.5", Point[0].@y="-0.5", Point[1].@x="-0.5", Point[1].@y="0.5",
                  Point[2].@x="0.5", Point[2].@y="0.5"
                </entry>
              </row>
              <row>
                <entry>xs:string (SimpleItemDescription)</entry>
                <entry>tt:StringList</entry>
                <entry>Random value from the list.</entry>
              </row>
              <row>
                <entry>xs:string (SimpleItemDescription)</entry>
                <entry>tt:StringItems</entry>
                <entry>Random value from the list.</entry>
              </row>
              <row>
                <entry>xs:int (SimpleItemDescription)</entry>
                <entry>tt:IntRange</entry>
                <entry>Random value from the range.</entry>
              </row>
              <row>
                <entry>xs:int (SimpleItemDescription)</entry>
                <entry>tt:IntList</entry>
                <entry>Random value from the list.</entry>
              </row>
              <row>
                <entry>xs:float (SimpleItemDescription)</entry>
                <entry>tt:FloatRange</entry>
                <entry>Random value from the range.</entry>
              </row>
              <row>
                <entry>xs:float (SimpleItemDescription)</entry>
                <entry>tt:FloatList</entry>
                <entry>Random value from the list.</entry>
              </row>
              <row>
                <entry>xs:duration (SimpleItemDescription)</entry>
                <entry>tt:DurationRange</entry>
                <entry>Random value from the range.</entry>
              </row>
              <row>
                <entry>tt:IntRectangle (ElementItemDescription)</entry>
                <entry>tt:IntRectangleRange</entry>
                <entry>Random value from the range for each value, with limitation that the rectangle in the borders of (XRange.Min, YRange.Min, XRange.Min + WidthRange.Max, YRange.Min + HeightRange.Max) rectangle.</entry>
              </row>
              <row>
                <entry>tt:StringList (SimpleItemDescription)</entry>
                <entry>tt:StringList</entry>
                <entry>Random list with values from the list.</entry>
              </row>
              <row>
                <entry>tt:StringItems (ElementItemDescription)</entry>
                <entry>tt:StringItems</entry>
                <entry>Random list with values from the list.</entry>
              </row>
              <row>
                <entry>tt:Polyline (ElementItemDescription)</entry>
                <entry>tt:IntRange</entry>
                <entry>Random number (based on range) of points based on range with normalized coordinates.</entry>
              </row>
              <row>
                <entry>tt:Polygon (ElementItemDescription)</entry>
                <entry>tt:PolygonOptions</entry>
                <entry>If RectangleOnly = true random rectangle. Otherwise, random number (based on range) of points based on range.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </para>
    </section>
    <!--A.38 Select Analytics Module Description To Modify-->
    <section xml:id="Annex_HelperSelectAnalyticsModuleDescriptionToModify"
              xreflabel="Annex A.38">
      <title>Select Analytics Module Description To Modify</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectAnalyticsModuleDescriptionToModify
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select Analytics Modules Description that has parameter without corresponding option or that has parameter with corresponding option.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Analytics Modules is supported by the DUT. Analytics Module Options is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Flag shows if parameters of selected Analytics Module have corresponding options <emphasis role="italic">parametersWithOptions</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> (optional) Analytics Module Description (<emphasis role="italic">analyticsModuleDescription</emphasis>).
        (optional) Maximum number of concurrent modules per configuration (<emphasis role="italic">limit</emphasis>).
        (optional) Analytics Configurations token (<emphasis role="italic">analyticsConfToken</emphasis>).
        (optional) List of SimpleItemDescription/ElementItemDescription elements that do not have options (<emphasis role="italic">itemListDescription</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">analyticsConf</emphasis>.token =: <emphasis role="italic">analyticsConfToken</emphasis>.
                  </para>
                </listitem>

                <listitem>
                  <para>
                    ONVIF Client retrieves a list of supported analytics modules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedAnalyticsModules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">supportedAnalyticsModules</emphasis> - supported analytics modules.
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">supportedAnalyticsModules</emphasis>.AnalyticsModuleDescription  list =: <emphasis role="italic">analyticsModuleDescriptionList</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    For each analytics module description (<emphasis role="italic">analyticsModuleDescription</emphasis>) in <emphasis role="italic">analyticsModuleDescriptionList</emphasis> repeat the following steps:
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          ONVIF Client retrives analytics module options by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModuleOptions"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">analyticsConfToken</emphasis> - token of Analytics Configuration
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - type of Analytics Module
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">analyticsModuleOptionsList</emphasis> - options list
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          For each SimpleItemDescription/ElementItemDescription element (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">analyticsModuleDescription</emphasis>.Parameters
                          <orderedlist numeration="arabic"
                                       inheritnum="inherit">
                            <?dbfo label-width="2.5em"?>
                            <listitem>
                              <para>
                                If <emphasis role="italic">parametersWithOptions</emphasis> = false
                                <orderedlist numeration="arabic" inheritnum="inherit">
                                  <?dbfo label-width=2.5em"?>
                                  <listitem>
                                    <para>
                                      If <emphasis role="italic">itemDescription</emphasis>.@Type value corresponds to parameter type values provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/> and <emphasis role="italic">analyticsModuleOptionsList</emphasis> does not contain option item with @Name = <emphasis role="italic">itemDescription</emphasis>.@Name,
                                      set <emphasis role="italic">itemListDescription</emphasis> := <emphasis role="italic">itemListDescription</emphasis> + <emphasis role="italic">itemDescription</emphasis>
                                    </para>
                                  </listitem>
                                </orderedlist>
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                If <emphasis role="italic">parametersWithOptions</emphasis> = true
                                <orderedlist numeration="arabic" inheritnum="inherit">
                                  <?dbfo label-width=2.5em"?>
                                  <listitem>
                                    <para>
                                      If <emphasis role="italic">itemDescription</emphasis>.@Type value corresponds to parameter type values provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/>
                                      and <emphasis role="italic">analyticsModuleOptionsList</emphasis> contains corresponding option item with @Name = <emphasis role="italic">itemDescription</emphasis>.@Name and its type corresponds to value provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/>,
                                      set <emphasis role="italic">itemListDescription</emphasis> := <emphasis role="italic">itemListDescription</emphasis> + <emphasis role="italic">itemDescription</emphasis>
                                    </para>
                                  </listitem>
                                </orderedlist>
                              </para>
                            </listitem>
                          </orderedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">itemListDescription</emphasis> is not empty
                          <orderedlist numeration="arabic" inheritnum="inherit">
                            <?dbfo label-width=2.5em"?>
                            <listitem>
                              <para>
                                If <emphasis role="italic">analyticsModuleDescription</emphasis> does not have maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Set <emphasis role="italic">limit</emphasis> := <emphasis role="italic">supportedAnalyticsModules</emphasis>.@Limit (if specified).
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Skip other steps and return to test procedure.
                              </para>
                            </listitem>
                          </orderedlist>

                        </para>
                      </listitem>


                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>



        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedAnalyticsModulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.39 Get Analytics Module Options-->
    <section xml:id="Annex_HelperGetAnalyticsModuleOptions"
                 xreflabel="Annex A.39">
      <title>Get Analytics Module Options</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperGetAnalyticsModuleOptions
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to retrieve analytics module options.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Modules is supported by the DUT. Analytics Module Options is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Token of Analytics Configuration (<emphasis role="italic">analyticsConfToken</emphasis>). (optional) Type of Analytics Module (<emphasis role="italic">analyticsModuleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Options list (<emphasis role="italic">analyticsModuleOptionsList</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>

          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetAnalyticsModuleOptions</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Type := <emphasis role="italic">analyticsModuleType</emphasis> if specified, otherwise skipped.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ConfigurationToken := analyticsConfToken
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              DUT responds with <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Options list =: <emphasis role="italic">analyticsModuleOptionsList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.40 Device Configuration For Modify Analytics Module-->
    <section xml:id="Annex_HelperDeviceConfigurationForModifyModule"
                 xreflabel="Annex A.40">
      <title>Device Configuration For Modify Module</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeviceConfigurationForModifyModule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select or create analytics module with specified type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Modules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Token of Analytics Configuration (<emphasis role="italic">analyticsToken</emphasis>). Analytics Module Description (<emphasis role="italic">analyticsModuleDescription</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Analytics Module with required type <emphasis role="italic">analyticsModule1</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsModuleList</emphasis>  contains AnalyticsModule item with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name
              <orderedlist numeration="arabic"
                         inheritnum="inherit">
                <?dbfo label-width="4.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">analyticsModule1</emphasis> := AnalyticsModule item with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name from <emphasis role="italic">analyticsModuleList</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Return to test procedure.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">analyticsModuleList</emphasis> does not contain AnalyticsModule item with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and <emphasis role="italic">analyticsModuleDescription</emphasis>.fixed = true,
              FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client creates new analytics module with Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client prepares free space for adding of new analytics module with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForModule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsModuleDescription</emphasis>.@maxInstances - maximum number of instances per configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">limit</emphasis> (optional) - maximum number of concurrent modules per configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">moduleToRestore</emphasis> (optional)  - analytics module to restore
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>

                <listitem>
                  <para>
                    Set <emphasis role="italic">moduleName</emphasis> := generated random string.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client creates new analytics module by following the procedure mentioned in <xref linkend="Annex_HelperCreateAnalyticsModule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">moduleName</emphasis> - analytics module name
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name - analytics module type
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client retrieves a set of analytics modules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsModules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">analyticsModuleList</emphasis>  - analytics module list
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">analyticsModuleList</emphasis> does not contain AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis>, FAIL the test.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">analyticsModule1</emphasis> := AnalyticsModule with @Type = <emphasis role="italic">analyticsModuleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">moduleName</emphasis> from <emphasis role="italic">analyticsModuleList</emphasis>.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetAnalyticsModuleOptionsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.41 Select Rule Description To Modify-->
    <section xml:id="Annex_HelperSelectRuleDescriptionToModify"
              xreflabel="Annex A.41">
      <title>Select Rule Description To Modify</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectRuleDescriptionToModify
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select Rules Description that has parameter without corresponding option or that has parameter with corresponding option.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Rules is supported by the DUT. Rule Options is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Flag shows if parameters of selected Rule have corresponding options <emphasis role="italic">parametersWithOptions</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> (optional) Rule Description (<emphasis role="italic">ruleDescription</emphasis>).
        (optional) Maximum number of concurrent rules per configuration (<emphasis role="italic">limit</emphasis>).
        (optional) Analytics Configurations token (<emphasis role="italic">analyticsConfToken</emphasis>).
        (optional) List of SimpleItemDescription/ElementItemDescription elements that do not have options (<emphasis role="italic">itemListDescription</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">analyticsConf</emphasis>.token =: <emphasis role="italic">analyticsConfToken</emphasis>.
                  </para>
                </listitem>

                <listitem>
                  <para>
                    ONVIF Client retrieves a list of supported rules by following the procedure mentioned in <xref linkend="Annex_HelperGetSupportedRules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConfToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">supportedRules</emphasis> - supported rules.
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">supportedRules</emphasis>.RuleDescription  list =: <emphasis role="italic">ruleDescriptionList</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    For each rule description (<emphasis role="italic">ruleDescription</emphasis>) in <emphasis role="italic">ruleDescriptionList</emphasis> repeat the following steps:
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          ONVIF Client retrives rule options by following the procedure mentioned in <xref linkend="Annex_HelperGetSpecificRuleOptions"/> with the following input and output parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                in <emphasis role="italic">analyticsConfToken</emphasis> - token of Analytics Configuration
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                in <emphasis role="italic">ruleDescription</emphasis>.@Name - type of Rule
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                out <emphasis role="italic">ruleOptionsList</emphasis> - options list
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          For each SimpleItemDescription/ElementItemDescription element (<emphasis role="italic">itemDescription</emphasis>) in <emphasis role="italic">ruleDescription</emphasis>.Parameters
                          <orderedlist numeration="arabic"
                                       inheritnum="inherit">
                            <?dbfo label-width="2.5em"?>
                            <listitem>
                              <para>
                                If <emphasis role="italic">parametersWithOptions</emphasis> = false
                                <orderedlist numeration="arabic" inheritnum="inherit">
                                  <?dbfo label-width=2.5em"?>
                                  <listitem>
                                    <para>
                                      If <emphasis role="italic">itemDescription</emphasis>.@Type value corresponds to parameter type values provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/> and <emphasis role="italic">ruleOptionsList</emphasis> does not contain option item with @Name = <emphasis role="italic">itemDescription</emphasis>.@Name,
                                      set <emphasis role="italic">itemListDescription</emphasis> := <emphasis role="italic">itemListDescription</emphasis> + <emphasis role="italic">itemDescription</emphasis>
                                    </para>
                                  </listitem>
                                </orderedlist>
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                If <emphasis role="italic">parametersWithOptions</emphasis> = true
                                <orderedlist numeration="arabic" inheritnum="inherit">
                                  <?dbfo label-width=2.5em"?>
                                  <listitem>
                                    <para>
                                      If <emphasis role="italic">itemDescription</emphasis>.@Type value corresponds to parameter type values provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/>
                                      and <emphasis role="italic">ruleOptionsList</emphasis> contains corresponding option item with @Name = <emphasis role="italic">itemDescription</emphasis>.@Name and its type corresponds to value provided in the <xref linkend="Annex_HelperSupportedParameterTypes"/>,
                                      set <emphasis role="italic">itemListDescription</emphasis> := <emphasis role="italic">itemListDescription</emphasis> + <emphasis role="italic">itemDescription</emphasis>
                                    </para>
                                  </listitem>
                                </orderedlist>
                              </para>
                            </listitem>
                          </orderedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">itemListDescription</emphasis> is not empty
                          <orderedlist numeration="arabic" inheritnum="inherit">
                            <?dbfo label-width=2.5em"?>
                            <listitem>
                              <para>
                                If <emphasis role="italic">ruleDescription</emphasis> does not have maxInstances attribute, FAIL the test, restore the DUT state, and skip other steps.
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Set <emphasis role="italic">limit</emphasis> := <emphasis role="italic">supportedRules</emphasis>.@Limit (if specified).
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Skip other steps and return to test procedure.
                              </para>
                            </listitem>
                          </orderedlist>
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetSupportedRulesResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.42 Device Configuration For Modify Rule-->
    <section xml:id="Annex_HelperDeviceConfigurationForModifyRule"
                 xreflabel="Annex A.42">
      <title>Device Configuration For Modify Rule</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperDeviceConfigurationForModifyRule
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select or create rule with specified type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Rules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Token of Analytics Configuration (<emphasis role="italic">analyticsToken</emphasis>). Rule Description (<emphasis role="italic">ruleDescription</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Rule with required type <emphasis role="italic">rule1</emphasis>.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a set of rules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">ruleList</emphasis>  - rule list
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleList</emphasis>  contains Rule item with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name
              <orderedlist numeration="arabic"
                         inheritnum="inherit">
                <?dbfo label-width="4.5em"?>
                <listitem>
                  <para>
                    Set <emphasis role="italic">rule1</emphasis> := Rule item with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name from <emphasis role="italic">ruleList</emphasis>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Return to test procedure.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">ruleList</emphasis> does not contain Rule item with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and <emphasis role="italic">ruleDescription</emphasis>.fixed = true,
              FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client creates new rule with Type = <emphasis role="italic">ruleDescription</emphasis>.@Name:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client prepares free space for adding of new rule with required type into the Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperFreeSpaceForRule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleDescription</emphasis>.@Name - rule type
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleDescription</emphasis>.@maxInstances - maximum number of instances per configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">limit</emphasis> (optional) - maximum number of concurrent rules per configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">ruleToRestore</emphasis> (optional)  - rule to restore
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>

                <listitem>
                  <para>
                    Set <emphasis role="italic">ruleName</emphasis> := generated random string.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client creates new rule by following the procedure mentioned in <xref linkend="Annex_HelperCreateRule"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleName</emphasis> - rule name
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          in <emphasis role="italic">ruleDescription</emphasis>.@Name - rule type
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    ONVIF Client retrieves a set of rules assigned of Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">ruleList</emphasis>  - rule list
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">ruleList</emphasis> does not contain Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis>, FAIL the test.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">rule1</emphasis> := Rule with @Type = <emphasis role="italic">ruleDescription</emphasis>.@Name and with @Name = <emphasis role="italic">ruleName</emphasis> from <emphasis role="italic">ruleList</emphasis>.
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.43 Profile Configuration With Specific Rule Type-->
    <section xml:id="Annex_HelperProfileConfigurationWithSpecificRuleType"
                 xreflabel="Annex A.43">
      <title>Profile Configuration With Specific Rule Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperProfileConfigurationWithSpecificRuleType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select or configure media profile with Analytics Configuration that contains rule with specified type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is supported by the DUT. Rules is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Token of the video source (<emphasis role="italic">videoSourceToken</emphasis>).
        Name of the rule present in the media profile (<emphasis role="italic">ruleName</emphasis>).
        Analytics Configuration token present in the media profile (<emphasis role="italic">analyticsToken</emphasis>).
        Removed rule to restore (<emphasis role="italic">ruleToRestore</emphasis>).
        Created rule to restore (<emphasis role="italic">ruleNameToDelete</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem xml:id="A43.SelectProfileWithSpecificRuleType"
                 xreflabel="1">
            <para>
              ONVIF Client tries to find media profile that contains rule with Type = <emphasis role="italic">ruleType</emphasis> by following the procedure mentioned in <xref linkend="Annex_HelperSelectProfileWithSpecificRuleType"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - required Rule Type
                  </para>
                </listitem>
                <listitem>
                  <para>
                   (optional) out <emphasis role="italic">profile</emphasis>  - profile with Video Source Configuration, and with Analytics Configuration that contains rule with requested type.
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">profile</emphasis> was returnd at step <xref linkend="A43.SelectProfileWithSpecificRuleType"/>.
              <orderedlist numeration="arabic" inheritnum="inherit">
              <?dbfo label-width=2.5em"?>
              <listitem>
                <para>
Set <emphasis role="italic">videoSourceToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.@token.
                </para>
              </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">ruleName</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.RuleEngineConfiguration.Rule[N].@Name, where Rule[N] is the 1st Rule with @Type = <emphasis role="italic">ruleType</emphasis>.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Return to test procedure.
                  </para>
                </listitem>
            </orderedlist>
            </para>
          </listitem>
          <listitem xml:id="A43.SelectExistingRuleWithSpecificType"
                 xreflabel="3">
            <para>
              ONVIF Client tries to find existing rule with Type = <emphasis role="italic">ruleType</emphasis> by following the procedure mentioned in <xref linkend="Annex_HelperSelectExistingRuleWithSpecificType"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - required Rule Type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    (optional) out <emphasis role="italic">rule</emphasis> - Rule                   
                  </para>
                </listitem>
                <listitem>
                  <para>
                    (optional) <emphasis role="italic">analyticsToken</emphasis> - Analytics Configuration token
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">rule</emphasis> was returnd at step <xref linkend="A43.SelectExistingRuleWithSpecificType"/>.
              <orderedlist numeration="arabic" inheritnum="inherit">
                <?dbfo label-width=2.5em"?>
                <listitem>
                  <para xml:id="A43.ConfigureProfile"
                        xreflabel="4.1">
                    ONVIF Client configures media profile with Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperConfigureMediaProfileWithRequiredAnalytics"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsToken</emphasis> - token of Analytics configuration.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">profile</emphasis> - media profile.
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">videoSourceToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.@token.
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Set <emphasis role="italic">ruleName</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.RuleEngineConfiguration.Rule[N].@Name, where Rule[N] is the 1st Rule with @Type = <emphasis role="italic">ruleType</emphasis>.
                  </para>
                </listitem>               
                <listitem>
                  <para>
                    Return to test procedure.
                  </para>
                </listitem>                
              </orderedlist>
            </para>
          </listitem>
          <listitem xml:id="A43.DeviceConfigurationForCreateSpecificRule">
            <para>
              ONVIF Client configures device for adding of new rule with required type by following the procedure mentioned in <xref linkend="Annex_HelperDeviceConfigurationForCreateSpecificRule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - Rule type
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">nonFixedRuleSupported</emphasis> - Indication of non-fixed Rule support
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>                
                <listitem>
                  <para>
                    out <emphasis role="italic">ruleToRestore</emphasis>  - a rule to restore, if it was removed
                  </para>
                </listitem>
                <listitem>
                  <para>
                    out <emphasis role="italic">profile</emphasis>  - media profile with Analytics Configuration
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">nonFixedRuleSupported</emphasis> = false, FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">videoSourceToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.VideoSource.@token.
            </para>
          </listitem>          
          <listitem>
            <para>
              Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">profile</emphasis>.Configurations.Analytics.@token.
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleName</emphasis> := generated random string.
            </para>
          </listitem>
          <listitem>
            <para>
              ONVIF Client creates new rule by following the procedure mentioned in <xref linkend="Annex_HelperCreateRule"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    in <emphasis role="italic">analyticsToken</emphasis> - a token of Analytics Configuration
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleName</emphasis> - rule name
                  </para>
                </listitem>
                <listitem>
                  <para>
                    in <emphasis role="italic">ruleType</emphasis> - rule type
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              Set <emphasis role="italic">ruleNameToDelete</emphasis> := <emphasis role="italic">ruleName</emphasis>.
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetRuleOptionsResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.44 Select Profile With Specific Rule Type-->
    <section xml:id="Annex_HelperSelectProfileWithSpecificRuleType"
             xreflabel="Annex A.44">
      <title>Select Profile With Specific Rule Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectProfileWithSpecificRuleType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to select existing Media Profile that contains Analytics Configuration with required rule type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Media2 Service is received from the DUT. Analytics is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Required Rule Type (<emphasis role="italic">ruleType</emphasis>). 
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> Media Profile (<emphasis role="italic">profile</emphasis>) that contains Video Source Configuration, and Analytics Configuration with rule with required type.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client invokes <emphasis role="bold">GetProfiles</emphasis> request with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Token skipped
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Type[0] := VideoSource
                  </para>
                </listitem>
                <listitem>
                  <para>
                    Type[1] := Analytics
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              The DUT responds with <emphasis role="bold">GetProfilesResponse</emphasis> message with parameters
              <itemizedlist>
                <listitem>
                  <para>
                    Profiles list =: <emphasis role="italic">profileList</emphasis>
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Media Profile (<emphasis role="italic">profile</emphasis>) in <emphasis role="italic">profileList</emphasis> with Configuration.Analytics repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    If <emphasis role="italic">profile</emphasis>.Configuration.Analytics contains RuleEngineConfiguration.Rule with @Type = <emphasis role="italic">ruleType</emphasis>
                    <orderedlist numeration="arabic" inheritnum="inherit">
                      <?dbfo label-width=3.5em"?>
                      <listitem>
                        <para>
                          If <emphasis role="italic">profile</emphasis> contains Configuration.VideoSource, skip other steps and return to test procedure.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ONVIF Client invokes <emphasis role="bold">GetVideoSourceConfigurations</emphasis> request with parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                ConfigurationToken skipped
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                ProfileToken := <emphasis role="italic">profile</emphasis>.@token
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          The DUT responds with <emphasis role="bold">GetVideoSourceConfigurationsResponse</emphasis> message with parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                Configurations list =: <emphasis role="italic">vscList</emphasis>
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          If <emphasis role="italic">vscList</emphasis> is empty, FAIL the test and skip other steps.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          ONVIF Client invokes <emphasis role="bold">AddConfiguration</emphasis> request with parameters
                          <itemizedlist>
                            <listitem>
                              <para>
                                ProfileToken := <emphasis role="italic">profile</emphasis>.@token
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Name skipped
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Configuration[0].Type := VideoSource
                              </para>
                            </listitem>
                            <listitem>
                              <para>
                                Configuration[0].Token := <emphasis role="italic">vscList</emphasis>[0].@token
                              </para>
                            </listitem>
                          </itemizedlist>
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          The DUT responds with <emphasis role="bold">AddConfigurationResponse</emphasis> message.
                        </para>
                      </listitem>
                    <listitem>
                        <para>
                          Skip other steps and return to test procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>         
          
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetProfilesResponse</emphasis> message.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">GetVideoSourceConfigurationsResponse</emphasis> message.
            </para>
          </listitem>
          <listitem>
            <para>
              DUT did not send <emphasis role="bold">AddConfigurationResponse</emphasis> message.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.45 Select Existing Rule With Specific Type-->
    <section xml:id="Annex_HelperSelectExistingRuleWithSpecificType"
             xreflabel="Annex A.45">
      <title>Select Existing Rule With Specific Type</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperSelectExistingRuleWithSpecificType
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to find existing rule with required type.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> Analytics Service is received from the DUT. Rule Engine is supported by the DUT.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Rule Type (<emphasis role="italic">ruleType</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> (optional) Rule (<emphasis role="italic">rule</emphasis>).
        (optional) Analytics Configuration token (<emphasis role="italic">analyticsToken</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              ONVIF Client retrieves a list of Analytics Configurations by following the procedure mentioned in <xref linkend="Annex_HelperGetAnalyticsConfigurationsList"/> with the following input and output parameters
              <itemizedlist>
                <listitem>
                  <para>
                    out <emphasis role="italic">analyticsConfList</emphasis> - a list of Analytics configurations
                  </para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>
              For each Analytics Configuration <emphasis role="italic">analyticsConf</emphasis> in <emphasis role="italic">analyticsConfList</emphasis> repeat the following steps:
              <orderedlist numeration="arabic"
                           inheritnum="inherit">
                <?dbfo label-width="2.5em"?>
                <listitem>
                  <para>
                    ONVIF Client retrieves a set of rules related to Analytics Configuration by following the procedure mentioned in <xref linkend="Annex_HelperGetRules"/> with the following input and output parameters
                    <itemizedlist>
                      <listitem>
                        <para>
                          in <emphasis role="italic">analyticsConf</emphasis>.@token - a token of Analytics Configuration
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          out <emphasis role="italic">ruleList</emphasis>  - rule list
                        </para>
                      </listitem>
                    </itemizedlist>
                  </para>
                </listitem>
                <listitem>
                  <para>
                    If <emphasis role="italic">ruleList</emphasis> contains Rule with @Type = <emphasis role="italic">ruleType</emphasis>
                    <orderedlist numeration="arabic"
                                 inheritnum="inherit">
                      <?dbfo label-width="2.5em"?>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">rule</emphasis> := Rule with @Type = <emphasis role="italic">ruleType</emphasis> from <emphasis role="italic">ruleList</emphasis>.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Set <emphasis role="italic">analyticsToken</emphasis> := <emphasis role="italic">analyticsConf</emphasis>.@token.
                        </para>
                      </listitem>
                      <listitem>
                        <para>
                          Skip other steps and return to the test procedure.
                        </para>
                      </listitem>
                    </orderedlist>
                  </para>
                </listitem>
              </orderedlist>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              None.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <!--A.46 Rule Engine Topic Format Verification-->
    <section xml:id="Annex_HelperRuleEngineMessageFormatVerification"
             xreflabel="Annex A.46">
      <title>Rule Engine Message Format Verification</title>
      <para>
        <emphasis role="bold">Name:</emphasis> HelperRuleEngineMessageFormatVerification
      </para>
      <para>
        <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to verify rule engine message format.
      </para>
      <para>
        <emphasis role="bold">Pre-requisite:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Input:</emphasis> Message to be verified (<emphasis role="italic">message</emphasis>).
      </para>
      <para>
        <emphasis role="bold">Returns:</emphasis> None.
      </para>
      <para>
        <emphasis role="bold">Procedure:</emphasis>
      </para>
      <para>
        <orderedlist>
          <?dbfo label-width="1.5em"?>
          <listitem>
            <para>
              If <emphasis role="italic">message</emphasis> does not contain Source.SimpleItemDescription item with Name = "VideoSource", FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">message</emphasis>.Source.SimpleItemDescription with Name = "VideoSource" does not have Type = "tt:ReferenceToken", FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">message</emphasis>.Source contains SimpleItemDescription with Name = "AnalyticsConfiguration" and its Type != "tt:ReferenceToken", FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">message</emphasis> does not contain Source.SimpleItemDescription item with Name = "Rule", FAIL the test and skip other steps.
            </para>
          </listitem>
          <listitem>
            <para>
              If <emphasis role="italic">message</emphasis>.Source.SimpleItemDescription with Name = "Rule" does not have Type = "xs:string", FAIL the test and skip other steps.
            </para>
          </listitem>          
        </orderedlist>
      </para>
      <para>
        <emphasis role="bold">Procedure Result:</emphasis>
      </para>
      <para>
        <emphasis role="bold">PASS –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT passes all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
      <para>
        <emphasis role="bold">FAIL –</emphasis>
        <itemizedlist>
          <listitem>
            <para>
              DUT does not pass all assertions.
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
  </appendix>
</book>